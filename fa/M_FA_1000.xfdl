<?xml version="1.0" encoding="utf-8"?>
<FDL version="2.1">
  <Form id="M_SM_0010" width="1433" height="915" titletext="전표등록" onload="fn_FormOnload" onclose="fn_FormClose" ontimer="M_SM_0010_ontimer">
    <Layouts>
      <Layout height="915" width="1433">
        <Div id="div_Search" taborder="0" left="14" top="12" height="66" cssclass="div_WF_Search" formscrollbartype="none none" right="14" text="" onkeyup="div_Search_onkeyup">
          <Layouts>
            <Layout>
              <Static id="Static00" taborder="7" text="발의일자" left="16" top="6" width="80" height="24" cssclass="sta_WF_SLabel"/>
              <Static id="Static01" taborder="11" text="회계단위" left="376" top="6" width="80" height="24" cssclass="sta_WF_SLabel"/>
              <Static id="Static02" taborder="12" text="발의번호" left="736" top="6" width="80" height="24" cssclass="sta_WF_SLabel"/>
              <Calendar id="cal_TemhDtFr" taborder="0" left="96" top="6" width="110" height="24" dateformat="yyyy-MM-dd" cssclass="essential" displayinvalidtext="invalid value"/>
              <Static id="Static03" taborder="13" text="~" left="211" top="5" width="20" height="26" cssclass="sta_WF_Dash"/>
              <Static id="Static04" taborder="14" text="내용요약" left="1096" top="6" width="80" height="24" cssclass="sta_WF_SLabel"/>
              <Calendar id="cal_TemhDtTo" taborder="1" left="234" top="6" width="110" height="24" dateformat="yyyy-MM-dd" cssclass="essential"/>
              <Button id="btn_AcumCd" taborder="18" left="680" top="6" width="24" height="24" cssclass="btn_WF_SmallSearch" tabstop="false" onclick="div_Search_btn_AcumCd_onclick" cursor="pointer"/>
              <Static id="Static00_00" taborder="15" text="발의부서" left="16" top="34" width="80" height="24" cssclass="sta_WF_SLabel"/>
              <Edit id="edt_DepmNm" taborder="6" left="188" top="34" width="130" height="24" enable="true" maxlength="30" onchanged="div_Search_edt_DepmNm_onchanged"/>
              <Button id="btn_DepmCd" taborder="20" left="320" top="34" width="24" height="24" onclick="div_Search_btn_DepmCd_onclick" tabstop="false" cssclass="btn_WF_SmallSearch" cursor="pointer"/>
              <Static id="Static01_00" taborder="16" text="발의자" left="376" top="34" width="80" height="24" cssclass="sta_WF_SLabel"/>
              <Static id="Static04_00" taborder="17" text="결재이력" left="736" top="34" width="80" height="24" cssclass="sta_WF_SLabel"/>
              <Edit id="edt_EmpmCd" taborder="8" left="456" top="34" width="90" height="24" maxlength="10" onchanged="div_Search_edt_EmpmCd_onchanged"/>
              <Button id="btn_SystId" taborder="21" left="680" top="34" width="24" height="24" cssclass="btn_WF_SmallSearch" tabstop="false" onclick="div_Search_btn_SystId_onclick" cursor="pointer"/>
              <Edit id="edt_EmpmNm" taborder="9" left="548" top="34" width="130" height="24" enable="true" maxlength="30" onchanged="div_Search_edt_EmpmNm_onchanged"/>
              <Edit id="edt_DepmCd" taborder="5" left="96" top="34" width="90" height="24" maxlength="10" onchanged="div_Search_edt_DepmCd_onchanged" cssclass="essential"/>
              <Edit id="edt_AcchNo" taborder="3" left="816" top="6" width="248" height="24" onchanged="div_Search_edt_CusmCd_onchanged" maxlength="20"/>
              <Edit id="edt_AcumNm" taborder="19" left="548" top="6" width="130" height="24" enable="false" tabstop="true"/>
              <Edit id="edt_SystId" taborder="22" left="705" top="34" width="31" height="24" maxlength="10" visible="false"/>
              <CheckBox id="chk_WofhYn" taborder="10" left="816" top="34" width="150" height="24" text=""/>
              <Edit id="edt_AcchNm" taborder="4" left="1176" top="6" width="248" height="24" maxlength="200"/>
              <Edit id="edt_AcumCd" taborder="2" left="456" top="6" width="90" height="24" maxlength="10" onchanged="div_Search.form.edt_AcumCd_onchanged"/>
              <Edit id="edt_CusmCd" taborder="23" left="1029" top="37" width="130" height="24" enable="true" maxlength="30" onchanged="div_Search_edt_EmpmNm_onchanged" visible="false"/>
              <Edit id="edt_CusmNm" taborder="24" left="1190" top="37" width="130" height="24" enable="true" maxlength="30" onchanged="div_Search_edt_EmpmNm_onchanged" visible="false"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="sta_HSplitter" taborder="6" left="425" top="122" width="2" height="265" cssclass="sta_SP_Bg"/>
        <Static id="sta_VSplitter" taborder="5" left="14" top="sta_HSplitter:0" height="2" right="14" cssclass="sta_SP_Bg"/>
        <Div id="div_MasterView" taborder="1" left="14" top="90" onsize="div_MasterView_onsize" right="sta_HSplitter:0" bottom="sta_VSplitter:3">
          <Layouts>
            <Layout>
              <Static id="sta_Master10" taborder="0" text="전표목록" left="0" top="0" width="220" height="32" cssclass="sta_WF_Title"/>
              <Grid id="grd_Master10" taborder="1" left="0" top="32" autofittype="none" right="6" bottom="0" selecttype="cell" cellsizingtype="col" binddataset="ds_Master10" oncellclick="div_MasterView_grd_Master10_oncellclick">
                <Formats>
                  <Format id="default">
                    <Columns>
                      <Column size="35" band="left"/>
                      <Column size="95" band="left"/>
                      <Column size="55"/>
                      <Column size="55"/>
                      <Column size="80"/>
                      <Column size="200"/>
                      <Column size="100"/>
                      <Column size="90"/>
                      <Column size="100"/>
                      <Column size="80"/>
                      <Column size="85"/>
                      <Column size="80"/>
                      <Column size="100"/>
                      <Column size="80"/>
                      <Column size="80"/>
                      <Column size="0"/>
                      <Column size="0"/>
                      <Column size="0"/>
                      <Column size="0"/>
                      <Column size="0"/>
                      <Column size="0"/>
                      <Column size="0"/>
                      <Column size="0"/>
                      <Column size="0"/>
                      <Column size="0"/>
                      <Column size="0"/>
                      <Column size="55"/>
                      <Column size="200"/>
                      <Column size="24"/>
                      <Column size="80"/>
                      <Column size="130"/>
                      <Column size="80"/>
                      <Column size="130"/>
                    </Columns>
                    <Rows>
                      <Row size="26" band="head"/>
                      <Row size="24"/>
                    </Rows>
                    <Band id="head">
                      <Cell text="No."/>
                      <Cell col="1" text="발의번호"/>
                      <Cell col="2" text="결재상태"/>
                      <Cell col="3" text="결재차수"/>
                      <Cell col="4" text="발의일자"/>
                      <Cell col="5" text="내용요약"/>
                      <Cell col="6" text="금액"/>
                      <Cell col="7" text="발의시스템"/>
                      <Cell col="8" text="발의부서"/>
                      <Cell col="9" text="발의자"/>
                      <Cell col="10" text="결의번호"/>
                      <Cell col="11" text="결의일자"/>
                      <Cell col="12" text="결의부서"/>
                      <Cell col="13" text="결의자"/>
                      <Cell col="14" text="회계단위"/>
                      <Cell col="15" text="발의구분"/>
                      <Cell col="16" text="지급요청일"/>
                      <Cell col="17" text="지급구분"/>
                      <Cell col="18" text="지급처"/>
                      <Cell col="19" text="지급은행"/>
                      <Cell col="20" text="지급계좌"/>
                      <Cell col="21" text="입금예정일"/>
                      <Cell col="22" text="입금구분"/>
                      <Cell col="23" text="입금처"/>
                      <Cell col="24" text="입금은행"/>
                      <Cell col="25" text="입금계좌"/>
                      <Cell col="26" text="이관여부"/>
                      <Cell col="27" text="발의내용"/>
                      <Cell col="28"/>
                      <Cell col="29" text="등록자"/>
                      <Cell col="30" text="등록일시"/>
                      <Cell col="31" text="수정자"/>
                      <Cell col="32" text="수정일시"/>
                    </Band>
                    <Band id="body">
                      <Cell expr="currow+1" textAlign="center"/>
                      <Cell col="1" text="bind:ACCH_NO" textAlign="center" displaytype="mask" maskeditformat="expr:(ACCH_NO.length &gt; 11)?'@@@@@@@@-@@@@':'@@@@@@-@@@@'" edittype="none" maskedittype="string"/>
                      <Cell col="2" text="bind:WOFH_ST" displaytype="combotext" textAlign="center" combodataset="ds_Wf110" combocodecol="CODM_CD" combodatacol="CODM_NM" cssclass="expr:comp.parent.gfn_SetGridWfStat(WOFH_ST)"/>
                      <Cell col="3" text="bind:WOFH_YN_NM" textAlign="center"/>
                      <Cell col="4" text="bind:ACCH_DD" displaytype="date" calendardateformat="yyyy-MM-dd" textAlign="center"/>
                      <Cell col="5" text="bind:ACCH_NM"/>
                      <Cell col="6" text="bind:ACCH_AM" textAlign="right"/>
                      <Cell col="7" text="bind:ACTY_CD" displaytype="combotext" combodataset="ds_Fa112" combocodecol="CODM_CD" combodatacol="CODM_NM" verticalAlign="middle"/>
                      <Cell col="8" text="bind:DEPM_NM"/>
                      <Cell col="9" textAlign="center" text="bind:EMPM_NM"/>
                      <Cell col="10" text="bind:SLIP_NO" displaytype="mask" maskeditformat="expr:(SLIP_NO.length &gt; 10)?'@@@@@@@@-@@@@':'@@@@@@-@@@@'" maskedittype="string" textAlign="center"/>
                      <Cell col="11" text="bind:SLIP_DD" displaytype="date" calendardateformat="yyyy-MM-dd" textAlign="center" maskedittype="string" calendardisplayinvalidtype="default" maskeditformat="####-##-##" calendardisplaynulltype="none"/>
                      <Cell col="12" text="bind:SLIP_DEPMNM"/>
                      <Cell col="13" text="bind:SLIP_NM" textAlign="center"/>
                      <Cell col="14" text="bind:ACUM_NM" textAlign="center"/>
                      <Cell col="15" text="bind:ACCH_GU" displaytype="combotext" combodataset="ds_Fa110" combocodecol="CODM_CD" combodatacol="CODM_NM"/>
                      <Cell col="16" text="expr:(ACCH_GU=='2')?PARE_DD:''" calendardisplaynulltype="none"/>
                      <Cell col="17" displaytype="combotext" text="expr:(ACCH_GU=='2')?PACS_GU:''" combodataset="ds_Fa114" combocodecol="CODM_CD" combodatacol="CODM_NM"/>
                      <Cell col="18" text="expr:(ACCH_GU=='2')?PACS_NM:''"/>
                      <Cell col="19" text="expr:(ACCH_GU=='2')?PABA_NM:''" textAlign="center"/>
                      <Cell col="20" text="expr:(ACCH_GU=='2')?PAAC_NO:''"/>
                      <Cell col="21" displaytype="date" calendardisplaynulltype="none" calendardateformat="yyyy-MM-dd" textAlign="center" text="expr:(ACCH_GU=='1')?PARE_DD:''"/>
                      <Cell col="22" displaytype="combotext" text="expr:(ACCH_GU=='1')?PACS_GU:''" combodataset="ds_Fa114" combocodecol="CODM_CD" combodatacol="CODM_NM"/>
                      <Cell col="23" text="expr:(ACCH_GU=='1')?PACS_NM:''"/>
                      <Cell col="24" text="expr:(ACCH_GU=='1')?PABA_NM:''" textAlign="center"/>
                      <Cell col="25" text="expr:(ACCH_GU=='1')?PAAC_NO:''"/>
                      <Cell col="26" displaytype="checkboxcontrol" text="bind:TRAN_YN"/>
                      <Cell col="27" text="bind:ACRE_NM" autosizerow="default"/>
                      <Cell col="28" cursor="pointer" expandshow="show" expandsize="24"/>
                      <Cell col="29" textAlign="center" text="bind:REGI_NM"/>
                      <Cell col="30" text="bind:REGI_DT" textAlign="center"/>
                      <Cell col="31" text="bind:MODI_NM" textAlign="center"/>
                      <Cell col="32" text="bind:MODI_DT" textAlign="center"/>
                    </Band>
                  </Format>
                </Formats>
              </Grid>
            </Layout>
          </Layouts>
        </Div>
        <Div id="div_DetailInput" taborder="2" left="14" right="10" bottom="5" top="sta_VSplitter:0" text="">
          <Layouts>
            <Layout>
              <Tab id="tab_Detail" taborder="0" tabindex="0" left="0" top="5" right="398" bottom="0" cssclass="tab_WF_DetailList" onchanged="div_DetailInput_tab_Detail_onchanged" enable="false">
                <Tabpages>
                  <Tabpage id="tpg_01" text="전표상세">
                    <Layouts>
                      <Layout>
                        <Grid id="grd_Detail10" taborder="0" left="0" top="2" autofittype="none" right="0" bottom="0" oncellclick="div_DetailInput_tab_Detail_tpg_01_grd_Detail10_oncellclick" autoenter="select" cellsizingtype="col" binddataset="ds_Detail10" onenterdown="div_DetailInput_tab_Detail_tpg_01_grd_Detail10_onenterdown" onsetfocus="div_DetailInput_tab_Detail_tpg_01_grd_Detail10_onsetfocus" onnodataareadblclick="div_DetailInput_tab_Detail_tpg_01_grd_Detail10_onnodataareadblclick" selecttype="cell">
                          <Formats>
                            <Format id="default">
                              <Columns>
                                <Column size="30" band="left"/>
                                <Column size="35" band="left"/>
                                <Column size="50" band="left"/>
                                <Column size="0" band="left"/>
                                <Column size="100" band="left"/>
                                <Column size="200" band="left"/>
                                <Column size="24" band="left"/>
                                <Column size="80"/>
                                <Column size="150"/>
                                <Column size="24"/>
                                <Column size="100"/>
                                <Column size="100"/>
                                <Column size="200"/>
                                <Column size="100"/>
                                <Column size="24"/>
                                <Column size="80"/>
                                <Column size="80"/>
                                <Column size="80"/>
                                <Column size="100"/>
                                <Column size="100"/>
                                <Column size="90"/>
                                <Column size="60"/>
                              </Columns>
                              <Rows>
                                <Row size="26" band="head"/>
                                <Row size="24"/>
                                <Row size="24" band="summ"/>
                              </Rows>
                              <Band id="head">
                                <Cell/>
                                <Cell col="1" text="No."/>
                                <Cell col="2" text="선택"/>
                                <Cell col="3" text="차대구분"/>
                                <Cell col="4" text="계정코드" cssclass="essential"/>
                                <Cell col="5" text="계정명"/>
                                <Cell col="6"/>
                                <Cell col="7" text="회계기준코드"/>
                                <Cell col="8" text="회계기준명"/>
                                <Cell col="9"/>
                                <Cell col="10" text="차변금액" cssclass="essential"/>
                                <Cell col="11" text="대변금액" cssclass="essential"/>
                                <Cell col="12" text="적요" cssclass="essential"/>
                                <Cell col="13" text="예산부서"/>
                                <Cell col="14"/>
                                <Cell col="15" text="편성년월"/>
                                <Cell col="16" text="화폐"/>
                                <Cell col="17" text="환율"/>
                                <Cell col="18" text="외화차변"/>
                                <Cell col="19" text="외화대변"/>
                                <Cell col="20" text="반제발의번호"/>
                                <Cell col="21" text="반제순번"/>
                              </Band>
                              <Band id="body">
                                <Cell cssclass="expr:comp.parent.gfn_Decode(crudType, &quot;I&quot;,&quot;cell_WF_Insert&quot;, &quot;U&quot;,&quot;cell_WF_Modify&quot;, &quot;D&quot;,&quot;cell_WF_Delete01&quot;, &quot;&quot;)"/>
                                <Cell col="1" textAlign="center" text="bind:ACCB_SE"/>
                                <Cell col="2" displaytype="checkboxcontrol" edittype="checkbox" text="bind:s_chk"/>
                                <Cell col="3" text="bind:DECR_GU" displaytype="combotext" edittype="none" combodataset="ds_Fa040" combocodecol="CODM_CD" combodatacol="CODM_NM"/>
                                <Cell col="4" text="bind:ACOM_CD" edittype="expr:(CONF_YN != '1' &amp;&amp; ACOM_ENABLE != '0')?'text':'none'" textAlign="center" editmaxlength="30"/>
                                <Cell col="5" text="bind:ACOM_NM" edittype="none"/>
                                <Cell col="6" cursor="pointer" expandshow="show" expandsize="24"/>
                                <Cell col="7" edittype="expr:(CONF_YN != '1')?'text':'none'" text="bind:PALM_CD" textAlign="center"/>
                                <Cell col="8" edittype="none" text="bind:PALM_NM"/>
                                <Cell col="9" cursor="pointer" expandshow="show" expandsize="24"/>
                                <Cell col="10" text="bind:DEBI_AM" edittype="expr:(CRED_AM ==0 &amp;&amp; CONF_YN != '1')?'mask': 'none'" textAlign="right" maskeditformat="expr:(DECR_GU == 'C')?'#,##0': '#,###'" displaytype="number" editautoselect="false" maskeditautoselect="true"/>
                                <Cell col="11" text="bind:CRED_AM" edittype="expr:(DEBI_AM == 0 &amp;&amp; CONF_YN != '1')?'mask': 'none'" textAlign="right" maskeditformat="expr:(DECR_GU == 'D')?'#,##0': '#,###'" displaytype="number" editautoselect="false" maskeditautoselect="true"/>
                                <Cell col="12" text="bind:REMK_NM" edittype="expr:(CONF_YN != '1')?'text':'none'" editautoselect="true" editmaxlength="100"/>
                                <Cell col="13" edittype="none" displaytype="normal" text="bind:BUDP_NM"/>
                                <Cell col="14" cursor="pointer" expandshow="show" expandsize="24"/>
                                <Cell col="15" edittype="none" calendareditformat="yyyy-MM" calendarshowmonthspin="true" calendarshowyearspin="true" calendardateformat="yyyy-MM" text="bind:BUDG_MM" textAlign="center" maskeditformat="@@@@-@@" maskedittype="string" displaytype="expr:BUDG_MM == null ?  'none' : 'date'"/>
                                <Cell col="16" text="bind:CURR_CD" edittype="none" displaytype="combotext" combodataset="ds_Sm020" combocodecol="CODM_CD" combodatacol="CODM_NM"/>
                                <Cell col="17" text="bind:EXCH_RT" edittype="none" textAlign="right" displaytype="number" maskeditformat="#,###.####" maskeditautoselect="true"/>
                                <Cell col="18" text="bind:FRDB_AM" displaytype="number" edittype="none" maskeditformat="expr:(DECR_GU == 'D')?'#,##0.####': '#,###.####'" textAlign="right" maskeditautoselect="true"/>
                                <Cell col="19" text="bind:FRCR_AM" displaytype="number" edittype="none" maskeditformat="expr:(DECR_GU == 'C')?'#,##0.####': '#,###.####'" textAlign="right" maskeditautoselect="true"/>
                                <Cell col="20" text="bind:ANTI_NO" displaytype="mask" maskeditformat="expr:(ANTI_NO.length &gt; 10)?'@@@@@@@@-@@@@':'@@@@@@-@@@@'" textAlign="center" maskedittype="string"/>
                                <Cell col="21" text="bind:ANTI_SE" textAlign="center"/>
                              </Band>
                              <Band id="summary">
                                <Cell/>
                                <Cell col="1"/>
                                <Cell col="2"/>
                                <Cell col="3" text="합계" textAlign="center"/>
                                <Cell col="4"/>
                                <Cell col="5"/>
                                <Cell col="6"/>
                                <Cell col="7"/>
                                <Cell col="8"/>
                                <Cell col="9"/>
                                <Cell col="10" displaytype="mask" maskeditformat="#,###" expr="dataset.getCaseSum(&quot;crudType != 'D'&quot;, &quot;DEBI_AM&quot;) "/>
                                <Cell col="11" displaytype="mask" maskeditformat="#,###" expr="dataset.getCaseSum(&quot;crudType != 'D'&quot;, &quot;CRED_AM&quot;)"/>
                                <Cell col="12" expr="(dataset.getCaseSum(&quot;crudType != 'D'&quot;, &quot;DEBI_AM&quot;) - dataset.getCaseSum(&quot;crudType != 'D'&quot;, &quot;CRED_AM&quot;))==0?&quot;&quot;:&quot; 차액 : &quot; + (dataset.getCaseSum(&quot;crudType != 'D'&quot;, &quot;DEBI_AM&quot;) - dataset.getCaseSum(&quot;crudType != 'D'&quot;, &quot;CRED_AM&quot;)).toString().replace(/\B(?=(\d{3})+(?!\d))/g, &quot;,&quot;)" displaytype="normal" maskeditformat="#,###" color="#f17264"/>
                                <Cell col="13"/>
                                <Cell col="14"/>
                                <Cell col="15"/>
                                <Cell col="16"/>
                                <Cell col="17" displaytype="number"/>
                                <Cell col="18" expr="dataset.getSum(&quot;FRDB_AM&quot;)" displaytype="number" maskeditformat="#,##0.0###"/>
                                <Cell col="19" expr="dataset.getSum(&quot;FRCR_AM&quot;)" displaytype="number" maskeditformat="#,##0.0###"/>
                                <Cell col="20"/>
                                <Cell col="21"/>
                              </Band>
                            </Format>
                          </Formats>
                        </Grid>
                      </Layout>
                    </Layouts>
                  </Tabpage>
                  <Tabpage id="tpg_03" text="첨부파일">
                    <Layouts>
                      <Layout>
                        <Div id="div_CommFile" taborder="0" left="0" top="2" right="0" bottom="0" url="cmm::cmmFileList.xfdl" async="false"/>
                      </Layout>
                    </Layouts>
                  </Tabpage>
                </Tabpages>
              </Tab>
              <Div id="div_ComGrdBtn" taborder="1" top="9" height="20" right="398" width="435" async="false" enable="false" text=""/>
              <Div id="div_detailRight" taborder="2" text="Div00" left="tab_Detail:15" top="11" right="0" bottom="5">
                <Layouts>
                  <Layout>
                    <Div id="div_Item" taborder="1" text="Div00" left="0" top="0" right="0" height="41">
                      <Layouts>
                        <Layout>
                          <Static id="sta_DetailRightBottom" taborder="28" text="관리항목" left="0" top="0" width="220" height="22" cssclass="sta_WF_Title" verticalAlign="middle" textAlign="left"/>
                        </Layout>
                      </Layouts>
                    </Div>
                    <Div id="div_Budget" taborder="1" left="0" top="div_Item:0" height="180" right="0" visible="true">
                      <Layouts>
                        <Layout>
                          <Static id="StaticBudget1F" taborder="0" top="210" height="30" cssclass="sta_WF_DBg" left="0" text="" right="0" visible="false"/>
                          <Static id="StaticBudget2F" taborder="1" top="240" height="30" cssclass="sta_WF_DBg" right="0" left="0" visible="false"/>
                          <Static id="StaticBudget3F" taborder="2" top="29" height="30" cssclass="sta_WF_DBg" right="0" left="0"/>
                          <Static id="StaticBudget4F" taborder="3" top="58" height="30" cssclass="sta_WF_DBg" left="0" right="0"/>
                          <Static id="StaticBudget5F" taborder="4" top="87" height="30" cssclass="sta_WF_DBg" right="0" left="0"/>
                          <Static id="StaticBudget6F" taborder="5" top="145" height="30" cssclass="sta_WF_DBg" left="0" right="0"/>
                          <Static id="Static01" taborder="6" text="편성년월" top="StaticBudget1F:-30" width="85" height="30" cssclass="sta_WF_DLabel" left="0" DomainID="S00001" visible="false"/>
                          <Static id="sta_DepmCd" taborder="7" text="예산부서" top="StaticBudget2F:-30" width="85" height="30" cssclass="sta_WF_DLabel" left="0" DomainID="S00003" usedecorate="true" visible="false"/>
                          <Static id="Static01_00_01" taborder="8" text="예산계정" top="StaticBudget3F:-30" width="93" height="30" cssclass="sta_WF_DLabel" left="0"/>
                          <Static id="Static01_04" taborder="9" text="편성금액" top="StaticBudget4F:-30" width="93" height="30" cssclass="sta_WF_DLabel" left="0"/>
                          <Static id="Static01_00_02" taborder="10" text="기사용금액" top="87" width="93" height="30" cssclass="sta_WF_DLabel" left="0"/>
                          <Static id="Static01_01_00" taborder="11" text="가용잔액" top="145" width="93" height="30" cssclass="sta_WF_DLabel" left="0"/>
                          <Calendar id="cal_BudgetDd" taborder="12" left="88" top="StaticBudget1F:-27" height="24" dateformat="yyyy-MM" width="103" editformat="yyyy-MM" enable="false" visible="false"/>
                          <Edit id="edt_BudgetDeptCd" taborder="13" left="88" top="StaticBudget2F:-27" height="24" enable="true" text="ssdsdewweew" width="103" onchanged="div_DetailInput_div_detailRight_div_Budget_edt_BudgetDeptCd_onchanged" visible="false"/>
                          <Edit id="edt_BudgetDeptNm" taborder="14" left="edt_BudgetDeptCd:3" top="StaticBudget2F:-27" height="24" enable="false" text="ssdsdewweew" right="30" visible="false"/>
                          <Edit id="edt_BudgetAcomCd" taborder="15" left="96" top="StaticBudget3F:-27" height="24" enable="true" text="ssdsdewweew" right="3" readonly="true"/>
                          <Button id="btn_BudgetDept" taborder="16" top="StaticBudget2F:-27" height="24" right="3" width="24" cursor="pointer" cssclass="btn_WF_SmallSearch" onclick="div_DetailInput_div_detailRight_div_Budget_btn_BudgetDept_onclick" visible="false"/>
                          <Static id="sta_Master10" taborder="17" text="예산" left="0" top="0" width="220" height="32" cssclass="sta_WF_Title"/>
                          <MaskEdit id="mae_RecAm" taborder="18" left="96" top="StaticBudget4F:-27" height="24" format="#,##0" enable="true" right="3" readonly="true"/>
                          <MaskEdit id="mae_AvailAm" taborder="19" left="96" top="148" height="24" format="#,##0" enable="true" right="3" readonly="true"/>
                          <MaskEdit id="mae_UsedAm" taborder="20" left="96" top="90" height="24" format="#,##0" enable="true" right="3" readonly="true"/>
                          <CheckBox id="chk_BgcmYn" taborder="21" text="예산통제여부" top="6" width="96" height="20" right="0" enable="false" falsevalue="0" truevalue="1"/>
                          <Static id="StaticBudget5F00" taborder="22" top="116" height="30" cssclass="sta_WF_DBg" right="0" left="0"/>
                          <Static id="Static01_00_02_00" taborder="23" text="사용금액" top="116" width="93" height="30" cssclass="sta_WF_DLabel" left="0"/>
                          <MaskEdit id="mae_RegAm" taborder="24" left="96" top="119" height="24" format="#,##0" enable="true" right="3" readonly="true"/>
                        </Layout>
                      </Layouts>
                    </Div>
                  </Layout>
                </Layouts>
              </Div>
              <Button id="btn_banFind" taborder="3" text="반제전표찾기" height="20" cssclass="bt_WF_InputArea_White" width="119" right="div_ComGrdBtn:-120" enable="false" top="9" onclick="div_DetailInput_btn_banFind_onclick" visible="true"/>
            </Layout>
          </Layouts>
        </Div>
        <Div id="div_MasterInput" taborder="3" left="sta_HSplitter:6" top="90" text="" enable="false" right="14" bottom="sta_VSplitter:3">
          <Layouts>
            <Layout>
              <Tab id="tab_Master" taborder="0" tabindex="0" left="0" top="0" right="0" bottom="0" cssclass="tab_WF_MasterList" onkeyup="div_MasterInput_tab_Master_onkeyup" tabstop="false">
                <Tabpages>
                  <Tabpage id="tpg_01" text="전표내역" enable="true">
                    <Layouts>
                      <Layout>
                        <Static id="Static01_03" taborder="0" top="2" height="30" cssclass="sta_WF_DBg" left="0" text="" onclick="div_MasterInput_tab_Master_tpg_01_Static01_03_onclick" right="0" minwidth="985" maxwidth=""/>
                        <Static id="sta_AcchNo" taborder="1" text="발의번호" top="2" width="100" height="30" cssclass="sta_WF_DLabel" left="0"/>
                        <Static id="Static01_03_00" taborder="2" top="31" height="30" cssclass="sta_WF_DBg" left="0" right="0" minwidth="985" maxwidth=""/>
                        <Static id="sta_DepmCd" taborder="3" text="발의부서" top="31" width="100" height="30" cssclass="sta_WF_DLabel" left="0"/>
                        <Static id="sta_EmpmCd" taborder="4" text="발의자" top="31" width="100" height="30" cssclass="sta_WF_DLabel" left="472"/>
                        <Static id="Static01_03_00_00" taborder="10" top="59" height="30" cssclass="sta_WF_DBg" left="0" right="0" minwidth="985" maxwidth=""/>
                        <Static id="sta_AcumCd" taborder="12" text="회계단위" top="59" width="100" height="30" cssclass="sta_WF_DLabel" left="472"/>
                        <Static id="Static01_03_02" taborder="14" top="88" height="30" cssclass="sta_WF_DBg" left="0" right="0" minwidth="985" maxwidth="" text="" visible="false"/>
                        <Static id="sta_AcchNm" taborder="16" text="내용요약" top="59" width="100" height="30" cssclass="sta_WF_DLabel" left="0"/>
                        <Static id="Static01_03_00_01" taborder="17" top="117" height="30" cssclass="sta_WF_DBg" left="-1" right="0" minwidth="986" maxwidth="" visible="false"/>
                        <Static id="sta_PacsGu" taborder="18" text="지급구분" top="88" width="100" height="30" cssclass="sta_WF_DLabel" left="707" visible="false"/>
                        <Static id="sta_AcchAm" taborder="19" text="발의금액" top="209" width="100" height="30" cssclass="sta_WF_DLabel" left="472" visible="false"/>
                        <Static id="Static01_03_00_00_00" taborder="20" top="88" cssclass="sta_WF_DBg" left="0" bottom="0" right="0" minwidth="985" maxwidth=""/>
                        <Static id="Sta_AcreNm" taborder="21" top="88" width="100" cssclass="sta_WF_DLabel" left="0" bottom="0" text="발의내용"/>
                        <Edit id="edt_DepmCd" taborder="5" left="103" top="34" width="130" height="24" cssclass="essential" onchanged="div_MasterInput_tab_Master_tpg_01_edt_DepmCd_onchanged" autoselect="true" maxlength="10"/>
                        <Edit id="edt_DepmNm" taborder="22" left="236" top="34" width="206" height="24" enable="true" tabstop="false" readonly="true"/>
                        <Button id="btn_DepmCd" taborder="23" left="445" top="34" width="24" height="24" cssclass="btn_WF_SmallSearch" onclick="div_MasterInput_tab_Master_tpg_01_btn_DepmCd_onclick" cursor="pointer" tabstop="false"/>
                        <Edit id="edt_EmpmCd" taborder="6" left="575" top="34" width="130" height="24" maxlength="10" cssclass="essential" onchanged="div_MasterInput_tab_Master_tpg_01_edt_EmpmCd_onchanged" autoselect="true"/>
                        <Edit id="edt_EmpmNm" taborder="24" left="708" top="34" height="24" enable="true" tabstop="false" readonly="true" maxwidth="" right="3" minwidth="274"/>
                        <Button id="btn_SystId" taborder="25" left="edt_EmpmNm:-24" top="34" height="24" cssclass="btn_WF_SmallSearch" onclick="div_MasterInput_tab_Master_tpg_01_btn_SystId_onclick" cursor="pointer" tabstop="false" right="3" minwidth="24" maxwidth=""/>
                        <Edit id="edt_AcumNm" taborder="26" left="708" top="62" height="24" enable="true" tabstop="false" readonly="true" right="3"/>
                        <Button id="btn_AcumCd" taborder="27" left="edt_AcumNm:-24" top="62" height="24" cssclass="btn_WF_SmallSearch" text="" cursor="pointer" onclick="div_MasterInput_tab_Master_tpg_01_btn_AcumCd_onclick" tabstop="false" right="3" minwidth="24" maxwidth=""/>
                        <Edit id="edt_AcchNm" taborder="8" left="103" top="62" width="366" height="24" enable="true" cssclass="essential" autoselect="true" maxlength="200"/>
                        <Edit id="edt_SystId" taborder="28" left="800" top="34" width="7" height="24" maxlength="20" cssclass="essential" visible="false"/>
                        <Static id="sta_SlipNo" taborder="29" text="결의번호" top="2" width="100" height="30" cssclass="sta_WF_DLabel" left="707"/>
                        <Edit id="edt_AcumCd" taborder="7" left="575" top="62" width="130" height="24" cssclass="essential" onchanged="div_MasterInput.form.tab_Master.tpg_01.form.edt_AcumCd_onchanged" autoselect="true" maxlength="10"/>
                        <Static id="sta_PareDd" taborder="30" text="지급요청일자" top="88" width="100" height="30" cssclass="sta_WF_DLabel" left="472" visible="false"/>
                        <Calendar id="cal_PareDd" taborder="9" left="575" top="91" height="24" dateformat="yyyy-MM-dd" width="130" visible="false"/>
                        <Combo id="cbo_PacsGu" taborder="11" left="810" top="91" height="24" codecolumn="CODM_CD" datacolumn="CODM_NM" displayrowcount="15" innerdataset="ds_Fa114" tabstop="true" text="" onitemchanged="div_MasterInput_tab_Master_tpg_01_cbo_PacsGu_onitemchanged" right="3" minwidth="172" maxwidth="" visible="false"/>
                        <Static id="sta_PacsCd" taborder="31" text="지급처" top="157" width="100" height="30" cssclass="sta_WF_DLabel" left="180" visible="false"/>
                        <Button id="btn_PacsCd" taborder="32" left="625" top="160" width="24" height="24" cssclass="btn_WF_SmallSearch" text="" cursor="pointer" onclick="div_MasterInput_tab_Master_tpg_01_btn_PacsCd_onclick" tabstop="false" visible="false"/>
                        <Edit id="edt_PacsCd" taborder="13" left="283" top="160" width="130" height="24" onchanged="div_MasterInput_tab_Master_tpg_01_edt_PacsCd_onchanged" autoselect="true" maxlength="100" visible="false"/>
                        <Static id="sta_PaacNo" taborder="33" text="계좌정보" top="117" width="100" height="30" cssclass="sta_WF_DLabel" left="472" visible="false"/>
                        <TextArea id="txt_AcreNm" taborder="15" left="103" top="91" bottom="3" tabstop="true" maxlength="2000" right="3" minwidth="879" maxwidth=""/>
                        <Button id="btn_AcreNmPop" taborder="34" top="102" height="24" width="24" cursor="pointer" cssclass="btn_WF_SmallSearch" onclick="div_MasterInput_tab_Master_tpg_01_btn_AcreNmPop_onclick" tabstop="false" left="txt_AcreNm:-26"/>
                        <MaskEdit id="mae_AcchAm" taborder="35" left="575" top="212" height="24" format="#,##0" enable="true" cssclass="essential" width="130" autoselect="true" readonly="true" tabstop="false" visible="false"/>
                        <MaskEdit id="mae_AcchNo" taborder="36" left="103" top="5" width="366" height="24" type="string" format="@@@@@@-@@@@" enable="true" readonly="true"/>
                        <MaskEdit id="mae_SlipNo" taborder="37" left="810" top="5" height="24" type="string" enable="true" format="@@@@@@-@@@@" readonly="true" right="3"/>
                        <Static id="sta_AcchDd" taborder="38" text="발의일자" top="2" width="100" height="30" cssclass="sta_WF_DLabel" left="472"/>
                        <Calendar id="cal_AcchDd" taborder="39" left="575" top="5" width="130" height="24" dateformat="yyyy-MM-dd" cssclass="essential" onchanged="div_MasterInput_tab_Master_tpg_01_cal_AcchDd_onchanged"/>
                        <Static id="sta_ActyCd" taborder="40" text="발의시스템" top="209" width="100" height="30" cssclass="sta_WF_DLabel" left="707" visible="false"/>
                        <Combo id="cbo_ActyCd" taborder="41" left="810" top="212" height="24" codecolumn="CODM_CD" datacolumn="CODM_NM" displayrowcount="15" innerdataset="ds_Fa112" cssclass="essential" autoselect="false" tabstop="true" enable="true" readonly="true" right="3" minwidth="172" maxwidth="" visible="false"/>
                        <Static id="sta_AcchGu" taborder="42" text="발의구분" top="222" width="100" height="30" cssclass="sta_WF_DLabel" left="744" visible="false"/>
                        <Combo id="cbo_AcchGu" taborder="43" left="847" top="225" height="24" width="130" codecolumn="CODM_CD" datacolumn="CODM_NM" displayrowcount="15" innerdataset="ds_Fa110" cssclass="essential" text="" onitemchanged="div_MasterInput_tab_Master_tpg_01_cbo_AcchGu_onitemchanged" tabstop="true" visible="false"/>
                        <Edit id="edt_PacsNm" taborder="44" left="416" top="160" width="206" height="24" onchanged="div_MasterInput_tab_Master_tpg_01_edt_PacsCd_onchanged" autoselect="true" enable="true" readonly="true" maxlength="100" visible="false"/>
                        <Combo id="cbo_PabaCd" taborder="45" left="645" top="180" height="24" width="130" codecolumn="CODM_CD" datacolumn="CODM_NM" displayrowcount="15" innerdataset="ds_Fa005" tabstop="true" visible="false"/>
                        <Static id="sta_PabaCd" taborder="46" text="지급은행" top="177" width="100" height="30" cssclass="sta_WF_DLabel" left="542" visible="false"/>
                        <Combo id="cbo_PaacNo" taborder="47" left="575" top="120" height="24" codecolumn="ACNM_NO" datacolumn="ACNM_FULL" displayrowcount="15" innerdataset="ds_SdCbabFull" tabstop="true" text="" onitemchanged="div_MasterInput_tab_Master_tpg_01_cbo_PaacNo_onitemchanged" enable="true" readonly="true" right="3" minwidth="407" maxwidth="" visible="false"/>
                        <CheckBox id="chk_TranYn" taborder="48" left="794" top="210" height="24" text="" falsevalue="0" truevalue="1" value="1" tabstop="false" enable="false" visible="false" right="19"/>
                        <Static id="sta_TranYn" taborder="49" text="이관여부" top="207" width="100" height="30" cssclass="sta_WF_DLabel" left="691" DomainID="S00002" visible="false"/>
                      </Layout>
                    </Layouts>
                  </Tabpage>
                </Tabpages>
              </Tab>
              <Button id="btn_WfView" taborder="1" text="증빙보기" top="1" width="70" height="24" right="0" cssclass="bt_WF_InputArea_Blue" enable="false" onclick="div_MasterInput_btn_WfView_onclick" cursor="pointer"/>
            </Layout>
          </Layouts>
        </Div>
        <Button id="btn_DivMoveMi" taborder="4" top="78" height="10" width="40" visible="true" onclick="btn_DivMoveMi_onclick" cssclass="bt_TF_FoldA" left="700" cursor="pointer"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_Input">
        <ColumnInfo>
          <Column id="FROM_DD" type="STRING" size="256" description="조회시작일자"/>
          <Column id="CLOS_DD" type="STRING" size="256" description="조회종료일자"/>
          <Column id="CNTH_NO" type="STRING" size="256" description="계약번호"/>
          <Column id="CUSM_CD" type="STRING" size="256" description="거래처코드"/>
          <Column id="WOFH_SQ" type="STRING" size="256"/>
          <Column id="DEPM_CD" type="STRING" size="256" description="부서코드(조직코드)"/>
          <Column id="SESU_ID" type="STRING" size="256" description="시스템사용자ID"/>
          <Column id="ACUM_CD" type="STRING" size="256"/>
          <Column id="ACCH_NO" type="STRING" size="256"/>
          <Column id="ACCH_NM" type="STRING" size="256"/>
          <Column id="WOFH_YN" type="STRING" size="256"/>
          <Column id="PRGM_ID" type="STRING" size="256"/>
          <Column id="ACOM_CD" type="STRING" size="256"/>
          <Column id="crudType" type="STRING" size="256"/>
          <Column id="BUGS_YM" type="STRING" size="256"/>
          <Column id="SLIP_ID" type="STRING" size="256"/>
          <Column id="PJTH_NO" type="STRING" size="256"/>
          <Column id="PJTB_SE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Master10" onrowposchanged="ds_Master10_onrowposchanged" canrowposchange="ds_Master10_canrowposchange" oncolumnchanged="ds_Master10_oncolumnchanged">
        <ColumnInfo>
          <Column id="COMM_CD" type="STRING" size="256"/>
          <Column id="ACCH_NO" type="STRING" size="256"/>
          <Column id="WOFH_SQ" type="STRING" size="256"/>
          <Column id="WOFH_YN" type="STRING" size="256"/>
          <Column id="WOFH_YN_NM" type="STRING" size="256"/>
          <Column id="ACCH_DD" type="STRING" size="256"/>
          <Column id="DEPM_CD" type="STRING" size="256"/>
          <Column id="DEPM_NM" type="STRING" size="256"/>
          <Column id="EMPM_CD" type="STRING" size="256"/>
          <Column id="EMPM_NM" type="STRING" size="256"/>
          <Column id="SYST_ID" type="STRING" size="256"/>
          <Column id="ACUM_CD" type="STRING" size="256"/>
          <Column id="ACUM_NM" type="STRING" size="256"/>
          <Column id="ACCH_GU" type="STRING" size="256"/>
          <Column id="ACCH_GU_NM" type="STRING" size="256"/>
          <Column id="ACTY_CD" type="STRING" size="256"/>
          <Column id="ACTY_NM" type="STRING" size="256"/>
          <Column id="ACCH_NM" type="STRING" size="256"/>
          <Column id="ACRE_NM" type="STRING" size="256"/>
          <Column id="ACCH_AM" type="STRING" size="256"/>
          <Column id="PARE_DD" type="STRING" size="256"/>
          <Column id="PACS_GU" type="STRING" size="256"/>
          <Column id="PACS_GU_NM" type="STRING" size="256"/>
          <Column id="PACS_CD" type="STRING" size="256"/>
          <Column id="PACS_NM" type="STRING" size="256"/>
          <Column id="PABA_CD" type="STRING" size="256"/>
          <Column id="PABA_NM" type="STRING" size="256"/>
          <Column id="PAAC_NO" type="STRING" size="256"/>
          <Column id="IPARE_DD" type="STRING" size="256"/>
          <Column id="IPACS_GU" type="STRING" size="256"/>
          <Column id="IPACS_CD" type="STRING" size="256"/>
          <Column id="IPACS_NM" type="STRING" size="256"/>
          <Column id="IPABA_CD" type="STRING" size="256"/>
          <Column id="IPABA_NM" type="STRING" size="256"/>
          <Column id="IPAAC_NO" type="STRING" size="256"/>
          <Column id="SLIP_YN" type="STRING" size="256"/>
          <Column id="SLIP_NO" type="STRING" size="256"/>
          <Column id="SLIP_DD" type="STRING" size="256"/>
          <Column id="SLIP_EMP_NO" type="STRING" size="256"/>
          <Column id="SLIP_EMP_NM" type="STRING" size="256"/>
          <Column id="SLIP_ID" type="STRING" size="256"/>
          <Column id="SLIP_NM" type="STRING" size="256"/>
          <Column id="SLIP_DEPMCD" type="STRING" size="256"/>
          <Column id="SLIP_DEPMNM" type="STRING" size="256"/>
          <Column id="TRAN_YN" type="STRING" size="256"/>
          <Column id="DELE_YN" type="STRING" size="256"/>
          <Column id="WOFH_NO" type="STRING" size="256"/>
          <Column id="WOFH_ST" type="STRING" size="256"/>
          <Column id="WOFH_ST_NM" type="STRING" size="256"/>
          <Column id="REMK_NM" type="STRING" size="256"/>
          <Column id="EXPT_YN" type="STRING" size="256"/>
          <Column id="EXPT_RE" type="STRING" size="256"/>
          <Column id="REGI_ID" type="STRING" size="256"/>
          <Column id="REGI_NM" type="STRING" size="256"/>
          <Column id="REGI_DT" type="STRING" size="256"/>
          <Column id="MODI_ID" type="STRING" size="256"/>
          <Column id="MODI_NM" type="STRING" size="256"/>
          <Column id="MODI_DT" type="STRING" size="256"/>
          <Column id="DELE_ID" type="STRING" size="256"/>
          <Column id="DELE_NM" type="STRING" size="256"/>
          <Column id="DELE_DT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Detail10" oncolumnchanged="ds_Detail10_oncolumnchanged" onrowposchanged="ds_Detail10_onrowposchanged" cancolumnchange="ds_Detail10_cancolumnchange" onvaluechanged="ds_Detail10_onvaluechanged" canrowposchange="ds_Detail10_canrowposchange">
        <ColumnInfo>
          <Column id="COMM_CD" type="STRING" size="256"/>
          <Column id="ACCH_NO" type="STRING" size="256"/>
          <Column id="WOFH_SQ" type="STRING" size="256"/>
          <Column id="ACCB_SE" type="STRING" size="256"/>
          <Column id="ACUM_CD" type="STRING" size="256"/>
          <Column id="DECR_GU" type="STRING" size="256"/>
          <Column id="ACOM_CD" type="STRING" size="256"/>
          <Column id="ACOM_NM" type="STRING" size="256"/>
          <Column id="PALM_CD" type="STRING" size="256"/>
          <Column id="PALM_NM" type="STRING" size="256"/>
          <Column id="CRED_AM" type="BIGDECIMAL" size="256"/>
          <Column id="DEBI_AM" type="BIGDECIMAL" size="256"/>
          <Column id="REMK_NM" type="STRING" size="256"/>
          <Column id="MANA_CD" type="STRING" size="256"/>
          <Column id="MANA_NM" type="STRING" size="256"/>
          <Column id="DETA_CD" type="STRING" size="256"/>
          <Column id="DETA_NM" type="STRING" size="256"/>
          <Column id="MA01_CD" type="STRING" size="256"/>
          <Column id="MA02_CD" type="STRING" size="256"/>
          <Column id="MA03_CD" type="STRING" size="256"/>
          <Column id="MA04_CD" type="STRING" size="256"/>
          <Column id="MA05_CD" type="STRING" size="256"/>
          <Column id="MA06_CD" type="STRING" size="256"/>
          <Column id="MA07_CD" type="STRING" size="256"/>
          <Column id="MA08_CD" type="STRING" size="256"/>
          <Column id="MA01_NM" type="STRING" size="256"/>
          <Column id="MA02_NM" type="STRING" size="256"/>
          <Column id="MA03_NM" type="STRING" size="256"/>
          <Column id="MA04_NM" type="STRING" size="256"/>
          <Column id="MA05_NM" type="STRING" size="256"/>
          <Column id="MA06_NM" type="STRING" size="256"/>
          <Column id="MA07_NM" type="STRING" size="256"/>
          <Column id="MA08_NM" type="STRING" size="256"/>
          <Column id="DE01_CD" type="STRING" size="256"/>
          <Column id="DE02_CD" type="STRING" size="256"/>
          <Column id="DE03_CD" type="STRING" size="256"/>
          <Column id="DE04_CD" type="STRING" size="256"/>
          <Column id="DE05_CD" type="STRING" size="256"/>
          <Column id="DE06_CD" type="STRING" size="256"/>
          <Column id="DE07_CD" type="STRING" size="256"/>
          <Column id="DE08_CD" type="STRING" size="256"/>
          <Column id="VDE01_CD" type="STRING" size="256"/>
          <Column id="VDE02_CD" type="STRING" size="256"/>
          <Column id="VDE03_CD" type="STRING" size="256"/>
          <Column id="VDE04_CD" type="STRING" size="256"/>
          <Column id="VDE05_CD" type="STRING" size="256"/>
          <Column id="VDE06_CD" type="STRING" size="256"/>
          <Column id="VDE07_CD" type="STRING" size="256"/>
          <Column id="VDE08_CD" type="STRING" size="256"/>
          <Column id="DE01_NM" type="STRING" size="256"/>
          <Column id="DE02_NM" type="STRING" size="256"/>
          <Column id="DE03_NM" type="STRING" size="256"/>
          <Column id="DE04_NM" type="STRING" size="256"/>
          <Column id="DE05_NM" type="STRING" size="256"/>
          <Column id="DE06_NM" type="STRING" size="256"/>
          <Column id="DE07_NM" type="STRING" size="256"/>
          <Column id="DE08_NM" type="STRING" size="256"/>
          <Column id="MA01_YN" type="STRING" size="256"/>
          <Column id="MA02_YN" type="STRING" size="256"/>
          <Column id="MA03_YN" type="STRING" size="256"/>
          <Column id="MA04_YN" type="STRING" size="256"/>
          <Column id="MA05_YN" type="STRING" size="256"/>
          <Column id="MA06_YN" type="STRING" size="256"/>
          <Column id="MA07_YN" type="STRING" size="256"/>
          <Column id="MA08_YN" type="STRING" size="256"/>
          <Column id="SLIP_YN" type="STRING" size="256"/>
          <Column id="SLIP_NO" type="STRING" size="256"/>
          <Column id="SLIP_DD" type="STRING" size="256"/>
          <Column id="SORT_NO" type="STRING" size="256"/>
          <Column id="BUDG_MM" type="STRING" size="256"/>
          <Column id="BUDP_CD" type="STRING" size="256"/>
          <Column id="BUDP_NM" type="STRING" size="256"/>
          <Column id="ACDE_CD" type="STRING" size="256"/>
          <Column id="ACDE_NM" type="STRING" size="256"/>
          <Column id="REFE_NO" type="STRING" size="256"/>
          <Column id="CURR_CD" type="STRING" size="256"/>
          <Column id="EXCH_RT" type="STRING" size="256"/>
          <Column id="FRDB_AM" type="BIGDECIMAL" size="256"/>
          <Column id="FRCR_AM" type="BIGDECIMAL" size="256"/>
          <Column id="ANTI_NO" type="STRING" size="256"/>
          <Column id="ANTI_SE" type="STRING" size="256"/>
          <Column id="JBGU_CD" type="STRING" size="256"/>
          <Column id="JBAC_NO" type="STRING" size="256"/>
          <Column id="DELE_YN" type="STRING" size="256"/>
          <Column id="EXPT_YN" type="STRING" size="256"/>
          <Column id="EXPT_RE" type="STRING" size="256"/>
          <Column id="REGI_ID" type="STRING" size="256"/>
          <Column id="REGI_NM" type="STRING" size="256"/>
          <Column id="REGI_DT" type="STRING" size="256"/>
          <Column id="MODI_ID" type="STRING" size="256"/>
          <Column id="MODI_NM" type="STRING" size="256"/>
          <Column id="MODI_DT" type="STRING" size="256"/>
          <Column id="DELE_ID" type="STRING" size="256"/>
          <Column id="DELE_NM" type="STRING" size="256"/>
          <Column id="DELE_DT" type="STRING" size="256"/>
          <Column id="TADE_YN" type="STRING" size="256"/>
          <Column id="s_chk" type="STRING" size="256"/>
          <Column id="crudType" type="STRING" size="256"/>
          <Column id="BGCM_YN" type="STRING" size="256"/>
          <Column id="BUGS_YN" type="STRING" size="256"/>
          <Column id="BGCM_AM" type="STRING" size="256"/>
          <Column id="DECR_GU_CHK" type="STRING" size="256"/>
          <Column id="CTRL_CD" type="STRING" size="256"/>
          <Column id="CONF_YN" type="STRING" size="256"/>
          <Column id="ACOM_ENABLE" type="STRING" size="256"/>
          <Column id="ANTI_AM" type="BIGDECIMAL" size="256"/>
          <Column id="ANTI_YN" type="STRING" size="256"/>
          <Column id="CRED_YN" type="STRING" size="256"/>
          <Column id="NUMB_SE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Fa112">
        <ColumnInfo>
          <Column id="COMM_CD" type="STRING" size="256"/>
          <Column id="GRCM_CD" type="STRING" size="256"/>
          <Column id="CODM_CD" type="STRING" size="256"/>
          <Column id="CODM_NM" type="STRING" size="256"/>
          <Column id="OP01_NM" type="STRING" size="256"/>
          <Column id="OP02_NM" type="STRING" size="256"/>
          <Column id="OP03_NM" type="STRING" size="256"/>
          <Column id="OP04_NM" type="STRING" size="256"/>
          <Column id="OP05_NM" type="STRING" size="256"/>
          <Column id="OP06_NM" type="STRING" size="256"/>
          <Column id="OP07_NM" type="STRING" size="256"/>
          <Column id="OP08_NM" type="STRING" size="256"/>
          <Column id="OP09_NM" type="STRING" size="256"/>
          <Column id="OP10_NM" type="STRING" size="256"/>
          <Column id="SORT_NO" type="STRING" size="256"/>
          <Column id="USED_YN" type="STRING" size="256"/>
          <Column id="REMK_NM" type="STRING" size="256"/>
          <Column id="EXPT_YN" type="STRING" size="256"/>
          <Column id="EXPT_RE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Fa110">
        <ColumnInfo>
          <Column id="COMM_CD" type="STRING" size="256"/>
          <Column id="GRCM_CD" type="STRING" size="256"/>
          <Column id="CODM_CD" type="STRING" size="256"/>
          <Column id="CODM_NM" type="STRING" size="256"/>
          <Column id="OP01_NM" type="STRING" size="256"/>
          <Column id="OP02_NM" type="STRING" size="256"/>
          <Column id="OP03_NM" type="STRING" size="256"/>
          <Column id="OP04_NM" type="STRING" size="256"/>
          <Column id="OP05_NM" type="STRING" size="256"/>
          <Column id="OP06_NM" type="STRING" size="256"/>
          <Column id="OP07_NM" type="STRING" size="256"/>
          <Column id="OP08_NM" type="STRING" size="256"/>
          <Column id="OP09_NM" type="STRING" size="256"/>
          <Column id="OP10_NM" type="STRING" size="256"/>
          <Column id="SORT_NO" type="STRING" size="256"/>
          <Column id="USED_YN" type="STRING" size="256"/>
          <Column id="REMK_NM" type="STRING" size="256"/>
          <Column id="EXPT_YN" type="STRING" size="256"/>
          <Column id="EXPT_RE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Fa114">
        <ColumnInfo>
          <Column id="COMM_CD" type="STRING" size="256"/>
          <Column id="GRCM_CD" type="STRING" size="256"/>
          <Column id="CODM_CD" type="STRING" size="256"/>
          <Column id="CODM_NM" type="STRING" size="256"/>
          <Column id="OP01_NM" type="STRING" size="256"/>
          <Column id="OP02_NM" type="STRING" size="256"/>
          <Column id="OP03_NM" type="STRING" size="256"/>
          <Column id="OP04_NM" type="STRING" size="256"/>
          <Column id="OP05_NM" type="STRING" size="256"/>
          <Column id="OP06_NM" type="STRING" size="256"/>
          <Column id="OP07_NM" type="STRING" size="256"/>
          <Column id="OP08_NM" type="STRING" size="256"/>
          <Column id="OP09_NM" type="STRING" size="256"/>
          <Column id="OP10_NM" type="STRING" size="256"/>
          <Column id="SORT_NO" type="STRING" size="256"/>
          <Column id="USED_YN" type="STRING" size="256"/>
          <Column id="REMK_NM" type="STRING" size="256"/>
          <Column id="EXPT_YN" type="STRING" size="256"/>
          <Column id="EXPT_RE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="COMM_CD">PacsGu</Col>
            <Col id="CODM_CD"/>
            <Col id="CODM_NM"/>
          </Row>
          <Row>
            <Col id="COMM_CD">PacsGu</Col>
            <Col id="CODM_CD">01</Col>
            <Col id="CODM_NM">사번</Col>
          </Row>
          <Row>
            <Col id="COMM_CD">PacsGu</Col>
            <Col id="CODM_NM">거래처</Col>
            <Col id="CODM_CD">02</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_Fa040">
        <ColumnInfo>
          <Column id="COMM_CD" type="STRING" size="256"/>
          <Column id="GRCM_CD" type="STRING" size="256"/>
          <Column id="CODM_CD" type="STRING" size="256"/>
          <Column id="CODM_NM" type="STRING" size="256"/>
          <Column id="OP01_NM" type="STRING" size="256"/>
          <Column id="OP02_NM" type="STRING" size="256"/>
          <Column id="OP03_NM" type="STRING" size="256"/>
          <Column id="OP04_NM" type="STRING" size="256"/>
          <Column id="OP05_NM" type="STRING" size="256"/>
          <Column id="OP06_NM" type="STRING" size="256"/>
          <Column id="OP07_NM" type="STRING" size="256"/>
          <Column id="OP08_NM" type="STRING" size="256"/>
          <Column id="OP09_NM" type="STRING" size="256"/>
          <Column id="OP10_NM" type="STRING" size="256"/>
          <Column id="SORT_NO" type="STRING" size="256"/>
          <Column id="USED_YN" type="STRING" size="256"/>
          <Column id="REMK_NM" type="STRING" size="256"/>
          <Column id="EXPT_YN" type="STRING" size="256"/>
          <Column id="EXPT_RE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Sm020">
        <ColumnInfo>
          <Column id="CODM_CD" type="STRING" size="256"/>
          <Column id="CODM_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_AcomMa">
        <ColumnInfo>
          <Column id="COMM_CD" type="STRING" size="256"/>
          <Column id="ACOM_CD" type="STRING" size="256"/>
          <Column id="ACOM_NM" type="STRING" size="256"/>
          <Column id="DECR_GU" type="STRING" size="256"/>
          <Column id="ACOM_GU" type="STRING" size="256"/>
          <Column id="MA_CD" type="STRING" size="256"/>
          <Column id="MA_NM" type="STRING" size="256"/>
          <Column id="MA_YN" type="STRING" size="256"/>
          <Column id="TYPE_CD" type="STRING" size="256"/>
          <Column id="TYPE_NM" type="STRING" size="256"/>
          <Column id="LENG_CT" type="STRING" size="256"/>
          <Column id="ITEM_GU" type="STRING" size="256"/>
          <Column id="ITEM_GU_NM" type="STRING" size="256"/>
          <Column id="DETA_CD" type="STRING" size="256"/>
          <Column id="MA_NUM" type="STRING" size="256"/>
          <Column id="CODM_CD" type="STRING" size="256"/>
          <Column id="CD01_NM" type="STRING" size="256"/>
          <Column id="CD02_NM" type="STRING" size="256"/>
          <Column id="FUNC_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_FaBanm">
        <ColumnInfo>
          <Column id="COMM_CD" type="STRING" size="256"/>
          <Column id="BANM_CD" type="STRING" size="256"/>
          <Column id="BANM_NM" type="STRING" size="256"/>
          <Column id="BANM_GU" type="STRING" size="256"/>
          <Column id="BANS_NM" type="STRING" size="256"/>
          <Column id="SAUM_NO" type="STRING" size="256"/>
          <Column id="OTEL_NO" type="STRING" size="256"/>
          <Column id="POST_NO" type="STRING" size="256"/>
          <Column id="ADDR_NM" type="STRING" size="256"/>
          <Column id="SORT_NO" type="STRING" size="256"/>
          <Column id="USED_YN" type="STRING" size="256"/>
          <Column id="REMK_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_CmMaInfo" oncolumnchanged="ds_CmMaInfo_oncolumnchanged">
        <ColumnInfo>
          <Column id="ITEM_GU" type="STRING" size="256"/>
          <Column id="COMP_CD" type="STRING" size="256"/>
          <Column id="COMP_NM" type="STRING" size="256"/>
          <Column id="DE01_CD" type="STRING" size="256"/>
          <Column id="DE01_NM" type="STRING" size="256"/>
          <Column id="VDE01_CD" type="STRING" size="256"/>
          <Column id="VDE01_NM" type="STRING" size="256"/>
          <Column id="DE02_CD" type="STRING" size="256"/>
          <Column id="DE02_NM" type="STRING" size="256"/>
          <Column id="VDE02_CD" type="STRING" size="256"/>
          <Column id="VDE02_NM" type="STRING" size="256"/>
          <Column id="DE03_CD" type="STRING" size="256"/>
          <Column id="DE03_NM" type="STRING" size="256"/>
          <Column id="VDE03_CD" type="STRING" size="256"/>
          <Column id="VDE03_NM" type="STRING" size="256"/>
          <Column id="DE04_CD" type="STRING" size="256"/>
          <Column id="DE04_NM" type="STRING" size="256"/>
          <Column id="VDE04_CD" type="STRING" size="256"/>
          <Column id="VDE04_NM" type="STRING" size="256"/>
          <Column id="DE05_CD" type="STRING" size="256"/>
          <Column id="DE05_NM" type="STRING" size="256"/>
          <Column id="VDE05_CD" type="STRING" size="256"/>
          <Column id="VDE05_NM" type="STRING" size="256"/>
          <Column id="DE06_CD" type="STRING" size="256"/>
          <Column id="DE06_NM" type="STRING" size="256"/>
          <Column id="VDE06_CD" type="STRING" size="256"/>
          <Column id="VDE06_NM" type="STRING" size="256"/>
          <Column id="DE07_CD" type="STRING" size="256"/>
          <Column id="DE07_NM" type="STRING" size="256"/>
          <Column id="VDE07_CD" type="STRING" size="256"/>
          <Column id="VDE07_NM" type="STRING" size="256"/>
          <Column id="DE08_CD" type="STRING" size="256"/>
          <Column id="DE08_NM" type="STRING" size="256"/>
          <Column id="VDE08_CD" type="STRING" size="256"/>
          <Column id="VDE08_NM" type="STRING" size="256"/>
          <Column id="DETA_CD" type="STRING" size="256"/>
          <Column id="DETA_NM" type="STRING" size="256"/>
          <Column id="VDETA_CD" type="STRING" size="256"/>
          <Column id="VDETA_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Detail11">
        <ColumnInfo>
          <Column id="COMM_CD" type="STRING" size="256"/>
          <Column id="BUGS_YM" type="STRING" size="256"/>
          <Column id="DEPM_CD" type="STRING" size="256"/>
          <Column id="ACOM_CD" type="STRING" size="256"/>
          <Column id="BGMM_AM" type="STRING" size="256"/>
          <Column id="BGAD_AM" type="STRING" size="256"/>
          <Column id="BGCH_AM" type="STRING" size="256"/>
          <Column id="BGSU_AM" type="STRING" size="256"/>
          <Column id="BGAC_AM" type="STRING" size="256"/>
          <Column id="BGSL_AM" type="STRING" size="256"/>
          <Column id="REAC_AM" type="STRING" size="256"/>
          <Column id="RESL_AM" type="STRING" size="256"/>
          <Column id="USED_AM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Detail12">
        <ColumnInfo>
          <Column id="COMM_CD" type="STRING" size="256"/>
          <Column id="BUGS_YM" type="STRING" size="256"/>
          <Column id="DEPM_CD" type="STRING" size="256"/>
          <Column id="ACOM_CD" type="STRING" size="256"/>
          <Column id="ACOM_NM" type="STRING" size="256"/>
          <Column id="USED_AM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Detail13">
        <ColumnInfo>
          <Column id="COMM_CD" type="STRING" size="256"/>
          <Column id="BUGS_YM" type="STRING" size="256"/>
          <Column id="DEPM_CD" type="STRING" size="256"/>
          <Column id="ACOM_CD" type="STRING" size="256"/>
          <Column id="BGAC_AM" type="STRING" size="256"/>
          <Column id="crudType" type="STRING" size="256"/>
          <Column id="NUMB_SE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Wf110">
        <ColumnInfo>
          <Column id="CODM_CD" type="STRING" size="256"/>
          <Column id="CODM_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Master10Wf">
        <ColumnInfo>
          <Column id="PRGM_ID" type="STRING" size="256"/>
          <Column id="TABL_NM" type="STRING" size="256"/>
          <Column id="FILH_GU" type="STRING" size="256"/>
          <Column id="PK01_NO" type="STRING" size="256"/>
          <Column id="PK02_NO" type="STRING" size="256"/>
          <Column id="PK03_NO" type="STRING" size="256"/>
          <Column id="PK04_NO" type="STRING" size="256"/>
          <Column id="PK05_NO" type="STRING" size="256"/>
          <Column id="PK06_NO" type="STRING" size="256"/>
          <Column id="PK07_NO" type="STRING" size="256"/>
          <Column id="PK08_NO" type="STRING" size="256"/>
          <Column id="PK09_NO" type="STRING" size="256"/>
          <Column id="PK10_NO" type="STRING" size="256"/>
          <Column id="WOFH_SQ_NO" type="STRING" size="256"/>
          <Column id="FILE_YN" type="STRING" size="256"/>
          <Column id="ACCH_YN" type="STRING" size="256"/>
          <Column id="SKPC_NM" type="STRING" size="256"/>
          <Column id="COMM_CD" type="STRING" size="256"/>
          <Column id="WOFH_NO" type="STRING" size="256"/>
          <Column id="WOFH_ST" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Fa005">
        <ColumnInfo>
          <Column id="COMM_CD" type="STRING" size="256"/>
          <Column id="GRCM_CD" type="STRING" size="256"/>
          <Column id="CODM_CD" type="STRING" size="256"/>
          <Column id="CODM_NM" type="STRING" size="256"/>
          <Column id="OP01_NM" type="STRING" size="256"/>
          <Column id="OP02_NM" type="STRING" size="256"/>
          <Column id="OP03_NM" type="STRING" size="256"/>
          <Column id="OP04_NM" type="STRING" size="256"/>
          <Column id="OP05_NM" type="STRING" size="256"/>
          <Column id="OP06_NM" type="STRING" size="256"/>
          <Column id="OP07_NM" type="STRING" size="256"/>
          <Column id="OP08_NM" type="STRING" size="256"/>
          <Column id="OP09_NM" type="STRING" size="256"/>
          <Column id="OP10_NM" type="STRING" size="256"/>
          <Column id="SORT_NO" type="STRING" size="256"/>
          <Column id="USED_YN" type="STRING" size="256"/>
          <Column id="REMK_NM" type="STRING" size="256"/>
          <Column id="EXPT_YN" type="STRING" size="256"/>
          <Column id="EXPT_RE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="COMM_CD">PacsGu</Col>
            <Col id="CODM_CD"/>
            <Col id="CODM_NM"/>
          </Row>
          <Row>
            <Col id="COMM_CD">PacsGu</Col>
            <Col id="CODM_CD">01</Col>
            <Col id="CODM_NM">사번</Col>
          </Row>
          <Row>
            <Col id="COMM_CD">PacsGu</Col>
            <Col id="CODM_NM">거래처</Col>
            <Col id="CODM_CD">02</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_Item">
        <ColumnInfo>
          <Column id="COMM_CD" type="STRING" size="256"/>
          <Column id="ITEM_CD" type="STRING" size="256"/>
          <Column id="ITEM_NM" type="STRING" size="256"/>
          <Column id="TYPE_CD" type="STRING" size="256"/>
          <Column id="LENG_CT" type="STRING" size="256"/>
          <Column id="ITEM_GU" type="STRING" size="256"/>
          <Column id="DETA_CD" type="STRING" size="256"/>
          <Column id="CODM_CD" type="STRING" size="256"/>
          <Column id="FUNC_NM" type="STRING" size="256"/>
          <Column id="CD01_NM" type="STRING" size="256"/>
          <Column id="CD02_NM" type="STRING" size="256"/>
          <Column id="BALA_YN" type="STRING" size="256"/>
          <Column id="PREP_CD" type="STRING" size="256"/>
          <Column id="SORT_NO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_SdCbabFull">
        <ColumnInfo>
          <Column id="COMM_CD" type="STRING" size="256"/>
          <Column id="CUSM_CD" type="STRING" size="256"/>
          <Column id="WOFH_SQ" type="STRING" size="256"/>
          <Column id="CBAB_SE" type="STRING" size="256"/>
          <Column id="ACNO_GU" type="STRING" size="256"/>
          <Column id="BANM_CD" type="STRING" size="256"/>
          <Column id="ACNM_NO" type="STRING" size="256"/>
          <Column id="ACNM_CD" type="STRING" size="256"/>
          <Column id="ACNM_FULL" type="STRING" size="256"/>
          <Column id="ACEM_NM" type="STRING" size="256"/>
          <Column id="CBAB_YN" type="STRING" size="256"/>
          <Column id="USED_YN" type="STRING" size="256"/>
          <Column id="CHAN_NM" type="STRING" size="256"/>
          <Column id="REMK_NM" type="STRING" size="256"/>
          <Column id="ACNO_NM" type="STRING" size="256"/>
          <Column id="BANM_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_EmPalm">
        <ColumnInfo>
          <Column id="COMM_CD" type="STRING" size="256"/>
          <Column id="SYST_ID" type="STRING" size="256"/>
          <Column id="EMPM_CD" type="STRING" size="256"/>
          <Column id="EMPM_NM" type="STRING" size="256"/>
          <Column id="PALM_CD" type="STRING" size="256"/>
          <Column id="PALM_NM" type="STRING" size="256"/>
          <Column id="DEPM_CD" type="STRING" size="256"/>
          <Column id="DEPM_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ComWfLine">
        <ColumnInfo>
          <Column id="POSI_NM1" type="STRING" size="256"/>
          <Column id="APPR_NM1" type="STRING" size="256"/>
          <Column id="SIGN_UL1" type="STRING" size="256"/>
          <Column id="APPR_TM1" type="STRING" size="256"/>
          <Column id="POSI_NM2" type="STRING" size="256"/>
          <Column id="APPR_NM2" type="STRING" size="256"/>
          <Column id="SIGN_UL2" type="STRING" size="256"/>
          <Column id="APPR_TM2" type="STRING" size="256"/>
          <Column id="POSI_NM3" type="STRING" size="256"/>
          <Column id="APPR_NM3" type="STRING" size="256"/>
          <Column id="SIGN_UL3" type="STRING" size="256"/>
          <Column id="APPR_TM3" type="STRING" size="256"/>
          <Column id="POSI_NM4" type="STRING" size="256"/>
          <Column id="APPR_NM4" type="STRING" size="256"/>
          <Column id="SIGN_UL4" type="STRING" size="256"/>
          <Column id="APPR_TM4" type="STRING" size="256"/>
          <Column id="POSI_NM5" type="STRING" size="256"/>
          <Column id="APPR_NM5" type="STRING" size="256"/>
          <Column id="SIGN_UL5" type="STRING" size="256"/>
          <Column id="APPR_TM5" type="STRING" size="256"/>
          <Column id="POSI_NM6" type="STRING" size="256"/>
          <Column id="APPR_NM6" type="STRING" size="256"/>
          <Column id="SIGN_UL6" type="STRING" size="256"/>
          <Column id="APPR_TM6" type="STRING" size="256"/>
          <Column id="POSI_NM7" type="STRING" size="256"/>
          <Column id="APPR_NM7" type="STRING" size="256"/>
          <Column id="SIGN_UL7" type="STRING" size="256"/>
          <Column id="APPR_TM7" type="STRING" size="256"/>
          <Column id="POSI_NM8" type="STRING" size="256"/>
          <Column id="APPR_NM8" type="STRING" size="256"/>
          <Column id="SIGN_UL8" type="STRING" size="256"/>
          <Column id="APPR_TM8" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Master10Rt">
        <ColumnInfo>
          <Column id="COMM_CD" type="STRING" size="256"/>
          <Column id="ACCH_NO" type="STRING" size="256"/>
          <Column id="WOFH_SQ" type="STRING" size="256"/>
          <Column id="WOFH_YN" type="STRING" size="256"/>
          <Column id="WOFH_YN_NM" type="STRING" size="256"/>
          <Column id="ACCH_DD" type="STRING" size="256"/>
          <Column id="DEPM_CD" type="STRING" size="256"/>
          <Column id="DEPM_NM" type="STRING" size="256"/>
          <Column id="EMPM_CD" type="STRING" size="256"/>
          <Column id="EMPM_NM" type="STRING" size="256"/>
          <Column id="SYST_ID" type="STRING" size="256"/>
          <Column id="ACUM_CD" type="STRING" size="256"/>
          <Column id="ACUM_NM" type="STRING" size="256"/>
          <Column id="ACCH_GU" type="STRING" size="256"/>
          <Column id="ACCH_GU_NM" type="STRING" size="256"/>
          <Column id="ACTY_CD" type="STRING" size="256"/>
          <Column id="ACTY_NM" type="STRING" size="256"/>
          <Column id="ACCH_NM" type="STRING" size="256"/>
          <Column id="ACRE_NM" type="STRING" size="256"/>
          <Column id="ACCH_AM" type="STRING" size="256"/>
          <Column id="PARE_DD" type="STRING" size="256"/>
          <Column id="PACS_GU" type="STRING" size="256"/>
          <Column id="PACS_CD" type="STRING" size="256"/>
          <Column id="PACS_NM" type="STRING" size="256"/>
          <Column id="PABA_CD" type="STRING" size="256"/>
          <Column id="PABA_NM" type="STRING" size="256"/>
          <Column id="PAAC_NO" type="STRING" size="256"/>
          <Column id="IPARE_DD" type="STRING" size="256"/>
          <Column id="IPACS_GU" type="STRING" size="256"/>
          <Column id="IPACS_CD" type="STRING" size="256"/>
          <Column id="IPACS_NM" type="STRING" size="256"/>
          <Column id="IPABA_CD" type="STRING" size="256"/>
          <Column id="IPABA_NM" type="STRING" size="256"/>
          <Column id="IPAAC_NO" type="STRING" size="256"/>
          <Column id="SLIP_YN" type="STRING" size="256"/>
          <Column id="SLIP_NO" type="STRING" size="256"/>
          <Column id="SLIP_DD" type="STRING" size="256"/>
          <Column id="SLIP_EMP_NO" type="STRING" size="256"/>
          <Column id="SLIP_EMP_NM" type="STRING" size="256"/>
          <Column id="SLIP_ID" type="STRING" size="256"/>
          <Column id="SLIP_NM" type="STRING" size="256"/>
          <Column id="SLIP_DEPMCD" type="STRING" size="256"/>
          <Column id="SLIP_DEPMNM" type="STRING" size="256"/>
          <Column id="TRAN_YN" type="STRING" size="256"/>
          <Column id="DELE_YN" type="STRING" size="256"/>
          <Column id="WOFH_NO" type="STRING" size="256"/>
          <Column id="WOFH_ST" type="STRING" size="256"/>
          <Column id="WOFH_ST_NM" type="STRING" size="256"/>
          <Column id="REMK_NM" type="STRING" size="256"/>
          <Column id="EXPT_YN" type="STRING" size="256"/>
          <Column id="EXPT_RE" type="STRING" size="256"/>
          <Column id="REGI_ID" type="STRING" size="256"/>
          <Column id="REGI_NM" type="STRING" size="256"/>
          <Column id="REGI_DT" type="STRING" size="256"/>
          <Column id="MODI_ID" type="STRING" size="256"/>
          <Column id="MODI_NM" type="STRING" size="256"/>
          <Column id="MODI_DT" type="STRING" size="256"/>
          <Column id="DELE_ID" type="STRING" size="256"/>
          <Column id="DELE_NM" type="STRING" size="256"/>
          <Column id="DELE_DT" type="STRING" size="256"/>
          <Column id="PACS_GU_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ComWfDrLine">
        <ColumnInfo>
          <Column id="POSI_NM1" type="STRING" size="256"/>
          <Column id="APPR_NM1" type="STRING" size="256"/>
          <Column id="SIGN_UL1" type="STRING" size="256"/>
          <Column id="APPR_TM1" type="STRING" size="256"/>
          <Column id="POSI_NM2" type="STRING" size="256"/>
          <Column id="APPR_NM2" type="STRING" size="256"/>
          <Column id="SIGN_UL2" type="STRING" size="256"/>
          <Column id="APPR_TM2" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ComWfAtLine">
        <ColumnInfo>
          <Column id="POSI_NM1" type="STRING" size="256"/>
          <Column id="APPR_NM1" type="STRING" size="256"/>
          <Column id="SIGN_UL1" type="STRING" size="256"/>
          <Column id="APPR_TM1" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Fa100">
        <ColumnInfo>
          <Column id="COMM_CD" type="STRING" size="256"/>
          <Column id="GRCM_CD" type="STRING" size="256"/>
          <Column id="CODM_CD" type="STRING" size="256"/>
          <Column id="CODM_NM" type="STRING" size="256"/>
          <Column id="OP01_NM" type="STRING" size="256"/>
          <Column id="OP02_NM" type="STRING" size="256"/>
          <Column id="OP03_NM" type="STRING" size="256"/>
          <Column id="OP04_NM" type="STRING" size="256"/>
          <Column id="OP05_NM" type="STRING" size="256"/>
          <Column id="OP06_NM" type="STRING" size="256"/>
          <Column id="OP07_NM" type="STRING" size="256"/>
          <Column id="OP08_NM" type="STRING" size="256"/>
          <Column id="OP09_NM" type="STRING" size="256"/>
          <Column id="OP10_NM" type="STRING" size="256"/>
          <Column id="SORT_NO" type="STRING" size="256"/>
          <Column id="USED_YN" type="STRING" size="256"/>
          <Column id="REMK_NM" type="STRING" size="256"/>
          <Column id="EXPT_YN" type="STRING" size="256"/>
          <Column id="EXPT_RE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ItemList">
        <ColumnInfo>
          <Column id="COMM_CD" type="STRING" size="256"/>
          <Column id="ITEM_CD" type="STRING" size="256"/>
          <Column id="ITEM_NM" type="STRING" size="256"/>
          <Column id="TYPE_CD" type="STRING" size="256"/>
          <Column id="LENG_CT" type="STRING" size="256"/>
          <Column id="ITEM_GU" type="STRING" size="256"/>
          <Column id="DETA_CD" type="STRING" size="256"/>
          <Column id="CODM_CD" type="STRING" size="256"/>
          <Column id="FUNC_NM" type="STRING" size="256"/>
          <Column id="CD01_NM" type="STRING" size="256"/>
          <Column id="CD02_NM" type="STRING" size="256"/>
          <Column id="BALA_YN" type="STRING" size="256"/>
          <Column id="PREP_CD" type="STRING" size="256"/>
          <Column id="SORT_NO" type="STRING" size="256"/>
          <Column id="USED_YN" type="STRING" size="256"/>
          <Column id="REMK_NM" type="STRING" size="256"/>
          <Column id="REGI_ID" type="STRING" size="256"/>
          <Column id="REGI_NM" type="STRING" size="256"/>
          <Column id="REGI_DT" type="STRING" size="256"/>
          <Column id="MODI_ID" type="STRING" size="256"/>
          <Column id="MODI_NM" type="STRING" size="256"/>
          <Column id="MODI_DT" type="STRING" size="256"/>
          <Column id="DELE_ID" type="STRING" size="256"/>
          <Column id="DELE_NM" type="STRING" size="256"/>
          <Column id="DELE_DT" type="STRING" size="256"/>
          <Column id="COPY_YN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ComFileList">
        <ColumnInfo>
          <Column id="COMM_CD" type="STRING" size="256"/>
          <Column id="FILE_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Cusm">
        <ColumnInfo>
          <Column id="CUSM_CD" type="STRING" size="256" description="거래처코드"/>
          <Column id="CUSM_NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript5.1"><![CDATA[/**
*  @화면ID   : M_FA_1000
*  @화면설명 : 회계전표등록
*  @시스템명 : (FA) 재무회계
*  @작성자   : 이충근
*  @작성일   : 2021.05.25
*  @Desction    
******************* 소스 수정 이력 ************************************************************
*  일자          		수정자                비고
*************************************************************************************************
*  2021.05.25     	    이충근 	           최초 생성 
*  2022.02.22           임재원             마스터내역 우측 입력항목 사이즈 수정 
*  2022.04.19           이충근             전표상태가 저장 상태 이상인 경우만 복사처리
*  2022.09.14           조수빈             인쇄 출력물에 첨부파일 조회 추가
*************************************************************************************************
*/    
       
/***********************************************************************************************
 * 0. 폼로드
 ***********************************************************************************************/
/***********************************************************************************************
 * 00.01. Form Include 선언
 ***********************************************************************************************/
//include "comLib::CommonUtil.xjs";//공통함수
include "comLib::lib_splitter.xjs";

/***********************************************************************************************
 * 00.02. Form 변수 선언 
 ***********************************************************************************************/
this.fvComPrgmId = "";//[필수]프로그램ID-메인화면기준, 팝업일경우 해당 메인화면의 프로그램ID
this.fvFormComBtnAuthYn = false;//그리드 공통버튼 권한 유무
this.fvFileDiv = this.div_DetailInput.form.tab_Detail.tpg_03.form.div_CommFile.form;//[첨부파일]Div
this.fvPathNm = "FA";//[첨부파일]업무파일경로
this.fvDsRowPosChange = true;//데이터셋 Row 변경이벤트-실행유무
this.fvSchKeyYn = false;//저장후 재조회여부
this.fvSchKey01 = "";//조회Key01
this.fvSchKey02 = "";//조회Key02
this.fvSchKey03 = "";//조회Key03
this.fvWfSearchMode = false;//[결재]결재내역 조회모드
this.fvWfPopupMode = false;//[결재]결재내역 팝업화면으로 호출여부
this.fvComWofhNo = "";//[결재]결재PID
this.fvWofhStatus = false;//[결재]결재상태 조회모드 (등록=false, 그외 true)

var fvFileInfo = new Object();//[첨부파일]정보
//관리항목 팝업 콜백관련 변수
this.fvCmMaPopupId01 = "";//팝업호출ID-01
this.fvCmMaRtnColCd01 = "";//팝업리턴 코드변수-01
this.fvCmMaRtnVColCd01 = "";//팝업리턴 코드변수-01
this.fvCmMaRtnColNm01 = "";//팝업리턴 코드명변수-01
this.fvCmMaPopupId02 = "";//팝업호출ID-02
this.fvCmMaRtnColCd02 = "";//팝업리턴 코드변수-02
this.fvCmMaRtnVColCd02 = "";//팝업리턴 코드변수-02
this.fvCmMaRtnColNm02 = "";//팝업리턴 코드명변수-02
this.fvCmMaPopupId03 = "";//팝업호출ID-03
this.fvCmMaRtnColCd03 = "";//팝업리턴 코드변수-03
this.fvCmMaRtnVColCd03 = "";//팝업리턴 코드변수-03
this.fvCmMaRtnColNm03 = "";//팝업리턴 코드명변수-03
this.fvCmMaPopupId04 = "";//팝업호출ID-04
this.fvCmMaRtnColCd04 = "";//팝업리턴 코드변수-04
this.fvCmMaRtnVColCd04 = "";//팝업리턴 코드변수-04
this.fvCmMaRtnColNm04 = "";//팝업리턴 코드명변수-04
this.fvCmMaPopupId05 = "";//팝업호출ID-05
this.fvCmMaRtnColCd05 = "";//팝업리턴 코드변수-05
this.fvCmMaRtnVColCd05 = "";//팝업리턴 코드변수-05
this.fvCmMaRtnColNm05 = "";//팝업리턴 코드명변수-05
this.fvCmMaPopupId06 = "";//팝업호출ID-06
this.fvCmMaRtnColCd06 = "";//팝업리턴 코드변수-06
this.fvCmMaRtnVColCd06 = "";//팝업리턴 코드변수-06
this.fvCmMaRtnColNm06 = "";//팝업리턴 코드명변수-06
this.fvCmMaPopupId07 = "";//팝업호출ID-07
this.fvCmMaRtnColCd07 = "";//팝업리턴 코드변수-07
this.fvCmMaRtnVColCd07 = "";//팝업리턴 코드변수-07
this.fvCmMaRtnColNm07 = "";//팝업리턴 코드명변수-07
this.fvCmMaPopupId08 = "";//팝업호출ID-08
this.fvCmMaRtnColCd08 = "";//팝업리턴 코드변수-08
this.fvCmMaRtnVColCd08 = "";//팝업리턴 코드변수-08
this.fvCmMaRtnColNm08 = "";//팝업리턴 코드명변수-08

this.fvCmScrnCallFunc = "";//화면호출변수명
this.fvCmScrnCallArgs;//화면전달파라메타

this.popAcchNo = "";  // 발의번호
this.popWofhSq = "";  //결재차수
this.popAccbSe = "";  //발의순번
this.fvOrgDebiAmt =0;  // 차변금액 입력 오류시 이전금액을 넣는다.
this.fvOrgCredAmt =0;  // 대변금액 입력 오류시 이전금액을 넣는다.

this.fvBCalAvailAmt = false;//가용금액계산여부
this.eventObj;
this.eventEdSRowPosChangeEventInfo;
this.dsAcomMaSetYn = "SET";  // 복사시 관리항목세팅구분자 SET 으로 할지 여부
//this.bAcchDd = true;//발의일자 변경여부
this.GetBudgYn = true;

//반제전표찾기
this.fvDsRowPosChangeDetail = true;//데이터셋 Row 변경이벤트-실행유무
this.fvDetailGu = false;

this.fvModifyYn = false; //전표수정가능(공통코드 FA100 에 있는 부서만) 결의번호가 있기 전까지 
this.fvModifySlipYn = false; //전표수정가능 모든 전표 


this.fvMmCloseYn = false;//월마감여부-Tab버튼 제어용
this.fvMmCloseDay = "";//[월마감] 마감일자
//this.fvColChangeEvent = false;//컬럼변경 이벤트중여부
this.fvNumSe = 0; //NUMB_SE 컬럼에 입력할 값


/***********************************************************************************************
 * 00.03. Form Onload 이벤트
 ***********************************************************************************************/
this.fn_FormOnload = function (obj:Form, e:LoadEventInfo)
{	
	
	this.popAcchNo = this.getOwnerFrame().AcchNo;//[부모창파라메타] 발의번호
	this.popWofhSq = this.getOwnerFrame().WofnSq;//[부모창파라메타] 결재차수
	this.popAccbSe = this.getOwnerFrame().AccbSe;//[부모창파라메타] 발의순번
	
	//trace("this.popAccbSe = " + this.popAccbSe);
	
	this.fvComPrgmId = this.getOwnerFrame().PrgmId;//[필수]프로그램ID-메인화면기준, 팝업일경우 해당 메인화면의 프로그램ID

	trace("this.fvComPrgmId = " + this.fvComPrgmId );
	
	this.fn_FormComInit();//[공통] 화면로드시 초기 설정 함수
	this.fn_FormBizInit();//[업무] 화면로드시 초기 설정 함수
	
	
	if (this.gfn_IsNull(this.popAcchNo)) {

		//화면전달 파라메터 체크
		//trace("=========================1");
		this.fvCmScrnCallFunc = this.getOwnerFrame().arguments["scrnCallFunc"];//화면호출변수명
		
		//trace("=========================2");
		if (!this.gfn_IsNull(this.fvCmScrnCallFunc)) {
			
			//trace("=========================3");
			this.fvCmScrnCallArgs = this.getOwnerFrame().arguments["srnCallArgs"];//화면전달파라메타
			//trace("=========================4");
		}

	}else{
	    this.fn_PopFormCall(this.popAcchNo, this.popWofhSq, this.popAccbSe);
		//trace("fn_PopFormCall = " + this.popAcchNo + "=" + this.popWofhSq);
	}
	
	
	//현황에서도 넘기기 때문에 이 문구 추가.
	if(this.gfn_IsNull(this.getOwnerFrame().AcchNo)) {
		//화면전달 파라메터 체크	
	   //trace("this.getOwnerFrame().ACCH_NO = " + this.getOwnerFrame().ACCH_NO);
	   //trace("=========================5");
	   this.fvCmScrnCallFunc = this.getOwnerFrame().arguments["scrnCallFunc"];//화면호출변수명
	   //trace("=========================6");
	   //trace("fvCmScrnCallFunc = " + this.fvCmScrnCallFunc);
	   if (!this.gfn_IsNull(this.fvCmScrnCallFunc)) {
		  this.fvCmScrnCallArgs = this.getOwnerFrame().arguments["srnCallArgs"];//화면전달파라메타
		  
		  this.div_Search.form.cal_TemhDtFr.set_value(this.fvCmScrnCallArgs.ACCH_DD);
		  this.div_Search.form.cal_TemhDtTo.set_value(this.fvCmScrnCallArgs.ACCH_DD);
		  this.div_Search.form.edt_AcumCd.set_value(this.fvCmScrnCallArgs.ACUM_CD);
		  this.div_Search.form.edt_AcumNm.set_value(this.fvCmScrnCallArgs.ACUM_NM);
		  this.div_Search.form.edt_DepmCd.set_value(this.fvCmScrnCallArgs.DEPM_CD);
		  this.div_Search.form.edt_DepmNm.set_value(this.fvCmScrnCallArgs.DEPM_NM);		
		  this.div_Search.form.edt_AcchNo.set_value(this.fvCmScrnCallArgs.ACCH_NO);
		  this.div_Search.form.edt_EmpmCd.set_value(this.fvCmScrnCallArgs.EMPM_CD);
		  this.div_Search.form.edt_EmpmNm.set_value(this.fvCmScrnCallArgs.EMPM_NM);
		  this.div_Search.form.edt_SystId.set_value(this.fvCmScrnCallArgs.SYST_ID);
		  this.popAccbSe = this.fvCmScrnCallArgs.ACCB_SE
		  //조회
		  this.fn_ComBtnSearch();
		 }
      
   }  

}

/***********************************************************************************************
 * 00.04. Form [공통] 초기설정 함수 - 필수
 ***********************************************************************************************/
this.fn_FormComInit = function() 
{
	this.gfn_CommFormOnLoad(this);//[공통] 화면로드시 처리 함수(다국어등)
// 	this.fvComPrgmId = this.gfn_CommLoadFormPrgmId(this);//[필수]프로그램ID-메인화면기준, 팝업일경우 해당 메인화면의 프로그램ID
// 
// 	if(this.gfn_IsNull()){
// 		this.fvComPrgmId ="M_FA_1000";
// 	}

	trace("=======" + this.getOwnerFrame().paramPrgmId);
    if(this.gfn_IsNull(this.getOwnerFrame().paramPrgmId) ) {
	  trace("this.fvComPrgmId = " + "2");
       this.fvComPrgmId = this.gfn_CommLoadFormPrgmId(this);//[필수]프로그램ID-메인화면기준, 팝업일경우 해당 메인화면의 프로그램ID
    } else {
	   trace("this.fvComPrgmId = " + "3");
       this.fvComPrgmId =this.getOwnerFrame().paramPrgmId;
    }
	
	//this.fvComPrgmId ="M_FA_1000"

// 	this.fvComPrgmId = this.gfn_CommLoadFormPrgmId(this);//[필수]프로그램ID-메인화면기준, 팝업일경우 해당 메인화면의 프로그램ID
// 
// 	if(this.gfn_IsNull()){
// 		this.fvComPrgmId ="M_FA_1000";
// 	}

	this.gfn_SetGrid(this.div_MasterView.form.grd_Master10);//[공통]그리드 이벤트 설정 - 출력목록
	this.gfn_SetGrid(this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10);//[공통]그리드 이벤트 설정 - 발의상세
	//this.gfn_SetGrid(this.div_DetailInput.form.tab_Detail.tpg_02.form.grd_Detail20);//[공통]그리드 이벤트 설정 - 미발의검색
	//스플리터 초기화 함수 호출
	this.gfn_InitSpliter(this.sta_HSplitter, "horizontal", -1, -1);
	
	//스플리터 초기화 함수 호출
	this.gfn_InitSpliter(this.sta_VSplitter, "vertical", -1, -1);		
	
	//권한체크 할 컴포넌트 : 컴포넌트 Full Path
	var objCompCheckList = ["this.div_DetailInput.form.div_ComGrdBtn"];		
	if (this.gfn_CommCompAuthCheck(this, objCompCheckList))
	{
		this.fvFormComBtnAuthYn = true;//그리드 공통버튼 권한 유무
	}
	
	this.fn_SetGridInputButton();//[공통] 그리드 입력 버튼 설정
	this.fn_SetTabComAttachFile();//[공통] 첨부파일 Tab 설정

}

/***********************************************************************************************
 * 00.05. Form [업무] 초기설정 함수
 ***********************************************************************************************/
this.fn_FormBizInit = function() 
{ 
	
	//[공통] 날짜정보 설정	
	
	//trace("this.fvComPrgmId2 = " + this.fvComPrgmId );
	
	this.gfn_SetCommFromToDate(this.fvComPrgmId, "MS", this.div_Search.form.cal_TemhDtFr, this.div_Search.form.cal_TemhDtTo);//조회조건영역
	//this.gfn_SetCommFromToDate(this.fvComPrgmId, "DS", this.div_DetailInput.form.tab_Detail.tpg_02.form.div_Search.form.cal_TemhDtFr, this.div_DetailInput.form.tab_Detail.tpg_02.form.div_Search.form.cal_TemhDtTo);//검색조건영역
	
	//[공통] 부서정보 설정
	var arrComp = ["this.div_Search.form.edt_DepmCd^this.div_Search.form.edt_DepmNm"
				  ];
	this.gfn_SetCommDepmCd(this.fvComPrgmId, arrComp);
	
	//[공통] 사원정보 설정
	var arrComp = ["this.div_Search.form.edt_EmpmCd^this.div_Search.form.edt_EmpmNm^this.div_Search.form.edt_SystId"
                  ];
	this.gfn_SetCommEmpmCd(this.fvComPrgmId, arrComp);

	//[공통] 공통코드 설정 : 공통코드|데이터셋명|초기항목추가여부(Y/N)|추가항목
	// 발의시스템(AC067), 발의구분(AC072)
	//ds_Fa112 발의시스템
	//ds_Fa110 발의구분
	//ds_Fa114 입금/지급구분 
	//ds_Fa040 //차대구분
	//ds_Wf110 결재상태
	var objCondList = ["FA112|ds_Fa112","FA110|ds_Fa110","FA005|ds_Fa005","FA114|ds_Fa114|Y|","FA040|ds_Fa040","SM020|ds_Sm020","WF110|ds_Wf110","FA100|ds_Fa100"];
	//공통코드 설정함수 호출				   
	this.gfn_GetCommCode(this, objCondList, "");
	
	//차대구분filter
	this.ds_Fa040.filter();
	this.ds_Fa040.filter("OP01_NM == '1'");

	
	// 입금구분 빈값의 OP01_NM 값을 1 로 한다.
	this.ds_Fa114.setColumn(0, "OP01_NM", "1");
	
	
	
	//콤보 인덱스 설정
	//발의시스템
	this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_ActyCd.set_index(0);
	//발의구분
	this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_AcchGu.set_index(0);
	//[업무] 일반콤보조회
	this.fn_ComboSearch();
	
	
	
	//회계단위 검색조건 추가 
	this.div_Search.form.edt_AcumCd.set_value(this.gfn_GetSessionValue("ACUM_CD"));//회계단위
	this.div_Search.form.edt_AcumNm.set_value(this.gfn_GetSessionValue("ACUM_NM"));//회계단위명
	
	
	//전표 결의 전까지 수정 가능한 부서 
	
	var findRow = this.ds_Fa100.findRowExpr("CODM_CD=='"+this.gfn_GetSessionValue("DEPM_CD")+"'");
	
	if(findRow > -1){
		this.fvModifyYn = true;
		if(this.ds_Fa100.getColumn(findRow, "OP01_NM") == "Y"){
			//결의전표수정가능 
			this.fvModifySlipYn = true;
		}
	}else{
		this.fvModifyYn = false;
	}
	
	
	
}

/***********************************************************************************************
 * 00.06. Form [업무] 일반콤보 조회 함수
 ***********************************************************************************************/
this.fn_ComboSearch = function() 
{
	
	this.ds_Item.clearData();
	this.ds_Input.clearData();
	this.ds_Input.addRow();

	//[공통]서비스정보 초기화
	this.gfn_InitComService(this);
	
	var acumCd = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACUM_CD");
	if(this.gfn_IsNull(acumCd)){
		acumCd = this.gfn_GetSessionValue("ACUM_CD");
	}
	this.ds_Input.setColumn(0, "ACUM_CD", acumCd);  //회계단위
	
	
	//[공통]서비스정보 추가
	var svcAddObj = new Object();//[공통] 서비스 추가 파라메타 정보 Object
	svcAddObj.sSelectSql = "sd:M_SD_CBAB_C_SL30";	//사업자
	this.gfn_AddComSearchService(this, svcAddObj);
	svcAddObj.sSelectSql = "fa:M_FA_1000_D_SL14";	//사업자
	this.gfn_AddComSearchService(this, svcAddObj);
	svcAddObj.sSelectSql = "fa:M_FA_0030_M_SL10";	//관리항목리스트
	this.gfn_AddComSearchService(this, svcAddObj);

	//[공통]서비스 호출 변수
	var svcCallObj = new Object();//[공통] 서비스 파라메타 정보 Object
	svcCallObj.sTrid = "COMBO_SEARCH";//Transaction ID 등 callback에서 넘겨 받을 String을 지정
	svcCallObj.sActionName = this.G_SV_SD;//서버에서 호출할 Action - 모듈별로 호출되는 기본 Actio이 다름 : 공통 서비스 Action 업무구분  변수 참조
	svcCallObj.sInputDaset = "ds_Input=ds_Input" //입력 데이터셋
	svcCallObj.sOutDatset = "ds_SdCbabFull=ds_SdCbabFull ds_EmPalm=ds_EmPalm ds_ItemList=ds_Master10";//출력 데이터셋
	svcCallObj.sOtherArg = "";//서버로 전송할 기타 Argument 정보 문자열, 예) key=value key2=value2
	svcCallObj.sCallBackFnc = "fn_Callback";//서버에서 처리가 완료된 후 Callback 받을 Function 명
	svcCallObj.isSync = true;//동기식으로 설정할지 여부
	//[공통]서비스 호출
	this.gfn_CallComService(this, svcCallObj);
	
	 
}

/***********************************************************************************************
 * 00.07. Form OnClose 이벤트
 ***********************************************************************************************/
this.fn_FormClose = function(obj:nexacro.Form,e:nexacro.CloseEventInfo)
{
	return true;
};

/***********************************************************************************************
 * 00.08. Form 함수 호출
 ***********************************************************************************************/
this.fn_FormCall = function(oParam)
{

	//trace(oParam.COMM_CD + "/" + oParam.ACCH_NO+ "/" + oParam.WOFH_SQ+ "/" + oParam.SLIP_DD+ "/" + oParam.ACUM_CD+ "/" + oParam.ACUM_NM+ "/" + oParam.DEPM_CD+ "/" + oParam.DEPM_NM);
	// 1. 조회 조건에 입력
 	this.div_Search.form.cal_TemhDtFr.set_value(oParam.ACCH_DD);//.set_value(oParam.SLIP_DD);
 	this.div_Search.form.cal_TemhDtTo.set_value(oParam.ACCH_DD);
	this.div_Search.form.edt_AcumCd.set_value(oParam.ACUM_CD)
	this.div_Search.form.edt_AcumNm.set_value(oParam.ACUM_NM);
	this.div_Search.form.edt_DepmCd.set_value(oParam.DEPM_CD);
	this.div_Search.form.edt_DepmNm.set_value(oParam.DEPM_NM);
	this.div_Search.form.edt_AcchNo.set_value(oParam.ACCH_NO);
	this.div_Search.form.edt_EmpmCd.set_value(oParam.EMPM_CD);
	this.div_Search.form.edt_EmpmNm.set_value(oParam.EMPM_NM);
	this.div_Search.form.edt_SystId.set_value(oParam.SYST_ID);
	
	this.popAccbSe = oParam.ACCB_SE
	
	//trace("this.popAccbSe 1 = " + this.popAccbSe);
	
	this.div_Search.form.chk_WofhYn.set_value(false);
	this.fn_ComBtnSearch();
}

/***********************************************************************************************
 * 00.08. PopForm 함수 호출
 ***********************************************************************************************/
this.fn_PopFormCall = function(acchNo, wofhSq, accbSe)
{

	//[조회영역-▲] click event   
	var obj  = this.btn_DivMoveMi;
	this.btn_DivMoveMi_onclick(obj, null);

	//[조회영역-▲] visible false
	this.btn_DivMoveMi.set_visible(false);
	
	// 조회 
	this.fn_ComBtnSearch(null);
	
	

	
}

/***********************************************************************************************
 * 1. 조회 영역
 ***********************************************************************************************/
/***********************************************************************************************
 * 01.01. [공통버튼] 조회 버튼 클릭 이벤트
 ***********************************************************************************************/
this.fn_ComBtnSearch = function(sWofhNo)
{ 

	

	//[결재] 결재 PID가 있으면-결재Popup으로 호출시
	if (!this.gfn_IsNull(sWofhNo) || !this.gfn_IsNull(this.popAcchNo)) {
		this.fvWfSearchMode = true;//[결재]결재내역 조회모드
		this.fvWfPopupMode = true;//[결재]결재내역 팝업화면으로 호출여부
	}else{
		//조회전 유효성 체크
		if (!this.fn_VaildSearch()) return;	
		
		//저장후 재조회시-마스터 데이터셋 이벤트 비활성화
		if (this.fvSchKeyYn) {
			this.ds_Master10.set_enableevent(false);
		}
	
	}
	
	//this.fvColChangeEvent = false;//컬럼변경 이벤트중여부
	
	this.fvComWofhNo = sWofhNo;//[결재]결재PID
	

	//[업무] 데이터셋 설정 - 데이터셋 초기화, 조회조건 설정
	this.ds_Master10.clearData();
	this.ds_Detail10.clearData();
	this.ds_Input.clearData();
	this.fvFileDiv.fn_ClearAtchFile();//첨부파일 정보 초기화
	
	
	
	this.ds_Input.addRow();
	
	var sSqlId = "";//쿼리ID
		
		
	//[업무] 조회조건 입력//[결재] 결재내역 조회가 아니면
	if (!this.fvWfSearchMode) {
		this.ds_Input.setColumn(0, "FROM_DD", this.div_Search.form.cal_TemhDtFr.value); //발의일자 FROM
		this.ds_Input.setColumn(0, "CLOS_DD", this.div_Search.form.cal_TemhDtTo.value); //발의일자 TO
		this.ds_Input.setColumn(0, "ACUM_CD", this.div_Search.form.edt_AcumCd.value);  //회계단위
		this.ds_Input.setColumn(0, "ACCH_NO", this.div_Search.form.edt_AcchNo.value);  //발의번호
		this.ds_Input.setColumn(0, "ACCH_NM", this.div_Search.form.edt_AcchNm.value);  //발의내용요약
		this.ds_Input.setColumn(0, "DEPM_CD", this.div_Search.form.edt_DepmCd.value);  //발의부서
		this.ds_Input.setColumn(0, "SESU_ID", this.div_Search.form.edt_SystId.value);  //발의자
		this.ds_Input.setColumn(0, "WOFH_YN", this.div_Search.form.chk_WofhYn.value);  //발의부서
		sSqlId = "fa:M_FA_1000_M_SL10";//쿼리ID
	} else {
		this.ds_Input.setColumn(0, "WOFH_NO", sWofhNo);//결재PID
		this.ds_Input.setColumn(0, "ACCH_NO", this.popAcchNo);//결재PID
		this.ds_Input.setColumn(0, "WOFH_SQ", this.popWofhSq);//결재PID
		sSqlId = "fa:M_FA_1000_M_SL11";//쿼리ID

	}

	//결재이력체크
	if (this.div_Search.form.chk_WofhYn.value) {
		this.ds_Input.setColumn(0, "WOFH_YN", "1");
	} else {
		this.ds_Input.setColumn(0, "WOFH_YN", "0");
	}

	//[공통]서비스정보 초기화
	this.gfn_InitComService(this);
	
	//[공통]서비스정보 추가
	var svcAddObj = new Object();//[공통] 서비스 추가 파라메타 정보 Object

	svcAddObj.sSelectSql = sSqlId;
	this.gfn_AddComSearchService(this, svcAddObj);
	
	//[공통]서비스 호출 변수
	var svcCallObj = new Object();//[공통] 서비스 파라메타 정보 Object
	svcCallObj.sTrid = "MST_SEARCH";//Transaction ID 등 callback에서 넘겨 받을 String을 지정
	svcCallObj.sActionName = this.G_SV_FA;//서버에서 호출할 Action - 모듈별로 호출되는 기본 Actio이 다름 : 공통 서비스 Action 업무구분  변수 참조
	svcCallObj.sInputDaset = "ds_Input=ds_Input" //입력 데이터셋
	svcCallObj.sOutDatset = "ds_Master10=ds_Master10";//출력 데이터셋
	svcCallObj.sOtherArg = "";//서버로 전송할 기타 Argument 정보 문자열, 예) key=value key2=value2
	svcCallObj.sCallBackFnc = "fn_Callback";//서버에서 처리가 완료된 후 Callback 받을 Function 명
	svcCallObj.sComBtnDst = "SEARCH";//공통버튼구분-조회버튼
	svcCallObj.sPrgmId = this.fvComPrgmId;//프로그램ID

	//[공통]서비스 호출
	this.gfn_CallComService(this, svcCallObj);	
}

/***********************************************************************************************
 * 01.02. [Vaildation] 조회 필수값 체크
 ***********************************************************************************************/
this.fn_VaildSearch = function()
{
	//[결재] 결재내역 조회가 아니면
	if (!this.fvWfSearchMode) {
		if (!this.gfn_CheckFromToDate(this.fvComPrgmId, this.div_Search.form.cal_TemhDtFr, this.div_Search.form.cal_TemhDtTo)) return false;//조회기간 범위 체크
		//조회조건 필수입력값 있으면 체크
	}
	return true;
}

/***********************************************************************************************
 * 01.03. [공통] 조회조건 클릭/변경 이벤트
 ***********************************************************************************************/
 
 /***********************************************************************************************
 * 01.03.01 [taborder] 조회영역 enterkey
 ***********************************************************************************************/ 
this.div_Search_onkeyup = function(obj:nexacro.Div,e:nexacro.KeyEventInfo)
{
	// enterkey를 탭으로 설정
	this.fn_enterkeyTabOrder(obj, e);
}



/***********************************************************************************************
 *    01. [부서]
 ***********************************************************************************************/
/*---------------------------------------------------------------------------------------------
 *    [조회영역-Button] 부서 버튼 클릭 이벤트
  ---------------------------------------------------------------------------------------------*/
this.div_Search_btn_DepmCd_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	var sPopupId = "S_DEPM_CD_01";//팝업ID - 부서코드
	var oArg = {PrgmId:this.fvComPrgmId, AuthYn:"Y", DepmNm:this.div_Search.form.edt_DepmNm.value };//Argument처리-권한체크용	
	this.gfn_DeptPop(sPopupId, oArg);
};

/*---------------------------------------------------------------------------------------------
 *    [조회영역-Edit] 부서코드 변경 이벤트
  ---------------------------------------------------------------------------------------------*/
this.div_Search_edt_DepmCd_onchanged = function(obj:nexacro.Edit,e:nexacro.ChangeEventInfo)
{
	var sPopupId = "S_DEPM_CD_01";//팝업ID - 부서코드
	//this.gfn_GetCommDepm("C", this.div_Search.form.edt_DepmCd, this.div_Search.form.edt_DepmNm, sPopupId);//코드로 검색
	this.gfn_GetCommAuDepm(this.fvComPrgmId,"C", this.div_Search.form.edt_DepmCd, this.div_Search.form.edt_DepmNm, sPopupId);//코드로 검색-권한체크용	
};

/*---------------------------------------------------------------------------------------------
 *    [조회영역-Edit] 부서명 변경 이벤트
  ---------------------------------------------------------------------------------------------*/
this.div_Search_edt_DepmNm_onchanged = function(obj:nexacro.Edit,e:nexacro.ChangeEventInfo)
{
	var sPopupId = "S_DEPM_CD_01";//팝업ID - 부서코드
	//this.gfn_GetCommDepm("N", this.div_Search.form.edt_DepmCd, this.div_Search.form.edt_DepmNm, sPopupId);//코드명으로 검색
	this.gfn_GetCommAuDepm(this.fvComPrgmId,"N", this.div_Search.form.edt_DepmCd, this.div_Search.form.edt_DepmNm, sPopupId);//코드명으로 검색-권한체크용	
};

/***********************************************************************************************
 *    02. [사용자]
 ***********************************************************************************************/
/*---------------------------------------------------------------------------------------------
 *    [조회영역-Button] 사용자 버튼 클릭 이벤트
  ---------------------------------------------------------------------------------------------*/
this.div_Search_btn_SystId_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	var sPopupId = "S_SYST_ID_01";//팝업ID - 사용자정보
	//var oArg = { EmpmNm:this.div_Search.form.edt_EmpmNm.value};//Argument처리
	var oArg = {PrgmId:this.fvComPrgmId, AuthYn:"Y", EmpmNm:this.div_Search.form.edt_EmpmNm.value};//Argument처리-권한체크용	
	this.gfn_UserPop(sPopupId, oArg);		
};

/*---------------------------------------------------------------------------------------------
 *    [조회영역-Edit] 사원코드 변경 이벤트
  ---------------------------------------------------------------------------------------------*/
this.div_Search_edt_EmpmCd_onchanged = function(obj:nexacro.Edit,e:nexacro.ChangeEventInfo)
{
	var sPopupId = "S_SYST_ID_01";//팝업ID - 사원코드
	//this.gfn_GetCommEmpm("C", this.div_Search.form.edt_EmpmCd, this.div_Search.form.edt_EmpmNm, this.div_Search.form.edt_SystId, sPopupId);//코드로 검색	
	this.gfn_GetCommAuEmpm(this.fvComPrgmId, "C", this.div_Search.form.edt_EmpmCd, this.div_Search.form.edt_EmpmNm, this.div_Search.form.edt_SystId, sPopupId, "", "", false);//코드로 검색-권한체크용		
};

/*---------------------------------------------------------------------------------------------
 *    [조회영역-Edit] 사원명 변경 이벤트
  ---------------------------------------------------------------------------------------------*/
this.div_Search_edt_EmpmNm_onchanged = function(obj:nexacro.Edit,e:nexacro.ChangeEventInfo)
{
	var sPopupId = "S_SYST_ID_01";//팝업ID - 사원코드
	//this.gfn_GetCommEmpm("N", this.div_Search.form.edt_EmpmCd, this.div_Search.form.edt_EmpmNm, this.div_Search.form.edt_SystId, sPopupId);//코드명으로 검색		
	this.gfn_GetCommAuEmpm(this.fvComPrgmId, "N", this.div_Search.form.edt_EmpmCd, this.div_Search.form.edt_EmpmNm, this.div_Search.form.edt_SystId, sPopupId, "", "", false);//코드명으로 검색-권한체크용			
};

/***********************************************************************************************
 *    03. [회계단위]
 ***********************************************************************************************/
/*---------------------------------------------------------------------------------------------
 *    [조회영역-Button] 회계단위 버튼 클릭 이벤트
  ---------------------------------------------------------------------------------------------*/
this.div_Search_btn_AcumCd_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	//회계단위 pop창으로 변경
   var sPopupId = "S_ACUM_CD_01";//팝업ID - 계정코드
   var oArg = { AcumNm: this.div_Search.form.edt_AcumCd.value};//Argument처리
   this.gfn_AcumPop(sPopupId, oArg);  		
};

/*---------------------------------------------------------------------------------------------
 *    [조회영역-Edit] 회계단위 변경 이벤트
  ---------------------------------------------------------------------------------------------*/
this.div_Search.form.edt_AcumCd_onchanged = function(obj:nexacro.MaskEdit,e:nexacro.ChangeEventInfo)
{
	//this.gfn_GetCommCnth(this.div_Search.form.edt_AcumCd, this.div_Search.form.edt_AcumNm);//코드로 검색	
	
	//trace("1000 = " + this.div_Search.form.edt_AcumCd.value)
	this.gfn_GetCummAcum("C"
	                    , this.div_Search.form.edt_AcumCd
						, this.div_Search.form.edt_AcumNm
						, "S_ACUM_CD_01");
};

/***********************************************************************************************
 * 2. 입력
 ***********************************************************************************************/
/***********************************************************************************************
 * 02.00. MasterView 사이즈 변경 이벤트
 ***********************************************************************************************/  
this.div_MasterView_onsize = function(obj:nexacro.Div,e:nexacro.SizeEventInfo)
{
	this.sta_HSplitter.set_height(this.div_MasterView.getOffsetHeight() - 29);
};

/***********************************************************************************************
 * 02.01. [공통버튼] 입력 버튼 클릭 이벤트
 ***********************************************************************************************/ 
this.fn_ComBtnAdd = function()
{
	
	//trace("fn_ComBtnAdd start");
	//데이터 변경여부 체크
	if (this.gfn_DsIsUpdated(this.ds_Master10)) {
		this.gfn_Alert("SM002");//변경된 내용이 있습니다.\n저장 후 작업하시기 바랍니다.

		return;
	}

	this.fvDsRowPosChange = false;//데이터셋 Row 변경이벤트-실행유무
	var sToDay = this.gfn_GetCommDate("toDay");//현재일자
	 

	var iAddRow = this.ds_Master10.addRow();

	
	this.ds_Detail10.clearData();

    this.fvMmCloseDay = sToDay;//[월마감] 마감일자 
	//trace("sToDay = " + sToDay);
	this.ds_Master10.setColumn(iAddRow, "WOFH_SQ", "1");
	this.ds_Master10.setColumn(iAddRow, "WOFH_YN", "1");	
	this.ds_Master10.setColumn(iAddRow, "WOFH_ST", "0010");	//결재상태	
	this.ds_Master10.setColumn(iAddRow, "DEPM_CD", this.gfn_GetSessionValue("DEPM_CD"));//발의부서코드	
	this.ds_Master10.setColumn(iAddRow, "DEPM_NM", this.gfn_GetSessionValue("DEPM_NM"));//발의부서명	
	this.ds_Master10.setColumn(iAddRow, "EMPM_CD", this.gfn_GetSessionValue("USEM_ID"));//발의자사번	
	this.ds_Master10.setColumn(iAddRow, "EMPM_NM", this.gfn_GetSessionValue("USEM_NM"));//발의자명		
	this.ds_Master10.setColumn(iAddRow, "SYST_ID", this.gfn_GetSessionValue("SYST_ID"));//발의자ID	
	this.ds_Master10.setColumn(iAddRow, "ACCH_DD", sToDay);//발의일자-오늘날자로 설정
	this.ds_Master10.setColumn(iAddRow, "TRAN_YN", "0");//이관여부	
	

	this.ds_Master10.setColumn(iAddRow, "ACUM_CD", this.gfn_GetSessionValue("ACUM_CD"));//회계단위
	this.ds_Master10.setColumn(iAddRow, "ACUM_NM", this.gfn_GetSessionValue("ACUM_NM"));//회계단위	
	
	
	//발의시스템 초기값 재무회계
	this.ds_Master10.setColumn(iAddRow, "ACTY_CD", "AC");//발의시스템 재무회계
	
	this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_ActyCd.set_index(0);
	this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_AcchGu.set_index(0);
 
	//발의구분
	this.fn_cbo_AcchGu(this.ds_Master10.getColumn(iAddRow, "ACCH_GU"), true);

	//입력영역 활성화
	this.div_MasterInput.set_enable(true);
	this.div_DetailInput.form.div_ComGrdBtn.set_enable(true);
	this.div_DetailInput.form.tab_Detail.set_enable(true);
	
	//처음 입력 항목에 포커스(발의일자)
	this.div_MasterInput.form.tab_Master.tpg_01.form.cal_AcchDd.setFocus();
	
	this.ds_Detail10.clearData();//상세정보 초기화
	this.fvFileDiv.fn_ClearAtchFile();//첨부파일 정보 초기화
	
	//첨부파일정보 권한설정
	var oScrnBtnAuth = new Object();//[공통] 첨부파일 권한정보
	oScrnBtnAuth.BTN_ENABLE = true;//권한 유무	
	this.fvFileDiv.fn_SetCommFileBtnAuth(oScrnBtnAuth);	
	
	this.fvDsRowPosChange = true;//데이터셋 Row 변경이벤트-실행유무
	
	//trace("fn_ComBtnAdd end");
	
}

/***********************************************************************************************
 * 02.MF0.01. [Master Freeform 공통] 입력항목 클릭/변경 이벤트
 ***********************************************************************************************/
/***********************************************************************************************
 *    01. [부서]
 ***********************************************************************************************/
/*---------------------------------------------------------------------------------------------
 *    [Master 입력영역-Button] 부서 버튼 클릭 이벤트
  ---------------------------------------------------------------------------------------------*/
this.div_MasterInput_tab_Master_tpg_01_btn_DepmCd_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	var sPopupId = "M_DEPM_CD_01";//팝업ID - 부서코드
	var oArg = { DepmNm:this.div_MasterInput.form.tab_Master.tpg_01.form.edt_DepmCd.value};//Argument처리
	this.gfn_DeptPop(sPopupId, oArg);	
};

/*---------------------------------------------------------------------------------------------
 *    [Master 입력영역-Edit] 부서코드 변경 이벤트
  ---------------------------------------------------------------------------------------------*/  
this.div_MasterInput_tab_Master_tpg_01_edt_DepmCd_onchanged = function(obj:nexacro.Edit,e:nexacro.ChangeEventInfo)
{
	var sPopupId = "M_DEPM_CD_01";//팝업ID - 부서코드
	this.gfn_GetCommDepm("C", this.div_MasterInput.form.tab_Master.tpg_01.form.edt_DepmCd, this.div_MasterInput.form.tab_Master.tpg_01.form.edt_DepmNm, sPopupId);//코드로 검색
};

/***********************************************************************************************
 *    02. [사용자]
 ***********************************************************************************************/
/*---------------------------------------------------------------------------------------------
 *    [Master 입력영역-Button] 사용자 버튼 클릭 이벤트
  ---------------------------------------------------------------------------------------------*/
this.div_MasterInput_tab_Master_tpg_01_btn_SystId_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	var sPopupId = "M_SYST_ID_01";//팝업ID - 사용자정보
	var oArg = {  EmpmNm:this.div_MasterInput.form.tab_Master.tpg_01.form.edt_SystId.value};//Argument처리
	this.gfn_UserPop(sPopupId, oArg);		
};

/*---------------------------------------------------------------------------------------------
 *    [Master 입력영역-Edit] 사원코드 변경 이벤트
  ---------------------------------------------------------------------------------------------*/  
this.div_MasterInput_tab_Master_tpg_01_edt_EmpmCd_onchanged = function(obj:nexacro.Edit,e:nexacro.ChangeEventInfo)
{
	var sPopupId = "M_SYST_ID_01";//팝업ID - 사원코드
	var arrArgs = ["DEPM_CD^this.div_MasterInput.form.tab_Master.tpg_01.form.edt_DepmCd"
	              ,"DEPM_NM^this.div_MasterInput.form.tab_Master.tpg_01.form.edt_DepmNm"];
	this.gfn_GetCommEmpm("C", this.div_MasterInput.form.tab_Master.tpg_01.form.edt_EmpmCd, this.div_MasterInput.form.tab_Master.tpg_01.form.edt_EmpmNm, this.div_MasterInput.form.tab_Master.tpg_01.form.edt_SystId, sPopupId, arrArgs);//코드로 검색		
};

/***********************************************************************************************
 *    03. [회계단위]
 ***********************************************************************************************/
/*---------------------------------------------------------------------------------------------
 *    [Master 입력영역-Button] 회계단위 버튼 클릭 이벤트
  ---------------------------------------------------------------------------------------------*/
this.div_MasterInput_tab_Master_tpg_01_btn_AcumCd_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
   var sPopupId = "S_ACUM_CD_02";//팝업ID - 계정코드
   //trace("edt_AcumCd = "+ this.div_Search.form.edt_AcumCd.value);
   var oArg = { AcumNm: this.div_Search.form.edt_AcumCd.value};//Argument처리
   this.gfn_AcumPop(sPopupId, oArg); 	
};

/*---------------------------------------------------------------------------------------------
 *    [Master 입력영역-Edit] 회계단위 변경 이벤트
  ---------------------------------------------------------------------------------------------*/  
this.div_MasterInput.form.tab_Master.tpg_01.form.edt_AcumCd_onchanged = function(obj:nexacro.MaskEdit,e:nexacro.ChangeEventInfo)
{
	this.gfn_GetCummAcum("C"
	                    , this.div_MasterInput.form.tab_Master.tpg_01.form.edt_AcumCd
						, this.div_MasterInput.form.tab_Master.tpg_01.form.edt_AcumNm
						, "S_ACUM_CD_01");
};  
  

/***********************************************************************************************
 *    04. [지급처/입금처]
 ***********************************************************************************************/
/*---------------------------------------------------------------------------------------------
 *    [Master 입력영역-Button] 지급처/입금처 버튼 클릭 이벤트
  ---------------------------------------------------------------------------------------------*/

this.div_MasterInput_tab_Master_tpg_01_btn_PacsCd_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	var sPopupId = "M_CUSM_CD_01";//팝업ID - 거래처정보
	var oArg = { paramCode:this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PacsCd.value};//Argument처리
	this.gfn_CusmPop(sPopupId, oArg);
};
/*---------------------------------------------------------------------------------------------
 *    [Master 입력영역-Edit] 지급처/입금처 변경 이벤트
  ---------------------------------------------------------------------------------------------*/  
this.div_MasterInput_tab_Master_tpg_01_edt_PacsCd_onchanged = function(obj:nexacro.Edit,e:nexacro.ChangeEventInfo)
{
	var sPopupId = "M_CUSM_CD_01";//팝업ID - 거래처정보
  	this.gfn_GetCommCusm("C", this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PacsCd, this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PacsNm, sPopupId);//코드로 검색	
};  
  
/*---------------------------------------------------------------------------------------------
 *    [Master 입력영역-Edit] 프로젝트 변경 이벤트
  ---------------------------------------------------------------------------------------------*/  
  
/***********************************************************************************************
 *    05. [거래처]
 ***********************************************************************************************/
/*---------------------------------------------------------------------------------------------
 *    [Master 입력영역-Button] 거래처 버튼 클릭 이벤트
  ---------------------------------------------------------------------------------------------*/
// this.div_MasterInput_tab_Master_tpg_01_btn_CusmCd_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
// {
// 	var sPopupId = "M_CUSM_CD_01";//팝업ID - 거래처정보
// 	var oArg = { paramCode:this.div_MasterInput.form.tab_Master.tpg_01.form.edt_CusmCd.value};//Argument처리
// 	this.gfn_CusmPop(sPopupId, oArg);	
// };

/*---------------------------------------------------------------------------------------------
 *    [Master 입력영역-Edit] 거래처코드 변경 이벤트
  ---------------------------------------------------------------------------------------------*/  
// this.div_MasterInput_tab_Master_tpg_01_edt_CusmCd_onchanged = function(obj:nexacro.Edit,e:nexacro.ChangeEventInfo)
// {
// 	this.gfn_GetCommCusm("C", this.div_MasterInput.form.tab_Master.tpg_01.form.edt_CusmCd, this.div_MasterInput.form.tab_Master.tpg_01.form.edt_CusmNm);//코드로 검색	
// };

/***********************************************************************************************
 *    06. [사업장]
 ***********************************************************************************************/
/*---------------------------------------------------------------------------------------------
 *    [Master 입력영역-Button] 사업장 버튼 클릭 이벤트
  ---------------------------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------------------------
 *    [Master 입력영역-Edit] 사업장코드 변경 이벤트
  ---------------------------------------------------------------------------------------------*/  
  
/***********************************************************************************************
 *    07. [W/O]
 ***********************************************************************************************/
/*---------------------------------------------------------------------------------------------
 *    [Master 입력영역-Button] W/O 버튼 클릭 이벤트
  ---------------------------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------------------------
 *    [Master 입력영역-Edit] W/O 변경 이벤트
  ---------------------------------------------------------------------------------------------*/    
  
/***********************************************************************************************
 *    08. [품목코드]
 ***********************************************************************************************/
/*---------------------------------------------------------------------------------------------
 *    [Master 입력영역-Button] 품목코드 버튼 클릭 이벤트
  ---------------------------------------------------------------------------------------------*/
// this.div_MasterInput_tab_Master_tpg_01_btn_ItemCd_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
// {
// 	var sPopupId = "M_ITEM_CD_01";//팝업ID - 품목정보
// 	var oArg = { ItemCd:this.div_MasterInput.form.tab_Master.tpg_01.form.edt_ItemCd.value, ItemNm:"" };//Argument처리
// 	this.gfn_ItemPop(sPopupId, oArg);	
// };

/*---------------------------------------------------------------------------------------------
 *    [Master 입력영역-Edit] 품목코드 변경 이벤트
  ---------------------------------------------------------------------------------------------*/    
// this.div_MasterInput_tab_Master_tpg_01_edt_ItemCd_onchanged = function(obj:nexacro.Edit,e:nexacro.ChangeEventInfo)
// {
// 	this.gfn_GetCommItem(this.div_MasterInput.form.tab_Master.tpg_01.form.edt_ItemCd, this.div_MasterInput.form.tab_Master.tpg_01.form.edt_ItemNm);//코드로 검색	
// };

/***********************************************************************************************
 *    09. [계정코드]
 ***********************************************************************************************/
/*---------------------------------------------------------------------------------------------
 *    [Master 입력영역-Button] 계정코드 버튼 클릭 이벤트
  ---------------------------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------------------------
 *    [Master 입력영역-Edit] 계정코드 변경 이벤트
  ---------------------------------------------------------------------------------------------*/    

/***********************************************************************************************
 *    10. [비고]
 ***********************************************************************************************/
/*---------------------------------------------------------------------------------------------
 *    [Master 입력영역-Button] 발의내용 버튼 클릭 이벤트
  ---------------------------------------------------------------------------------------------*/

this.div_MasterInput_tab_Master_tpg_01_btn_AcreNmPop_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	if (!this.gfn_IsNull(this.div_MasterInput.form.tab_Master.tpg_01.form.txt_AcreNm.value)) {
		var sPopupId = "M_REMK_01";//팝업ID - 비고상세
		var sTitle = this.div_MasterInput.form.tab_Master.tpg_01.form.Sta_AcreNm.text;//팝업 타이틀
		var oArg = {  Remk:this.div_MasterInput.form.tab_Master.tpg_01.form.txt_AcreNm.value};//Argument처리
		this.gfn_RemkPop(sPopupId, sTitle, oArg);		
	}
};



/***********************************************************************************************
 *    10. [발의구분]
 ***********************************************************************************************/
/*---------------------------------------------------------------------------------------------
 *    [Master 입력영역-Edit] 발의구분 변경 이벤트
  ---------------------------------------------------------------------------------------------*/  
this.div_MasterInput_tab_Master_tpg_01_cbo_AcchGu_onitemchanged = function(obj:nexacro.Combo,e:nexacro.ItemChangeEventInfo)
{
	
	// 데이타 변경시 ds_Fa100 에서 지출(0)/수입(1)구분값을 가져와
	// 입력항목(지급/입금) text 를 변경한다.
	this.fn_cbo_AcchGu(e.postvalue, true);
	
	
	

};

/***********************************************************************************************
 *    10. [지급구분]
 ***********************************************************************************************/
/*---------------------------------------------------------------------------------------------
 *    [Master 입력영역-Edit] 발의구분 변경 이벤트
  ---------------------------------------------------------------------------------------------*/  
this.div_MasterInput_tab_Master_tpg_01_cbo_PacsGu_onitemchanged = function(obj:nexacro.Combo,e:nexacro.ItemChangeEventInfo)
{
	this.fn_cbo_AcchGu(this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_GU"), true);
	//지급구분이 계좌이체가 아닌경우 계좌, 은행코드, 은행명을 함계 지운다.
	if(e.postvalue != "0030"){
		this.ds_Master10.setColumn(this.ds_Master10.rowposition, "PABA_CD", "");
		this.ds_Master10.setColumn(this.ds_Master10.rowposition, "PABA_NM", "");
		this.ds_Master10.setColumn(this.ds_Master10.rowposition, "PAAC_NO", "");
		this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PaacNo.set_readonly(true);
	}else{
		this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PaacNo.set_readonly(false);
	}
	
};
/***********************************************************************************************
 *    10. [지급계좌]
 ***********************************************************************************************/
this.div_MasterInput_tab_Master_tpg_01_cbo_PaacNo_onitemchanged = function(obj:nexacro.Combo,e:nexacro.ItemChangeEventInfo)
{

	var nRow = this.ds_SdCbabFull.findRow( "ACNM_NO", obj.value);
	var banmCd = this.ds_SdCbabFull.getColumn(nRow, "BANM_CD")
	var banmNm = this.ds_SdCbabFull.getColumn(nRow, "BANM_NM")
	
	
	//this.ds_Master10.setColumn(this.ds_Master10.rowposition, "PAAC_NO", obj.value);
	this.ds_Master10.setColumn(this.ds_Master10.rowposition, "PABA_CD", banmCd);
	this.ds_Master10.setColumn(this.ds_Master10.rowposition, "PABA_NM", banmNm);
	
	
};

/***********************************************************************************************
 * 02.MF0.02. [Master Freeform 일반] 입력항목 클릭/변경 이벤트
 ***********************************************************************************************/
/***********************************************************************************************
 *    01. [고객]
 ***********************************************************************************************/
/*---------------------------------------------------------------------------------------------
 *    [Master 입력영역-Button] 고객 버튼 클릭 이벤트
  ---------------------------------------------------------------------------------------------*/
this.div_MasterInput_tab_Master_tpg_01_btn_CspmCd_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
// 	var sPopupId = "M_CSPM_CD_01";//팝업ID - 고객정보
// 	var oArg = { CspmNm:this.div_MasterInput.form.tab_Master.tpg_01.form.edt_CspmNm.value};//Argument처리
// 	this.gfn_CustUserPop(sPopupId, oArg);		
};

/*---------------------------------------------------------------------------------------------
 *    [Master 입력영역-Edit] 고객코드 변경 이벤트
  ---------------------------------------------------------------------------------------------*/   
this.div_MasterInput_tab_Master_tpg_01_edt_CspmCd_onchanged = function(obj:nexacro.Edit,e:nexacro.ChangeEventInfo)
{
	//this.gfn_GetCommCspm(this.div_MasterInput.form.tab_Master.tpg_01.form.edt_CspmCd, this.div_MasterInput.form.tab_Master.tpg_01.form.edt_CspmNm);//코드로 검색		
};


/***********************************************************************************************
 *    [Master 입력영역-Edit] enterkey  event
 ***********************************************************************************************/ 
this.div_MasterInput_tab_Master_onkeyup = function(obj:nexacro.Tab,e:nexacro.KeyEventInfo)
{
	
	this.fn_enterkeyTabOrder(obj, e);
	
};

/***********************************************************************************************
 *    02. [발의일자]
 ***********************************************************************************************/
this.div_MasterInput_tab_Master_tpg_01_cal_AcchDd_onchanged = function(obj:nexacro.Calendar,e:nexacro.ChangeEventInfo)
{
	/**
		1. 예산통제로 인해
		- body grid에 데이타가 있을시 발의일자의 월을 변경 할 수 없다.
		- 다시 월 변경 가능하게 2021.11.16
	**/
	/*
	if(this.ds_Detail10.rowcount > 0){
		//이전날짜와 변경날짜의 월을 비교
		if(e.prevalue.substr(0,6) != e.postvalue.substr(0,6)){
			//월이 다르면 이전값을 다시 넣어준다.
			this.gfn_Alert("FA012");//등록된 전표상세가 있을 시 발의일자의 월을 변경 할 수 없습니다.
			this.div_MasterInput.form.tab_Master.tpg_01.form.cal_AcchDd.set_value(e.prevalue);
			return ;
		}
	}
	*/
	
	//this.bAcchDd = true;//발의일자 변경여부
	if(this.ds_Detail10.rowcount > 0){
		//이전날짜와 변경날짜의 월을 비교
		if(e.prevalue.substr(0,6) != e.postvalue.substr(0,6)){
			for (var iLoop=0; iLoop < this.ds_Detail10.getRowCount(); iLoop++) {
				
				this.ds_Detail10.setColumn(iLoop, "BUDG_MM", e.postvalue.substr(0,6));
			}	
		}
	}
	//this.bAcchDd = true;//발의일자 변경여부
	
};

/***********************************************************************************************
 * 02.MF0.03. [Master 데이터셋] 변경 이벤트
 ***********************************************************************************************/
/*---------------------------------------------------------------------------------------------
 *    01. [데이터셋-ds_Master10] 데이터 Row 변경 이벤트
  ---------------------------------------------------------------------------------------------*/
this.ds_Master10_onrowposchanged = function(obj:nexacro.NormalDataset,e:nexacro.DSRowPosChangeEventInfo)
{
	//trace("ds_Master10_onrowposchanged start");
	var sLeng;
	if (e.newrow > -1) {
	
		//[결재] 결재상태에 따른 컴포넌트 제어
		this.fn_SetWfCompEnable();	

		//발의No정보가 있으면 - 상세조회
		if (!this.gfn_IsNull(this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_NO"))) {
			
			//결재번호가 있는경우 증빙보기 버튼 활성화
			if (!this.gfn_IsNull(this.ds_Master10.getColumn(this.ds_Master10.rowposition, "WOFH_NO"))) {
				this.div_MasterInput.form.btn_WfView.set_enable(true);
			} else {
				this.div_MasterInput.form.btn_WfView.set_enable(false);
			}		

			//[월마감제어-버튼/상세그리드]
			var sBUDG_MM = this.gfn_Nvl(this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_DD"), "");//마감년월
			
			var sACUM_CD = this.div_MasterInput.form.tab_Master.tpg_01.form.edt_AcumCd.value;
			
			//마감여부 체크
			var paramObj= new Object();//[공통] 예산통제체크 파라메타 정보 Object
			var mgasDst  = "C";//[필수] 마감구분 - C: 마감여부, A: 회계마감여부  
			
			//수정권한이 있는 부서인 경우 마감이 되었어도 회계마감만 아니면 처리 되게 한다.
			var findRow = this.ds_Fa100.findRowExpr("CODM_CD=='"+this.gfn_GetSessionValue("DEPM_CD")+"'");
			if(findRow > -1){
				mgasDst = "A";
			}
			
			
			paramObj.MGAS_MM = sBUDG_MM.substr(0,6);//마감년월
			paramObj.MODM_CD = "FA";//[필수] 모듈구분(공통코드-CA910(마감구분) 참조) : CC - 예산편성확정 마감여부, CB - 예산마감 여부
//			paramObj.ACUM_CD = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACUM_CD");//[선택] 회계단위
            paramObj.ACUM_CD  = sACUM_CD;//[선택] 회계단위
			paramObj.BUSM_CD  = "";//[선택] 사업부문
			paramObj.SAUM_CD  = "";//[선택] 사업장코드
			paramObj.DEPM_CD  = "";//[선택] 부서코드
			paramObj.MODD_CD  = "";//[선택] 모듈상세구분(CA900)
			paramObj.BFPR_YN  = "Y";//[선택] 마감전 프로세스여부
			
			var bCheck = this.gfn_CheckMgas(paramObj, mgasDst);//마감여부 체크		

			//월마감된 경우
			if (bCheck) {		
				this.fvMmCloseYn = true;//월마감여부-Tab버튼 제어용
			} else {
				this.fvMmCloseYn = false;//월마감여부-Tab버튼 제어용
			}		
		
		
		
		
		
			sLeng = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_NO").length;
			
			if (sLeng > 10){
				this.div_MasterInput.form.tab_Master.tpg_01.form.mae_AcchNo.set_format("@@@@@@@@-@@@@");
			}else{
				this.div_MasterInput.form.tab_Master.tpg_01.form.mae_AcchNo.set_format("@@@@@@-@@@@");
			}
			
			if (!this.gfn_IsNull(this.ds_Master10.getColumn(this.ds_Master10.rowposition, "SLIP_NO"))) {
				sLeng = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "SLIP_NO").length;
				
				if (sLeng > 10){
					this.div_MasterInput.form.tab_Master.tpg_01.form.mae_SlipNo.set_format("@@@@@@@@-@@@@");
				}else{
					this.div_MasterInput.form.tab_Master.tpg_01.form.mae_SlipNo.set_format("@@@@@@-@@@@");
				}
			}
		
		
		
			//[업무] 데이터셋 설정 - 데이터셋 초기화, 조회조건 설정
			this.ds_Detail10.clearData();
			this.ds_Input.clearData();
			
			this.ds_Input.addRow();
			this.ds_Input.setColumn(0, "ACCH_NO", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_NO"));
			this.ds_Input.setColumn(0, "WOFH_SQ", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "WOFH_SQ"));
			this.ds_Input.setColumn(0, "PRGM_ID", this.fvComPrgmId);
					
			//[공통]서비스정보 초기화
			this.gfn_InitComService(this);
			
			//[공통]서비스정보 추가
			var svcAddObj = new Object();//[공통] 서비스 추가 파라메타 정보 Object
			svcAddObj.sSelectSql = "fa:M_FA_1000_D_SL10";
			this.gfn_AddComSearchService(this, svcAddObj);

			//[공통]서비스 호출 변수
			var svcCallObj = new Object();//[공통] 서비스 파라메타 정보 Object
			svcCallObj.sTrid = "DTL_SEARCH";//Transaction ID 등 callback에서 넘겨 받을 String을 지정
			svcCallObj.sActionName = this.G_SV_FA;//서버에서 호출할 Action - 모듈별로 호출되는 기본 Actio이 다름 : 공통 서비스 Action 업무구분  변수 참조
			svcCallObj.sInputDaset = "ds_Input=ds_Input" //입력 데이터셋
			svcCallObj.sOutDatset = "ds_Detail10=ds_Detail10";//출력 데이터셋
			svcCallObj.sOtherArg = "";//서버로 전송할 기타 Argument 정보 문자열, 예) key=value key2=value2
			svcCallObj.sCallBackFnc = "fn_Callback";//서버에서 처리가 완료된 후 Callback 받을 Function 명

			//[공통]서비스 호출
			this.gfn_CallComService(this, svcCallObj);		
		}
		//발의구분에 따라 지급/입금
		this.fn_cbo_AcchGu(this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_GU"), false);

	}
	 
	//trace("ds_Master10_onrowposchanged end");
	 
};





/*---------------------------------------------------------------------------------------------
 *    02. [데이터셋-ds_Master10] Row 변경전 이벤트
  ---------------------------------------------------------------------------------------------*/
this.ds_Master10_canrowposchange = function(obj:nexacro.NormalDataset,e:nexacro.DSRowPosChangeEventInfo)
{
	//trace("ds_Master10_canrowposchange start");
	if (!this.fvDsRowPosChange) return;//Row변경이벤트 수행유무


	//데이터 변경여부 체크
	if (this.gfn_DsIsUpdated(this.ds_Master10) || this.gfn_DsIsUpdated(this.ds_Detail10)) {
		this.gfn_Confirm("SM003", "", "CONF.MAST_CHANGE", "fn_MsgCallback");//변경된 내역을 저장 하시겠습니까?

		return false;
	}	

	
	
	//trace("ds_Master10_canrowposchange end");
	return true;
};  

/*---------------------------------------------------------------------------------------------
 *    03. [데이터셋-ds_Master10] 컬럼 변경 전 이벤트
  ---------------------------------------------------------------------------------------------*/
this.ds_Master10_cancolumnchange = function(obj:nexacro.NormalDataset,e:nexacro.DSColChangeEventInfo)
{

	//trace("ds_Master10_cancolumnchange = ");
	//[월마감제어-등록/수정]
	if (e.columnid == "ACCH_DD") {
		var sBUDG_MM = "";//마감년월
		
		if (!this.gfn_IsNull(this.fvMmCloseDay)) {
			sBUDG_MM = this.gfn_Nvl(this.fvMmCloseDay, "");//마감년월
		} else {
			sBUDG_MM = this.gfn_Nvl(e.newvalue, "");//마감년월
		}
		this.fvMmCloseDay = "";

        var sACUM_CD = this.div_MasterInput.form.tab_Master.tpg_01.form.edt_AcumCd.value;

		//마감여부 체크
		var paramObj= new Object();//[공통] 예산통제체크 파라메타 정보 Object
		var mgasDst  = "C";//[필수] 마감구분 - C: 마감여부, A: 회계마감여부 
		
		
		//수정권한이 있는 부서인 경우 마감이 되었어도 회계마감만 아니면 처리 되게 한다.
		var findRow = this.ds_Fa100.findRowExpr("CODM_CD=='"+this.gfn_GetSessionValue("DEPM_CD")+"'");
		if(findRow > -1){
			mgasDst = "A";
		}
	
		
		paramObj.MGAS_MM = sBUDG_MM.substr(0,6);//마감년월
		paramObj.MODM_CD = "FA";//[필수] 모듈구분(공통코드-CA910(마감구분) 참조) : CC - 예산편성확정 마감여부, CB - 예산마감 여부
//		paramObj.ACUM_CD = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACUM_CD");//[선택] 회계단위
        paramObj.ACUM_CD  = sACUM_CD;//[선택] 회계단위
		paramObj.BUSM_CD  = "";//[선택] 사업부문
		paramObj.SAUM_CD  = "";//[선택] 사업장코드
		paramObj.DEPM_CD  = "";//[선택] 부서코드
		paramObj.MODD_CD  = "";//[선택] 모듈상세구분(CA900)
		paramObj.BFPR_YN  = "Y";//[선택] 마감전 프로세스여부
		
		var bCheck = this.gfn_CheckMgas(paramObj, mgasDst);//마감여부 체크		

		//월마감된 경우
		if (bCheck) {
			this.gfn_Alert("CA025");//해당월의 정보가 마감이 되어서 등록/수정 할 수 없습니다.
			
			var sOrgDate = this.ds_Master10.getOrgColumn(this.ds_Master10.rowposition, "ACCH_DD");//변경전값 

			//변경전값이 없을경우
			if (this.gfn_IsNull(sOrgDate)) {				
				var sToDay = this.gfn_GetCommDate("toDay");//현재일자
				if (sBUDG_MM.substr(0,6) == sToDay.substr(0,6)) {
					this.ds_Master10.setColumn(this.ds_Master10.rowposition, "ACCH_DD", "");//입력날짜가 마감된경우 오늘날짜로 세팅	

				} else {
					this.ds_Master10.setColumn(this.ds_Master10.rowposition, "ACCH_DD", sToDay);//입력날짜가 마감된경우 오늘날짜로 세팅

				}
			} else {
				this.ds_Master10.setColumn(this.ds_Master10.rowposition, "ACCH_DD", sOrgDate);//입력날짜가 마감된경우 변경전 값으로 세팅

			}
			
			return false;
		} else {
			return true;
		}

	}
};


/*---------------------------------------------------------------------------------------------
 *    02. [데이터셋-ds_Master10] 컬럼변경 이벤트
  ---------------------------------------------------------------------------------------------*/
this.ds_Master10_oncolumnchanged = function(obj:nexacro.NormalDataset,e:nexacro.DSColChangeEventInfo)
{
	//trace("ds_Master10_oncolumnchanged start");
	if(e.columnid == "PACS_CD"){
		//trace("ds_Master10_oncolumnchanged PACS_CD");
		//거래처계좌 filter
		var sCusmCd = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "PACS_CD");
		var sAcchGu = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_GU"); //발의구분
		
		if(sAcchGu == "1"){
			sCusmCd = "ACNO";
		}
		
		this.ds_SdCbabFull.filter("");
		this.ds_SdCbabFull.filter("CUSM_CD == '" + sCusmCd + "' || COMM_CD == 'XX'");	
		//this.ds_SdCbabFull.filter("CUSM_CD == '" + sCusmCd + "'");	
		this.ds_SdCbabFull.set_keystring( "S:-CBAB_YN" );

		//첫줄 선택
		if ( this.ds_Master10.getColumn(this.ds_Master10.rowposition, "PACS_GU")=="0030"){
			//지급구분이 계좌인경우에만 적용
			this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PaacNo.set_index(0);
			this.ds_Master10.setColumn(this.ds_Master10.rowposition,  "PABA_CD",  this.ds_SdCbabFull.getColumn(0, "BANM_CD"));
			this.ds_Master10.setColumn(this.ds_Master10.rowposition,  "PABA_NM",  this.ds_SdCbabFull.getColumn(0, "BANM_NM"));
			this.ds_Master10.setColumn(this.ds_Master10.rowposition,  "PAAC_NO",  this.ds_SdCbabFull.getColumn(0, "ACNM_NO"));
		}else{
			
			this.ds_Master10.setColumn(this.ds_Master10.rowposition,  "PABA_CD",  "");
			this.ds_Master10.setColumn(this.ds_Master10.rowposition,  "PABA_NM",  "");
			this.ds_Master10.setColumn(this.ds_Master10.rowposition,  "PAAC_NO",  "");
		}
		
	}else if(e.columnid == "PAAC_NO"){
		//
		//trace("ds_Master10_oncolumnchanged PAAC_NO = " + e.newvalue);
		//var nRow = this.ds_SdCbabFull.findRowExpr("ACNM_NO =='" + e.newvalue + "' || COMM_CD == 'XX'");
		var nRow = this.ds_SdCbabFull.findRowExpr("ACNM_NO =='" + e.newvalue + "'");
		
		//trace("ds_Master10_oncolumnchanged PAAC_NO nRow = " + nRow);
		//this.ds_Master10.setColumn(this.ds_Master10.rowposition,  "ACNO_GU",  this.ds_SdCbabFull.getColumn(nRow, "ACNO_GU"));
		this.ds_Master10.setColumn(this.ds_Master10.rowposition,  "PABA_CD",  this.ds_SdCbabFull.getColumn(nRow, "BANM_CD"));
		this.ds_Master10.setColumn(this.ds_Master10.rowposition,  "PABA_NM",  this.ds_SdCbabFull.getColumn(nRow, "BANM_NM"));
		this.ds_Master10.setColumn(this.ds_Master10.rowposition,  "PAAC_NO",  this.ds_SdCbabFull.getColumn(nRow, "ACNM_NO"));
	}else if(e.columnid == "ACUM_CD"){
	
		//일반콤보다시 조회
		//this.fn_ComboSearch();
		
		var sAcchGu = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_GU"); //발의구분
		var sCusmCd = "";
		if(sAcchGu == "1"){
			sCusmCd = "ACNO";
		}else if(sAcchGu == "2"){
			//trace("sAcchGu 1 = " + sAcchGu);
		    sCusmCd = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "PACS_CD");
		}else{
			sCusmCd = "";
		}
		
		//trace("sCusmCd 1 = " + sCusmCd);
		this.ds_SdCbabFull.filter("");
		//this.ds_SdCbabFull.filter("CUSM_CD == '" +sCusmCd+ "' || COMM_CD == 'XX'");	
		this.ds_SdCbabFull.filter("CUSM_CD == '" +sCusmCd+ "'");	
		this.ds_SdCbabFull.set_keystring( "S:-CBAB_YN" )
		
		//지급구분이 계좌번호인경우에만 적용
		if ( this.ds_Master10.getColumn(this.ds_Master10.rowposition, "PACS_GU")=="0030"){
			this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PaacNo.set_index(0);	
			this.ds_Master10.setColumn(this.ds_Master10.rowposition,  "PABA_CD",  this.ds_SdCbabFull.getColumn(nRow, "BANM_CD"));
			this.ds_Master10.setColumn(this.ds_Master10.rowposition,  "PABA_NM",  this.ds_SdCbabFull.getColumn(nRow, "BANM_NM"));
			this.ds_Master10.setColumn(this.ds_Master10.rowposition,  "PAAC_NO",  this.ds_SdCbabFull.getColumn(nRow, "ACNM_NO"));
		}else{
		
			this.ds_Master10.setColumn(this.ds_Master10.rowposition,  "PABA_CD",  "");
			this.ds_Master10.setColumn(this.ds_Master10.rowposition,  "PABA_NM",  "");
			this.ds_Master10.setColumn(this.ds_Master10.rowposition,  "PAAC_NO",  "");
		}
	
	}else if(e.columnid == "ACCH_GU"){
	
		this.ds_SdCbabFull.filter("");
		this.ds_SdCbabFull.filter("CUSM_CD == '" + "ACNO"+ "' || COMM_CD == 'XX'");	
		//this.ds_SdCbabFull.filter("CUSM_CD == '" + "ACNO"+ "'");	
		this.ds_SdCbabFull.set_keystring( "S:-CBAB_YN" )
		
		
		// 지급구분이 계좌번호인경우에만 적용
		if ( this.ds_Master10.getColumn(this.ds_Master10.rowposition, "PACS_GU")=="0030"){
		
			this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PaacNo.set_index(0);	
			this.ds_Master10.setColumn(this.ds_Master10.rowposition,  "PABA_CD",  this.ds_SdCbabFull.getColumn(nRow, "BANM_CD"));
			this.ds_Master10.setColumn(this.ds_Master10.rowposition,  "PABA_NM",  this.ds_SdCbabFull.getColumn(nRow, "BANM_NM"));
			this.ds_Master10.setColumn(this.ds_Master10.rowposition,  "PAAC_NO",  this.ds_SdCbabFull.getColumn(nRow, "ACNM_NO"));
		}else{
		
			this.ds_Master10.setColumn(this.ds_Master10.rowposition,  "PABA_CD",  "");
			this.ds_Master10.setColumn(this.ds_Master10.rowposition,  "PABA_NM",  "");
			this.ds_Master10.setColumn(this.ds_Master10.rowposition,  "PAAC_NO",  "");
		}
	
	}else if(e.columnid == "DEPM_CD"){
		//발의부서 변경시 예산부서도 같이 변경한다.
// 		for (var iLoop=0; iLoop<this.ds_Detail10.getRowCount(); iLoop++) {
// 			this.ds_Detail10.set_rowposition(iLoop);
// 			this.ds_Detail10.setColumn(iLoop, "BUDP_CD", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "DEPM_CD"));
// 			this.ds_Detail10.setColumn(iLoop, "BUDP_NM", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "DEPM_NM"));
// 		}
	}else if(e.columnid == "DEPM_NM"){
		//발의부서 변경시 예산부서도 같이 변경한다.
		for (var iLoop=0; iLoop<this.ds_Detail10.getRowCount(); iLoop++) {
		
			this.ds_Detail10.set_rowposition(iLoop);
			
			var sACOM_CD = this.ds_Detail10.getColumn(iLoop, "ACOM_CD");
			var sBUDG_MM = this.ds_Detail10.getColumn(iLoop, "BUDG_MM");
			var sBUDP_CD = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "DEPM_CD");
			
			
			var paramObj= new Object();//[공통] 예산통제체크 파라메타 정보 Object
			paramObj.ACOM_CD = sACOM_CD;//계정코드
			paramObj.BUGS_YM = sBUDG_MM;//편성년도
			paramObj.BUDP_CD = sBUDP_CD;//편성부서
			
			bCheckBugs = this.gfn_CheckBugs(paramObj);//예산편성계정여부 체크
		
			//trace(""palmCd 612 = " );
			//예산 업데이트 여부
			if(bCheckBugs){
				this.ds_Detail10.setColumn(iLoop, "BUGS_YN", "Y");//예산통제여부
			}else{
				this.ds_Detail10.setColumn(iLoop, "BUGS_YN", "N");//예산통제여부
			}
		
		
			this.ds_Detail10.setColumn(iLoop, "BUDP_CD", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "DEPM_CD"));
			this.ds_Detail10.setColumn(iLoop, "BUDP_NM", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "DEPM_NM"));
			
			
			
		}
	}
	//trace("ds_Master10_oncolumnchanged end");
};



/***********************************************************************************************
 * 02.MG0.01. [Master그리드-버튼] 복사 클릭 이벤트
 ***********************************************************************************************/
this.fn_MasterGrd01Copy = function()
{
};

/***********************************************************************************************
 * 02.MG0.02. [Master그리드-버튼] 행추가 클릭 이벤트
 ***********************************************************************************************/
this.fn_MasterGrd01AddRow = function()
{
};

/***********************************************************************************************
 * 02.MG0.03. [Master그리드-버튼] 행삽입 클릭 이벤트
 ***********************************************************************************************/
this.fn_MasterGrd01InsertRow = function()
{
};

/***********************************************************************************************
 * 02.MG0.04. [Master그리드-버튼] 행삭제 클릭 이벤트
 ***********************************************************************************************/
this.fn_MasterGrd01DeleteRow = function()
{
};

/***********************************************************************************************
 * 02.MG0.05. [Master그리드-버튼] 취소 클릭 이벤트
 ***********************************************************************************************/
this.fn_MasterGrd01Cancel = function()
{
};
 
/***********************************************************************************************
 * 02.MG0.06. [Master그리드] 셀 클릭 이벤트
 ***********************************************************************************************/ 
 
 
this.div_MasterView_grd_Master10_oncellclick = function(obj:nexacro.Grid,e:nexacro.GridClickEventInfo)
{
	//그리드 콤보 및 캘린더 클릭시 펼치기
	obj.dropdownCombo();
	obj.dropdownCalendar();
	
	
	//trace(e.col)
	 
	 //B_REMK_01
// 	if (e.col == 6) {
// 	   //내용요약
// 		if (!this.gfn_IsNull(this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_NM"))) {
// 			var sPopupId = "B_REMK_01";//팝업ID - 비고상세
// 			var sTitle = "내용요약";//팝업 타이틀
// 			var oArg = {  Remk:this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_NM")};//Argument처리
// 			this.gfn_RemkPop(sPopupId, sTitle, oArg);		
// 		}  
// 	} else 
    if (e.col == 28){
		//발의내용
		if (!this.gfn_IsNull(this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACRE_NM"))) {
			var sPopupId = "B_REMK_01";//팝업ID - 비고상세
			var sTitle = "발의내용";//팝업 타이틀
			var oArg = {  Remk:this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACRE_NM")};//Argument처리
			this.gfn_RemkPop(sPopupId, sTitle, oArg);		
		}
	} 
};

 
 
/***********************************************************************************************
 * 02.MG0.07. [Master 데이터셋] 변경 이벤트
 ***********************************************************************************************/
 
/***********************************************************************************************
 * 02.DF0.01. [Detail Freeform 공통] 입력항목 클릭/변경 이벤트
 ***********************************************************************************************/
/***********************************************************************************************
 * 02.DF0.02. [Detail Freeform 일반] 입력항목 클릭/변경 이벤트
 ***********************************************************************************************/
/***********************************************************************************************
 *    01. [예산부서]
 ***********************************************************************************************/
this.div_DetailInput_div_detailRight_div_Budget_edt_BudgetDeptCd_onchanged = function(obj:nexacro.Edit,e:nexacro.ChangeEventInfo)
{
	var sPopupId = "M_DEPM_CD_01";//팝업ID - 부서코드
	this.gfn_GetCommDepm("C", this.div_DetailInput.form.div_detailRight.form.div_Budget.form.edt_BudgetDeptCd, this.div_DetailInput.form.div_detailRight.form.div_Budget.form.edt_BudgetDeptNm, sPopupId);//코드로 검색

};

 /***********************************************************************************************
 *    05. [예산부서] - 부서찾기 버튼 클릭
 ***********************************************************************************************/
this.div_DetailInput_div_detailRight_div_Budget_btn_BudgetDept_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	//예산 - 예산부서
	var sPopupId = "B_SDDP_CD_01";//팝업ID - 예산부서
	var oArg = { DepmNm:this.div_DetailInput.form.div_detailRight.form.div_Budget.form.edt_BudgetDeptCd.value };//Argument처리
	this.gfn_DeptPop(sPopupId, oArg);

};
 
 


/***********************************************************************************************
 * 02.DG0.01. [Detail그리드-버튼] 복사 클릭 이벤트
 ***********************************************************************************************/
this.fn_DetailGrd01Copy = function()
{

	//선택된 Row
	var arrRows = this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10.getSelectedRows();
	var iAddRow = 0;
	
	for (var iLoop=0; iLoop < arrRows.length; iLoop++) {
		iAddRow = this.ds_Detail10.addRow();
		this.ds_Detail10.copyRow(iAddRow, this.ds_Detail10, arrRows[iLoop]);
		
		this.ds_Detail10.setColumn(iAddRow, "ACCB_SE", "");
		
		
		
		
		//for (var iRowNum =0; iRowNum < this.ds_Detail10.getRowCount(); iRowNum++) {
		this.fvNumS = this.fvNumS + 1;
		this.ds_Detail10.setColumn(iAddRow, "NUMB_SE", this.fvNumS);
		//}
		
		
		
		
		
		//금액 0 으로 세팅
		this.ds_Detail10.setColumn(iAddRow, "DEBI_AM", "0");
		this.ds_Detail10.setColumn(iAddRow, "CRED_AM", "0");
		
		this.ds_Detail10.setColumn(iAddRow, "crudType", "I");
		
		//관리항목복사
		this.f_ItemCopy(iAddRow);
		
		
		
		//예산체크
		this.dsAcomMaSetYn = "";
		//trace("this.dsAcomMaSetYn =" + this.dsAcomMaSetYn );
		this.fn_CommAcomCallbackFunc();

	}
	
	
	//줄 변경시 관리항목 리스트만 조회
	
	var bCheckBgcm = false;//예산편성계정여부
	var acomCd = this.ds_Detail10.getColumn(iAddRow, "ACOM_CD");
	
	//trace("acomCd = " + acomCd);
	
	//this.fn_dsAcomMa(this.ds_Detail10.getColumn(iAddRow, "ACOM_CD"), "", bCheckBgcm);

};

/***********************************************************************************************
 * 02.DG0.02. [Detail그리드-버튼] 행추가 클릭 이벤트
 ***********************************************************************************************/
this.fn_DetailGrd01AddRow = function()
{

	//trace("getMax = " +  nexacro.toNumber(this.ds_Detail10.getMax("NUMB_SE")));


	var iAddRow = this.gfn_GridInsertProcess(this, this.ds_Detail10);//crud_flag 변경-입력(I)

	this.ds_Detail10.setColumn(iAddRow, "COMM_CD", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "COMM_CD"));
	this.ds_Detail10.setColumn(iAddRow, "ACCH_NO", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_NO"));
	this.ds_Detail10.setColumn(iAddRow, "WOFH_SQ", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "WOFH_SQ"));
	this.ds_Detail10.setColumn(iAddRow, "ACUM_CD", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACUM_CD"));
	
	//for (var iRowNum =0; iRowNum < this.ds_Detail10.getRowCount(); iRowNum++) {
	this.fvNumS = this.fvNumS + 1;
	this.ds_Detail10.setColumn(iAddRow, "NUMB_SE", this.fvNumS);
	//}
		
		
// 	var sNumbSe = this.ds_Detail10.getMax("NUMB_SE");
// 	if(this.gfn_IsNull(sNumbSe) || sNumbSe==""){
// 		sNumbSe = "0";
// 	}
// 	
// 	this.ds_Detail10.setColumn(iAddRow, "NUMB_SE", sNumbSe+"1");  // 디폴트 차변으로 설정
	
	//편성월
	//trace(this.div_MasterInput.form.tab_Master.tpg_01.form.cal_AcchDd.value.substring(0, 6));
	this.ds_Detail10.setColumn(iAddRow, "BUDG_MM", this.div_MasterInput.form.tab_Master.tpg_01.form.cal_AcchDd.value.substring(0, 6));  // 디폴트 차변으로 설정
	
	//화폐 defalut  krw
	this.ds_Detail10.setColumn(iAddRow, "CURR_CD","0090");  // 디폴트 KRW
	//환율 
	this.ds_Detail10.setColumn(iAddRow, "EXCH_RT", 1);  // 환율 1
	//예산부서
	this.ds_Detail10.setColumn(iAddRow, "BUDP_CD", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "DEPM_CD")); 
	this.ds_Detail10.setColumn(iAddRow, "BUDP_NM", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "DEPM_NM"));  
	//차/대금액
	this.ds_Detail10.setColumn(iAddRow, "CRED_AM", 0);//차변금액	
	this.ds_Detail10.setColumn(iAddRow, "DEBI_AM", 0);//대변금액	
	//결의승인여부
	this.ds_Detail10.setColumn(iAddRow, "SLIP_YN", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "SLIP_YN"));
	this.ds_Detail10.setColumn(iAddRow, "DECR_GU", "D");  // 디폴트 차변으로 설정
	
	//차대구분에 따라 필수 체크표시
	this.fn_DecrGuCssclass("D");
	//this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10.setCellProperty("head", 9, "cssclass", "essential");
	//this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10.setCellProperty("head", 10, "cssclass", "");
	

};

/***********************************************************************************************
 * 02.DG0.03. [Detail그리드-버튼] 행삽입 클릭 이벤트
 ***********************************************************************************************/
this.fn_DetailGrd01InsertRow = function()
{
	//trace("getMax = " +  nexacro.toNumber(this.ds_Detail10.getMax("NUMB_SE")));
	
	
	var iAddRow = this.gfn_GridInsertionProcess(this, this.ds_Detail10);//crud_flag 변경-입력(I)	
	this.ds_Detail10.setColumn(iAddRow, "COMM_CD", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "COMM_CD"));
	this.ds_Detail10.setColumn(iAddRow, "ACCH_NO", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_NO"));
	this.ds_Detail10.setColumn(iAddRow, "WOFH_SQ", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "WOFH_SQ"));
	this.ds_Detail10.setColumn(iAddRow, "ACUM_CD", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACUM_CD"));
	
	//for (var iRowNum =0; iRowNum < this.ds_Detail10.getRowCount(); iRowNum++) {
	this.fvNumS = this.fvNumS + 1;
	this.ds_Detail10.setColumn(iAddRow, "NUMB_SE", this.fvNumS);
	//}
// 	var sNumbSe = this.ds_Detail10.getMax("NUMB_SE");
// 	if(this.gfn_IsNull(sNumbSe) || sNumbSe==""){
// 		sNumbSe = "0";
// 	}
// 	
// 	this.ds_Detail10.setColumn(iAddRow, "NUMB_SE", sNumbSe+"1");  // 디폴트 차변으로 설정
	
	
	//편성월
	//trace(this.div_MasterInput.form.tab_Master.tpg_01.form.cal_AcchDd.value.substring(0, 6));
	this.ds_Detail10.setColumn(iAddRow, "BUDG_MM", this.div_MasterInput.form.tab_Master.tpg_01.form.cal_AcchDd.value.substring(0, 6));  // 디폴트 차변으로 설정
	
	//화폐 defalut  krw
	this.ds_Detail10.setColumn(iAddRow, "CURR_CD","0090");  // 디폴트 KRW
	//환율 
	this.ds_Detail10.setColumn(iAddRow, "EXCH_RT", 1);  // 환율 1
	//예산부서
	this.ds_Detail10.setColumn(iAddRow, "BUDP_CD", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "DEPM_CD")); 
	this.ds_Detail10.setColumn(iAddRow, "BUDP_NM", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "DEPM_NM"));   
	//차/대금액
	this.ds_Detail10.setColumn(iAddRow, "CRED_AM", 0);//차변금액	
	this.ds_Detail10.setColumn(iAddRow, "DEBI_AM", 0);//대변금액
	//결의승인여부
	this.ds_Detail10.setColumn(iAddRow, "SLIP_YN", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "SLIP_YN"));
	this.ds_Detail10.setColumn(iAddRow, "DECR_GU", "D");

};


/***********************************************************************************************
 * 02.DG0.04. [Detail그리드-버튼] 행삭제 클릭 이벤트
 ***********************************************************************************************/
this.fn_DetailGrd01DeleteRow = function()
{
	this.gfn_GridDelProcess(this, this.ds_Detail10);//crud_flag 변경-삭제(D)
	//master 금액에 차변금액합 넣기
	this.fn_AcchAmt();

	if (this.ds_Detail10.getRowCount() > 0) {
		this.ds_Detail10.set_rowposition(-1);
		this.ds_Detail10.set_rowposition(0);
	}
};

/***********************************************************************************************
 * 02.DG0.05. [Detail그리드-버튼] 취소 클릭 이벤트
 ***********************************************************************************************/
this.fn_DetailGrd01Cancel = function()
{
	this.gfn_UndoColumn(this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10);
};
 
/***********************************************************************************************
 * 02.DG0.06. [Detail그리드] 셀 클릭 이벤트
 ***********************************************************************************************/ 
/*---------------------------------------------------------------------------------------------
 *    01. [그리드-grd_Detail10] 셀클릭 이벤트
  ---------------------------------------------------------------------------------------------*/
this.div_DetailInput_tab_Detail_tpg_01_grd_Detail10_oncellclick = function(obj:nexacro.Grid,e:nexacro.GridClickEventInfo)
{

	
		 
	//그리드 콤보 및 캘린더 클릭시 펼치기
	obj.dropdownCombo();
	obj.dropdownCalendar();
		 
		 
	var sCONF_YN = this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "CONF_YN");//마감여부

	//마감되었으면 팝업호출 안됨.
	if (sCONF_YN == "1" && e.col != 12) {
		return;
	}
	 
	if (e.col == 6) {
		//결재진행상태가 아닌경우
		if (!this.fvWofhStatus) {
		    //계정
		    var sAcomEnable = this.ds_Detail10.getColumn(e.row, "ACOM_ENABLE")
			if(sAcomEnable != "0"){
				var sPopupId = "S_ACOM_CD_01";//팝업ID - 계정코드
				var oArg = { AcomNm:this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "ACOM_CD")};//Argument처리
				this.gfn_AcomPop(sPopupId, oArg); 
	
			}else{
				//FA018 자동입력된 계정입니다 수정 할 수 없습니다.
				this.gfn_Alert("FA018");//자동입력된 계정입니다 수정 할 수 없습니다.
                return;
			}
		}
	} else if (e.col == 9){
		//결재진행상태가 아닌경우
		if (!this.fvWofhStatus) {
			//손익
			var sPopupId = "B_PALM_CD_01";//팝업ID - 손익코드
			var oArg = { PalmCd:"", PalmNm:"" };//Argument처리
			this.gfn_PalmPop(sPopupId, oArg);
		}
	} else if (e.col == 12){
// 		//적요
// 		if (!this.gfn_IsNull(this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "REMK_NM"))) {
// 			var sPopupId = "B_REMK_01";//팝업ID - 비고상세
// 			var sTitle = "적요";//팝업 타이틀
// 			var oArg = {  Remk:this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "REMK_NM")};//Argument처리
// 			this.gfn_RemkPop(sPopupId, sTitle, oArg);		
// 		}
	} else if (e.col == 14){
		//결재진행상태가 아닌경우
		if (!this.fvWofhStatus) {
			//예산부서 BUDP_NM
			var sPopupId = "B_DEPM_CD_01";//팝업ID - 부서코드
			var oArg = { BudpNm:""};  // Argument처리
			this.gfn_DeptPop(sPopupId, oArg);
		}
	}
	
	
	
	/*
	//발의부서
	if (e.col == 8) {
		var sPopupId = "B_DEPM_CD_01";//팝업ID - 부서코드
		var oArg = { DepmNm:""};  // Argument처리
		this.gfn_DeptPop(sPopupId, oArg);
	//발의자
	} else if (e.col == 11) {
		var sPopupId = "B_SYST_ID_01";//팝업ID - 사용자정보
		var oArg = {  EmpmNm:""};//Argument처리
		this.gfn_UserPop(sPopupId, oArg);		
	//영업부서
	} else if (e.col == 14) {	
		var sPopupId = "B_SDDP_CD_01";//팝업ID - 부서코드
		var oArg = { DepmNm:"" };//Argument처리
		this.gfn_DeptPop(sPopupId, oArg);		
	//영업자
	} else if (e.col == 17) {	
		var sPopupId = "B_SDSU_ID_01";//팝업ID - 사용자정보
		var oArg = {  EmpmNm:""};//Argument처리
		this.gfn_UserPop(sPopupId, oArg);		
	//계약번호
	} else if (e.col == 20) {		
		var sPopupId = "B_CNTH_NO_01";//팝업ID - 계약정보
		var oArg = { CnthNo:"", PrgmId:"M_SD_3100" };//Argument처리
		this.gfn_ContPop(sPopupId, oArg);		
	//거래처
	} else if (e.col == 23) {	
		var sPopupId = "B_CUSM_CD_01";//팝업ID - 거래처정보
		var oArg = { paramCode:"", paramNm:"" };//Argument처리
		this.gfn_CusmPop(sPopupId, oArg);		
	//이전계약번호
	} else if (e.col == 26) {		
		var sPopupId = "B_BFCT_NO_01";//팝업ID - 계약정보
		var oArg = { CnthNo:"", PrgmId:"M_SD_3100" };//Argument처리
		this.gfn_ContPop(sPopupId, oArg);				
	//프로젝트
	} else if (e.col == 31) {		
		var sPopupId = "B_PJTH_NO_01";//팝업ID - 프로젝트정보
		var oArg = { PjthNm:"", PrgmId:"M_SD_3100"};//Argument처리
		this.gfn_PjthPop(sPopupId, oArg);	
	//고객
	} else if (e.col == 35) {	
		var sPopupId = "B_CSPM_CD_01";//팝업ID - 고객정보
		var oArg = { CspmNm:""};//Argument처리
		this.gfn_CustUserPop(sPopupId, oArg);		
	//품목코드
	} else if (e.col == 39) {	
		var sPopupId = "B_ITEM_CD_01";//팝업ID - 품목정보
		var oArg = { ItemCd:"", ItemNm:"" };//Argument처리
		this.gfn_ItemPop(sPopupId, oArg);		
	//비고상세
	} else if (e.col == 45) {		
		if (!this.gfn_IsNull(this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "REMK_NM"))) {
			var sPopupId = "B_REMK_01";//팝업ID - 비고상세
			var sTitle = "발의상세 비고";//팝업 타이틀
			var oArg = {  Remk:this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "REMK_NM")};//Argument처리
			this.gfn_RemkPop(sPopupId, sTitle, oArg);		
		}
	//첨부파일
	} else if (e.col == 46) {	
		var sPopupId = "B_FILE_01";//팝업ID - 파일정보
		var oArg = { AUTH_YN:"Y"  //권한유무: Y-저장권한, N-조회권한
				   , PRGM_ID:this.fvComPrgmId //프로그램ID
				   , FILH_GU:"B" //첨부파일위치구분 : H-Head, B-상세(그리드Row), E-기타
				   , PATH_NM:this.fvPathNm //업무파일경로
				   , PK01_NO:this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "COMM_CD") //PK번호1-회사코드
				   , PK02_NO:this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "ACCH_NO") //PK번호2-발의번호
				   , PK03_NO:this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "WOFH_SQ") //PK번호3-결재차수
				   , PK04_NO:this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "TEMB_SE") //PK번호4-발의순번
				   , PK05_NO:"" //PK번호5
				   , PK06_NO:"" //PK번호6
				   , PK07_NO:"" //PK번호7
				   , PK08_NO:"" //PK번호8
				   , PK09_NO:"" //PK번호9
				   , PK10_NO:"" //PK번호10
				   };//Argument처리
		this.gfn_FilePop(sPopupId, oArg);		
	}
	*/
};
/***********************************************************************************************
 *    01. [그리드-grd_Detail10] enterkey 이벤트
 ***********************************************************************************************/ 
this.div_DetailInput_tab_Detail_tpg_01_grd_Detail10_onenterdown = function(obj:nexacro.Grid,e:nexacro.GridEditEventInfo)
{
	//trace("1");
	obj.moveToNextCell();
};


/***********************************************************************************************
 *    02. [그리드-grd_Detail10] onsetFocus 이벤트
 ***********************************************************************************************/ 
this.div_DetailInput_tab_Detail_tpg_01_grd_Detail10_onsetfocus = function(obj:nexacro.Grid,e:nexacro.SetFocusEventInfo)
{
    //행추가 버튼 활성화 상태에서만 줄추가 시킨다.
	//race("this.div_DetailInput.form.div_ComGrdBtn.enable = " + this.div_DetailInput.form.div_ComGrdBtn.enable);
	if(!this.div_DetailInput.form.div_ComGrdBtn.enable){
		return;
	}
	//rowcount  = 0 일때 onsetfocus 이면 행 추가 해준다.
	if(this.ds_Detail10.rowcount == 0){
		//ds_Detail add Row
		this.fn_DetailGrd01AddRow();
	}
};
/***********************************************************************************************
 *    03. [그리드-grd_Detail10] onnodataareadblclick 이벤트
 ***********************************************************************************************/
this.div_DetailInput_tab_Detail_tpg_01_grd_Detail10_onnodataareadblclick = function(obj:nexacro.Grid,e:nexacro.MouseEventInfo)
{
	//행추가 버튼 활성화 상태에서만 줄추가 시킨다.
	//trace("this.div_DetailInput.form.div_ComGrdBtn.enable 1= " + this.div_DetailInput.form.div_ComGrdBtn.enable);
	if(!this.div_DetailInput.form.div_ComGrdBtn.enable){
		return;
	}
	
	//add row
	this.fn_DetailGrd01AddRow();
};


/***********************************************************************************************
 * 02.DG0.07. [Detail 데이터셋] 변경 이벤트
 ***********************************************************************************************/
/*---------------------------------------------------------------------------------------------
 *    01. [데이터셋-ds_Detail10] 데이터변경 이벤트
  ---------------------------------------------------------------------------------------------*/  
this.ds_Detail10_oncolumnchanged = function(obj:nexacro.NormalDataset,e:nexacro.DSColChangeEventInfo)
{
	//trace(""ds_Detail10_oncolumnchanged start");
	
	

	this.eventEdSRowPosChangeEventInfo="e";
	var sDecrGu="";
	//trace("===============this.ds_Detail10_oncolumnchanged1================" + e.columnid);
	if (!this.fvDsRowPosChangeDetail) return;//반제전표에서 가져올때는 이벤트를 타지않게한다
	
	//trace("===============this.ds_Detail10_oncolumnchanged2================" + e.columnid);
	var bCheckBgcm = false;//예산편성계정여부

	this.gfn_GridUpdateProcess(this, obj, e);//crudType 변경-수정(U)
	
	
	
	
	 
	//예산부서명
	if(e.columnid == "BUDP_CD"){
		//trace("ds_Detail10_oncolumnchanged BUDP_CD start");
	
		this.fn_GetBudg();//예산통제정보 조회
		//this.gfn_GetCommDepmGrid(obj, "BUDP_CD", "BUDP_NM");//부서명 검색
		
		//trace("ds_Detail10_oncolumnchanged BUDP_CD end");
	} else if(e.columnid == "PALM_NM"){
	
//		
// 		if(this.gfn_IsNull(e.newvalue) || e.newvalue ==""){
// 			this.ds_Detail10.setColumn(e.row, "PALM_CD", "")
// 		}else{
// 			this.gfn_GetCommPalmGrid(obj, "PALM_CD", "PALM_NM");//손익 검색]
// 		}
		

	//대변금액
	} else if(e.columnid == "CRED_AM"){
		//trace(""============================2================================");
		//this.fvColChangeEvent = true;//컬럼변경 이벤트중여부
		this.fvOrgCredAmt = e.oldvalue; // 이전 대변금액
		sDecrGu = this.ds_Detail10.getColumn(e.row, "DECR_GU");

		if(e.newvalue != 0){
			this.ds_Detail10.setColumn(e.row, "DECR_GU", "C");
		}
		

		//master10 HEAD 금액에 차변금액 자동 입력
		this.fn_AcchAmt();
		
		//this.ds_Detail10.set_enableevent(false);
       //trace("this.fvBCalAvailAmt = " + this.fvBCalAvailAmt);
	   if (!this.fvBCalAvailAmt) {
			//trace("===========ds_Detail10_oncolumnchanged CRED_AM  start ")
			this.fn_CalAvailAm();//가용금액 계산
			//trace("===========ds_Detail10_oncolumnchanged CRED_AM  end ")
		}		
		//this.ds_Detail10.set_enableevent(true);
		// event trriger
		
		//관리항목 자동입력
		this.fn_maAutoInput(e.row, "CRED_AM");
		
		
		
		//if(sDecrGu != "C"){
		e.columnid = "DECR_GU";
		e.newvalue = "C";
		e.oldvalue = sDecrGu;

		this.ds_Detail10_oncolumnchanged(obj, e);
		//}
		
	//차변금액    
	} else if(e.columnid == "DEBI_AM"){		
		//this.fvColChangeEvent = true;//컬럼변경 이벤트중여부
		this.fvOrgDebiAmt = e.oldvalue;//이전 차변금액
		sDecrGu = this.ds_Detail10.getColumn(e.row, "DECR_GU");
		
		if(e.newvalue !=  0){
			this.ds_Detail10.setColumn(e.row, "DECR_GU", "D");
		}
		

		
		//this.ds_Detail10.setColumn(e.row, "FRCR_AM", 0);
		
		//trace("dRecAm 편성금액11 = " + this.div_DetailInput.form.div_detailRight.form.div_Budget.form.mae_RecAm.value);
		//trace("this.fvBCalAvailAmt : " + this.fvBCalAvailAmt);
		if (!this.fvBCalAvailAmt) {
			//trace("===========ds_Detail10_oncolumnchanged DEBI_AM  start ")
			this.fn_CalAvailAm();//가용금액 계산
			//trace("===========ds_Detail10_oncolumnchanged DEBI_AM  end ")
		}	

		
		//관리항목 자동입력
		this.fn_maAutoInput(e.row, "DEBI_AM");


		e.columnid = "DECR_GU";
		e.newvalue = "D";
		e.oldvalue = sDecrGu;
		
		this.ds_Detail10_oncolumnchanged(obj, e);
		

		
	} else if(e.columnid == "ACOM_CD"){
	//계정코드
	    //trace("e.columnid = " +  e.newvalue);
		var arrArgs = ["DECR_GU_CHK"
		              , "CTRL_CD"
					  , "ANTI_YN"
					  ];
					  
	    //trace("2222");			  
		this.gfn_GetCommAcomGrid(obj, "ACOM_CD", "ACOM_NM", arrArgs, "fn_CommAcomCallbackFunc"); // 계정명검색	

		
		this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "CURR_CD", "0090");
		this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "EXCH_RT", 1);
		this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "FRDB_AM", 0);
		this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "FRCR_AM", 0);


	//차대구분
	} else if (e.columnid == "DECR_GU"){
		
		//반제계정인경우 차대구분 변경 불가
		   
		//trace("===========3")
		//trace("==================================================0 ");
		//trace("dRecAm 편성금액2-0 = " + this.div_DetailInput.form.div_detailRight.form.div_Budget.form.mae_RecAm.value);
		var sDECR_GU = this.ds_Detail10.getColumn(e.row, "DECR_GU");//차대구분
		var sDECR_GU_CHK = this.ds_Detail10.getColumn(e.row, "DECR_GU_CHK");//차대구분-계정
		var sAntiNo =  this.ds_Detail10.getColumn(e.row, "ANTI_NO");//
		
		
		if(obj.getColumn(e.row, "ANTI_YN") == "1" && (this.gfn_IsNull(sAntiNo) || sAntiNo =="") && sDECR_GU != sDECR_GU_CHK){
	  
			
			//trace("dRecAm 편성금액2-1 = " + this.div_DetailInput.form.div_detailRight.form.div_Budget.form.mae_RecAm.value);
			//this.gfn_Alert("FA022", arrMsgArg);  //반제계정은 차대구분을 변경 할 수 없습니다.
			var sDEcrGuNm = "";
			if(e.newvalue == "D"){
				sDEcrGuNm = "대변";
			}else{
				sDEcrGuNm = "차변";
			}
			
			//trace("sDEcrGuNm = " + sDEcrGuNm);
			var arrMsgArg = [sDEcrGuNm];
			this.gfn_Alert("FA020", arrMsgArg); //반제계정은 [ &ITM0 ] 만 가능합니다. 
			
			
			obj.setColumn(e.row, "DECR_GU", e.oldvalue);
			
			
			

		
			
			
			// D: 차변 일 경우 대변 금액을 지우고
			// C: 대변 일 경우 차변 금액을 지운자.
			//trace("e.newvalue = " + e.newvalue);
			if(e.newvalue =="D"){
				//대변
				//trace("newvalue = " + e.newvalue);
				this.ds_Detail10.setColumn(e.row, "DEBI_AM", 0);
				//this.ds_Detail10.setColumn(e.row, "FRDB_AM", 0);
			}else{
				//차변
				//대변일경우 차변금액을 지운다.
				//trace("newvalue = " + e.newvalue);
				this.ds_Detail10.setColumn(e.row, "CRED_AM", 0);
				//this.ds_Detail10.setColumn(e.row, "FRCR_AM", 0);
			}
			return; 
			
		}
		
		//trace("===========4")
		

		//차대구분에 따라 필수 체크표시
		this.fn_DecrGuCssclass(e.newvalue);
		
		//trace("dRecAm 편성금액2-5 = " + this.div_DetailInput.form.div_detailRight.form.div_Budget.form.mae_RecAm.value);
		
		//관리항목 조회
		//trace("e.oldvalue = " + e.oldvalue + " e.newvalue = " + e.newvalue);
// 		if(e.oldvalue == e.newvalue){
// 			this.fn_dsAcomMa(this.ds_Detail10.getColumn(e.row, "ACOM_CD"), "", bCheckBgcm);	
// 		}else{
// 			
// 			this.ds_Detail10.setColumn(e.row, "EXCH_RT", 0);
// 			this.ds_Detail10.setColumn(e.row, "CURR_CD", "0090");
// 			this.fn_dsAcomMa(this.ds_Detail10.getColumn(e.row, "ACOM_CD"), "SET", bCheckBgcm);
// 		}

		var vFrAm ;
		
		//차대변 변경시 외화금액 위치를 변경한다.
		//대변이면 차변금액을 대변으로
		//차변이면 대변금액을 차변으로
		
		if(e.oldvalue != e.newvalue){
			
			if(e.newvalue =="D"){
				vFrAm = nexacro.toNumber(this.ds_Detail10.getColumn(e.row, "FRCR_AM"));

				this.ds_Detail10.setColumn(e.row, "FRDB_AM", vFrAm);
				this.ds_Detail10.setColumn(e.row, "FRCR_AM", 0);
			}else{
				vFrAm = nexacro.toNumber(this.ds_Detail10.getColumn(e.row, "FRDB_AM"));

				this.ds_Detail10.setColumn(e.row, "FRCR_AM", vFrAm);
				this.ds_Detail10.setColumn(e.row, "FRDB_AM", 0);
			}
		}

		//예산조회
		this.fn_GetBudg();
		if (!this.fvBCalAvailAmt) {
			//trace("===========8")
			this.fn_CalAvailAm();//가용금액 계산
			//trace("===========9")
		}
		
		//trace("===================================");
		//trace("===========5")
		//this.fvColChangeEvent = false;//컬럼변경 이벤트중여부
		
	//편성년월
	} else if(e.columnid == "BUDG_MM"){
		var sACOM_CD = this.ds_Detail10.getColumn(e.row, "ACOM_CD");//계정코드
		var sBUDG_MM = this.gfn_Nvl(this.ds_Detail10.getColumn(e.row, "BUDG_MM"), "");//편성년월
		var sBUDP_CD = this.gfn_Nvl(this.ds_Detail10.getColumn(e.row, "BUDP_CD"), "");//편성부서
	
	
		if (!this.gfn_IsNull(sACOM_CD) && !this.gfn_IsNull(sBUDG_MM)) {
			//[예산통제 계정] 체크
			var paramObj= new Object();//[공통] 예산통제체크 파라메타 정보 Object
			paramObj.BGCM_YY = sBUDG_MM.substr(0, 4);//편성년도
			paramObj.ACOM_CD = sACOM_CD;//계정코드
			bCheckBgcm = this.gfn_CheckBgcm(paramObj);//예산편성계정여부 체크
			
			
			paramObj.BUGS_YM = sBUDG_MM;//편성년도
			paramObj.BUDP_CD = sBUDP_CD;//편성부서
			
			bCheckBugs = this.gfn_CheckBugs(paramObj);//예산편성계정여부 체크
			
			//trace(""=====bCheckBugs  = " + bCheckBugs);
			
			//예산 업데이트 여부
			if(bCheckBugs){
				this.ds_Detail10.setColumn(e.row, "BUGS_YN", "Y");//예산통제여부
			}else{
				this.ds_Detail10.setColumn(e.row, "BUGS_YN", "N");//예산통제여부
			}



			//예산통제계정
			if (bCheckBgcm) {
			
				//마감여부 체크
				var paramObj= new Object();//[공통] 예산통제체크 파라메타 정보 Object
				var mgasDst  = "C";//[필수] 마감구분 - C: 마감여부, A: 회계마감여부  
				paramObj.MGAS_MM = sBUDG_MM;//마감년월
				paramObj.MODM_CD = "CC";//[필수] 모듈구분(공통코드-CA910(마감구분) 참조) : CC - 예산편성확정 마감여부, CB - 예산마감 여부
				paramObj.ACUM_CD = "";//[선택] 회계단위
				paramObj.BUSM_CD  = "";//[선택] 사업부문
				paramObj.SAUM_CD  = "";//[선택] 사업장코드
				paramObj.DEPM_CD  = "";//[선택] 부서코드
				paramObj.MODD_CD  = "";//[선택] 모듈상세구분(CA900)
				paramObj.BFPR_YN  = "Y";//[선택] 마감전 프로세스여부
				
				var bCheck = this.gfn_CheckMgas(paramObj, mgasDst);

				//예산편성확정 되었을경우
				if (!bCheck) {
					//trace("=============================1==============================");
					var arrMsgArg = [this.ds_Detail10.getColumn(e.row, "ACOM_NM")];
					this.gfn_Alert("CA017", arrMsgArg);//해당월의 예산편성확정 정보가 없습니다.	
					//this.gfn_Alert("CA017"); //해당월의 예산편성확정 정보가 없습니다.
// 					this.ds_Detail10.setColumn(e.row, "ACOM_NM", "");//계정코드명	
// 					this.ds_Detail10.setColumn(e.row, "DECR_GU_CHK", "");//차대구분-체크				
// 					this.ds_Detail10.setColumn(e.row, "ACOM_CD", "");//계정코드					
					return;
				}
	
				var sDECR_GU = this.ds_Detail10.getColumn(e.row, "DECR_GU");//차대구분
				var sDECR_GU_CHK = this.ds_Detail10.getColumn(e.row, "DECR_GU_CHK");//차대구분-계정
	
				//선택한것과 계정코드의 차대구분이 같을 경우
				if ((sDECR_GU == "D" && sDECR_GU_CHK == "D") || (sDECR_GU == "C" && sDECR_GU_CHK == "C")) {
					this.div_DetailInput.form.div_detailRight.form.div_Budget.form.chk_BgcmYn.set_value("1");
					this.ds_Detail10.setColumn(e.row, "BGCM_YN", "Y");//예산통제여부
				} else {
					this.div_DetailInput.form.div_detailRight.form.div_Budget.form.chk_BgcmYn.set_value("0");
					this.ds_Detail10.setColumn(e.row, "BGCM_YN", "N");//예산통제여부
				}
				
			} else {
				this.div_DetailInput.form.div_detailRight.form.div_Budget.form.chk_BgcmYn.set_value("0");
				this.ds_Detail10.setColumn(e.row, "BGCM_YN", "N");//예산통제여부
			}
		}		
		 
		//발의일자 변경시 한번만 수행되게 체크
		//if (!this.bAcchDd) {
			this.fn_GetBudg();//예산통제정보 조회
		//	this.bAcchDd = true;
		//}

	}else if(e.columnid == "PALM_CD"){
		//trace("============================1================================");
		this.gfn_GetCommPalmGrid(obj, "PALM_CD", "PALM_NM"); // 계정명검색		
	}
	//trace("=========1==========================");
	
	//trace("ds_Detail10_oncolumnchanged end");
};

/*---------------------------------------------------------------------------------------------
 *    01. [데이터셋-ds_Detail10] 데이터변경 이벤트
  ---------------------------------------------------------------------------------------------*/ 

this.ds_Detail10_cancolumnchange = function(obj:nexacro.NormalDataset,e:nexacro.DSColChangeEventInfo)
{

	//trace("ds_Detail10_cancolumnchange start");
	if (e.columnid == "DECR_GU"){
		
		// D: 차변 일 경우 대변 금액을 지우고
		// C: 대변 일 경우 차변 금액을 지운자.
		
		
		//차대굽분에 따라 필수 체크 표시
		this.fn_DecrGuCssclass(e.newvalue);
		
// 		if(e.newvalue =="D"){
// 			//차변
// 			this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10.setCellProperty("head", 9, "cssclass", "essential");
// 			this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10.setCellProperty("head", 10, "cssclass", "");
// 		}else{
// 		    //대변
// 			this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10.setCellProperty("head", 9, "cssclass", "");
// 			this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10.setCellProperty("head", 10, "cssclass", "essential");
// 		}
	}
	
	//trace("ds_Detail10_cancolumnchange end");
};
/*---------------------------------------------------------------------------------------------
 *    02. [데이터셋-ds_Detail10] valuechanged
  ---------------------------------------------------------------------------------------------*/  
this.ds_Detail10_onvaluechanged = function(obj:nexacro.NormalDataset,e:nexacro.DSColChangeEventInfo)
{
	//trace("ds_Detail10_onvaluechanged start");
// 	//trace("ds_Detail10_onvaluechanged1 = " + e.columnid);
// 	
// 	if(e.columnid == "ACOM_CD"){
// 		//trace("ds_Detail10_onvaluechanged2");
// 		var arrArgs = ["DECR_GU_CHK"
// 		              , "CTRL_CD"
// 					  , "ANTI_YN"
// 					  ];
// 		this.gfn_GetCommAcomGrid(obj, "ACOM_CD", "ACOM_NM", arrArgs, "fn_CommAcomCallbackFunc"); // 계정명검색	
// 	}
	
	//101080904000
	/*
	//trace("ds_Detail10_onvaluechanged===================================" + e.columnid);
	var bCheckBgcm = false;//예산편성계정여부
	
	//계정명, 편성년월 컬럼값 변경시
	if(e.columnid == "ACOM_NM" || e.columnid =="BUDG_MM") {

		if (e.row > -1) {
			var sACOM_CD = this.ds_Detail10.getColumn(e.row, "ACOM_CD");//계정코드
			var sBUDG_MM = this.gfn_Nvl(this.ds_Detail10.getColumn(e.row, "BUDG_MM"), "");//편성년월
		
			if (!this.gfn_IsNull(sACOM_CD) && !this.gfn_IsNull(sBUDG_MM)) {
				//[예산통제 계정] 체크
				var paramObj= new Object();//[공통] 예산통제체크 파라메타 정보 Object
				paramObj.BGCM_YY = sBUDG_MM.substr(0, 4);//편성년도
				paramObj.ACOM_CD = sACOM_CD;//계정코드
				bCheckBgcm = this.gfn_CheckBgcm(paramObj);//예산편성계정여부 체크
	
				//예산통제계정
				if (bCheckBgcm) {
					//this.div_DetailInput.form.div_detailRight.form.div_Budget.set_visible(true);
					//trace(this.ds_Detail10.saveXML());
					var sDECR_GU = this.ds_Detail10.getColumn(e.row, "DECR_GU");//차대구분
					var sDECR_GU_CHK = this.ds_Detail10.getColumn(e.row, "DECR_GU_CHK");//차대구분-계정
					//trace(sDECR_GU + "/" + sDECR_GU_CHK);
					//선택한것과 계정코드의 차대구분이 같을 경우
					if ((sDECR_GU == "D" && sDECR_GU_CHK == "D") || (sDECR_GU == "C" && sDECR_GU_CHK == "C")) {
						this.div_DetailInput.form.div_detailRight.form.div_Budget.form.chk_BgcmYn.set_value("1");
						this.ds_Detail10.setColumn(e.row, "BGCM_YN", "Y");//예산통제여부
					} else {
						this.div_DetailInput.form.div_detailRight.form.div_Budget.form.chk_BgcmYn.set_value("0");
						this.ds_Detail10.setColumn(e.row, "BGCM_YN", "N");//예산통제여부
					}
					
				} else {
					//this.div_DetailInput.form.div_detailRight.form.div_Budget.set_visible(false);
					this.div_DetailInput.form.div_detailRight.form.div_Budget.form.chk_BgcmYn.set_value("0");
					this.ds_Detail10.setColumn(e.row, "BGCM_YN", "N");//예산통제여부
				}
			}		
		}
	}
	
	//계정명, 차대구분
	if(e.columnid == "ACOM_NM" || e.columnid =="DECR_GU"){
	    //관리항목 조회
		this.fn_dsAcomMa(this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "ACOM_CD"), "SET", bCheckBgcm);		
	}
	
	//예산부서, 편성년월
	if(e.columnid == "BUDP_NM" || e.columnid =="BUDG_MM"){
		this.fn_GetBudg();//예산통제정보 조회
	}
	
	//차변금액, 대변금액
	if(e.columnid == "DEBI_AM" || e.columnid =="CRED_AM"){
		if (!this.fvBCalAvailAmt) {
			this.fn_CalAvailAm();//가용금액 계산
		}
	}
	
	*/
	
	//trace("ds_Detail10_onvaluechanged end");
};

/*---------------------------------------------------------------------------------------------
 *    02. [데이터셋-ds_Detail10] rowposchanged
  ---------------------------------------------------------------------------------------------*/  
  
this.ds_Detail10_onrowposchanged = function(obj:nexacro.NormalDataset,e:nexacro.DSRowPosChangeEventInfo)
{
	//trace("ds_Detail10_onrowposchanged start");
    //if (this.fvColChangeEvent) return;//컬럼변경 이벤트중는 이벤트를 타지않게한다
// 	this.eventObj = obj;
// 	this.eventEdSRowPosChangeEventInfo = e;
	if (!this.fvDsRowPosChangeDetail) return;//반제전표에서 가져올때는 이벤트를 타지않게한다

	//trace("ds_Detail10_onrowposchanged");
	
	var bCheckBgcm = false;//예산편성계정여부
	
	
	/*
	1. 반제전표 관리항목 제어
	- 반제계정의 차대구분과 전표의 차대구분이 다르면 관리항목 수정 불가
	외화계정때문에 우선 주석처리
	*/
	/*
	if(obj.getColumn(e.newrow, "ANTI_YN") == "1"){
		//계정의 차대구분과 전표의 차대구분 비교
		if(obj.getColumn(e.newrow, "DECR_GU_CHK") != obj.getColumn(e.newrow, "DECR_GU")){
			this.div_DetailInput.form.div_detailRight.form.div_Item.set_enable(false);
		}else{
			this.div_DetailInput.form.div_detailRight.form.div_Item.set_enable(true);
		}
		
	}
	*/
	
	
	
	
	
	//예산정보 설정
	if (e.newrow > -1) {
		//예산정보 초기화
		this.div_DetailInput.form.div_detailRight.form.div_Budget.form.chk_BgcmYn.set_value("0");
		//this.div_DetailInput.form.div_detailRight.form.div_Budget.form.edt_BudgetAcomCd.set_value("");
		this.div_DetailInput.form.div_detailRight.form.div_Budget.form.mae_RecAm.set_value("0");
		this.div_DetailInput.form.div_detailRight.form.div_Budget.form.mae_UsedAm.set_value("0");
		this.div_DetailInput.form.div_detailRight.form.div_Budget.form.mae_RegAm.set_value("0");
		this.div_DetailInput.form.div_detailRight.form.div_Budget.form.mae_AvailAm.set_value("0");		
	
		var sACOM_CD = this.ds_Detail10.getColumn(e.newrow, "ACOM_CD");//계정코드
		var sBUDG_MM = this.gfn_Nvl(this.ds_Detail10.getColumn(e.newrow, "BUDG_MM"), "");//편성년월
		var sDECR_GU = this.ds_Detail10.getColumn(e.newrow, "DECR_GU");//차대구분
		
		if (!this.gfn_IsNull(sACOM_CD) && !this.gfn_IsNull(sBUDG_MM)) {
			//[예산통제 계정] 체크
			var paramObj= new Object();//[공통] 예산통제체크 파라메타 정보 Object
			paramObj.BGCM_YY = sBUDG_MM.substr(0, 4);//편성년도
			paramObj.ACOM_CD = sACOM_CD;//계정코드
			bCheckBgcm = this.gfn_CheckBgcm(paramObj);//예산편성계정여부 체크

			//예산통제계정
			if (bCheckBgcm) {
				//this.div_DetailInput.form.div_detailRight.form.div_Budget.set_visible(true);
				
				var sDECR_GU_CHK = this.ds_Detail10.getColumn(e.newrow, "DECR_GU_CHK");//차대구분-계정
	
				//선택한것과 계정코드의 차대구분이 같을 경우
				if ((sDECR_GU == "D" && sDECR_GU_CHK == "D") || (sDECR_GU == "C" && sDECR_GU_CHK == "C")) {
					this.div_DetailInput.form.div_detailRight.form.div_Budget.form.chk_BgcmYn.set_value("1");
				} else {
					this.div_DetailInput.form.div_detailRight.form.div_Budget.form.chk_BgcmYn.set_value("0");
				}				
			} else {
				//this.div_DetailInput.form.div_detailRight.form.div_Budget.set_visible(false);
				this.div_DetailInput.form.div_detailRight.form.div_Budget.form.chk_BgcmYn.set_value("0");
			}
		}
		//줄 변경시 관리항목 리스트만 조회
		this.fn_dsAcomMa(this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "ACOM_CD"), "", bCheckBgcm);
		//차대금액 cssClass 세팅
		this.fn_DecrGuCssclass(sDECR_GU);
		
	} else {
		this.div_DetailInput.form.div_detailRight.form.div_Budget.form.chk_BgcmYn.set_value("0");
		//생성된 관리항목 컴포넌트 삭제
		var arrComList = this.div_DetailInput.form.div_detailRight.form.div_Item.form.components;//Div 생성된 전체 컴폰넌트

		if (!this.gfn_IsNull(arrComList)) {

			for (var iLoop = arrComList.length-1; iLoop >= 0; iLoop--) {
				if (arrComList[iLoop].id != "sta_DetailRightBottom") {
					var rObj = this.div_DetailInput.form.div_detailRight.form.div_Item.removeChild(arrComList[iLoop].id);
					rObj.destroy();
					rObj = null;
				}
			}
		}
		
		this.div_DetailInput.form.div_detailRight.form.div_Item.set_height(60);
		this.div_DetailInput.form.div_detailRight.form.div_Budget.set_top("div_Item:0");
				
	}
	//trace("ds_Detail10_onrowposchanged end");
};

/*---------------------------------------------------------------------------------------------
 *    02. [데이터셋-ds_Detail10] canrowposchange
  ---------------------------------------------------------------------------------------------*/  
this.ds_Detail10_canrowposchange = function(obj:nexacro.NormalDataset,e:nexacro.DSRowPosChangeEventInfo)
{
	//trace("===============ds_Detail10_canrowposchange================" + e.columnid);
	//trace("ds_Detail10_canrowposchange start");
	
	//trace("ds_Detail10_canrowposchange end");
	
};

/***********************************************************************************************
 * 02.DG0.08. [Detail Tab] 변경 이벤트
 ***********************************************************************************************/
this.div_DetailInput_tab_Detail_onchanged = function(obj:nexacro.Tab,e:nexacro.TabIndexChangeEventInfo)
{
	var iTabIndex = e.postindex;
	
	this.div_DetailInput.form.div_ComGrdBtn.set_enable(true);
	
	
	//trace(iTabIndex);
	//Tab-발의상세
	if (iTabIndex == 0) {
		this.fn_SetGridInputButton();//[공통] 그리드 입력 버튼 설정
		this.div_DetailInput.form.btn_banFind.set_visible(true);
	//Tab-첨부파일
	} else if (iTabIndex == 1) {	
		this.fn_SetGridFileButton();//[공통] 그리드 파일 버튼 설정
		this.div_DetailInput.form.btn_banFind.set_visible(false);
	}
};

/***********************************************************************************************
 * 02.DG1.01. [Detail그리드2-버튼] 전체선택 클릭 이벤트
 ***********************************************************************************************/
this.fn_DetailGrd02AllCheck = function()
{
	for (var iLoop=0; iLoop < this.ds_Detail20.getRowCount(); iLoop++) {
		this.ds_Detail20.setColumn(iLoop, "s_chk", "1");
	}
};

/***********************************************************************************************
 * 02.DG1.02. [Detail그리드2-버튼] 전체해지 클릭 이벤트
 ***********************************************************************************************/
// this.fn_DetailGrd02AllUnCheck = function()
// {
// 	for (var iLoop=0; iLoop < this.ds_Detail20.getRowCount(); iLoop++) {
// 		this.ds_Detail20.setColumn(iLoop, "s_chk", "0");
// 	}
// };

/***********************************************************************************************
 * 02.DG1.03. [Detail그리드2-버튼] 부분선택 클릭 이벤트
 ***********************************************************************************************/
// this.fn_DetailGrd02SomeCheck = function()
// {
// 	var arrRows = this.div_DetailInput.form.tab_Detail.tpg_02.form.grd_Detail20.getSelectedRows();
// 	
// 	for (var iLoop=0; iLoop < arrRows.length; iLoop++) {
// 		//이미 선택한내용은 부분선택에서 제외 처리
// 		if (this.ds_Detail20.getColumn(arrRows[iLoop], "s_conf") != "1") {
// 			this.ds_Detail20.setColumn(arrRows[iLoop], "s_chk", "1");
// 		}
// 	}	
// };


/***********************************************************************************************
 * 02.DG1.04. [Detail그리드2-버튼] 부분해지 클릭 이벤트
 ***********************************************************************************************/
// this.fn_DetailGrd02SomeUnCheck = function()
// {
// 	var arrRows = this.div_DetailInput.form.tab_Detail.tpg_02.form.grd_Detail20.getSelectedRows();
// 	for (var iLoop=0; iLoop < arrRows.length; iLoop++) {
// 		this.ds_Detail20.setColumn(arrRows[iLoop], "s_chk", "0");
// 	}
// };

/***********************************************************************************************
 * 02.DG1.05. [Detail그리드2-버튼] 적용 클릭 이벤트
 ***********************************************************************************************/
// this.fn_DetailGrd02Choice = function()
// {
// 	if (this.ds_Master10.rowposition > -1) {
// 		if (this.ds_Detail20.getCaseCount("s_chk=='1'") > 0) {
// 			
// 			var arrCheckRow = [];//체크된 Row
// 			
// 			for (var iLoop=0; iLoop<this.ds_Detail20.getRowCount(); iLoop++) {
// 			
// 				if (this.ds_Detail20.getColumn(iLoop, "s_chk") == "1") {
// 					var iAddRow = this.gfn_GridInsertProcess(this, this.ds_Detail10);//crud_flag 변경-입력(I)
// 
// 					this.ds_Detail10.copyRow(iAddRow, this.ds_Detail20, iLoop);
// 					this.ds_Detail10.setColumn(iAddRow, "COMM_CD", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "COMM_CD"));
// 					this.ds_Detail10.setColumn(iAddRow, "ACCH_NO", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_NO"));
// 					this.ds_Detail10.setColumn(iAddRow, "WOFH_SQ", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "WOFH_SQ"));		
// 					this.ds_Detail10.setColumn(iAddRow, "COMM_CD", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "COMM_CD"));
// 					this.ds_Detail10.setColumn(iAddRow, "TEMB_SE", "");//발의순번
// 					
// 					arrCheckRow.push(iLoop );
// 					
// 					//선택항목 비활성화처리
// 					this.ds_Detail20.setColumn(iLoop, "s_conf", "1");
// 					this.ds_Detail20.setColumn(iLoop, "s_chk", "0");//Uncheck로 변경
// 				}
// 			}
// 
// 			this.ds_Detail20.set_rowposition(-1);
// 			//발의상세로 Tab이동
// 			this.div_DetailInput.form.tab_Detail.set_tabindex(0);
// 		}
// 	}
// };

/***********************************************************************************************
 * 02.DG1.06. [Detail그리드2-버튼] 취소 클릭 이벤트
 ***********************************************************************************************/
// this.fn_DetailGrd02Cancel = function()
// {
// 	this.ds_Detail10.reset();
// 	this.ds_Detail20.reset();
// 
// 	//기존 체크정보 초기화
// 	for (var iLoop=0; iLoop<this.ds_Detail20.getRowCount(); iLoop++) {
// 	
// 		if (this.ds_Detail20.getColumn(iLoop, "s_chk") == "1") {
// 			this.ds_Detail20.setColumn(iLoop, "s_chk", "0");//Uncheck로 변경
// 		}
// 		
// 		if (this.ds_Detail20.getColumn(iLoop, "s_conf") == "1") {
// 			this.ds_Detail20.setColumn(iLoop, "s_conf", "0");
// 		}		
// 	}
// };
 
/***********************************************************************************************
 * 02.DG1.05. 검색조건 클릭/변경 이벤트
 ***********************************************************************************************/ 
/***********************************************************************************************
 *    01. [부서]
 ***********************************************************************************************/
/*---------------------------------------------------------------------------------------------
 *    [검색영역-Button] 부서 버튼 클릭 이벤트
  ---------------------------------------------------------------------------------------------*/
// this.div_DetailInput_tab_Detail_tpg_02_div_Search_btn_DepmCd_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
// {
// 	var sPopupId = "BS_DEPM_CD_01";//팝업ID - 부서코드
// 	var oArg = { DepmNm:this.div_DetailInput.form.tab_Detail.tpg_02.form.div_Search.form.edt_DepmNm.value };//Argument처리
// 	this.gfn_DeptPop(sPopupId, oArg);	
// };  
  
/*---------------------------------------------------------------------------------------------
 *    [검색영역-Edit] 부서코드 변경 이벤트
  ---------------------------------------------------------------------------------------------*/  
// this.div_DetailInput_tab_Detail_tpg_02_div_Search_edt_DepmCd_onchanged = function(obj:nexacro.Edit,e:nexacro.ChangeEventInfo)
// {
// 	var sPopupId = "BS_DEPM_CD_01";//팝업ID - 부서코드
// 	this.gfn_GetCommDepm("C", this.div_DetailInput.form.tab_Detail.tpg_02.form.div_Search.form.edt_DepmCd, this.div_DetailInput.form.tab_Detail.tpg_02.form.div_Search.form.edt_DepmNm, sPopupId);//코드로 검색	
// };

/*---------------------------------------------------------------------------------------------
 *    [검색영역-Edit] 부서명 변경 이벤트
  ---------------------------------------------------------------------------------------------*/
// this.div_DetailInput_tab_Detail_tpg_02_div_Search_edt_DepmNm_onchanged = function(obj:nexacro.Edit,e:nexacro.ChangeEventInfo)
// {
// 	var sPopupId = "BS_DEPM_CD_01";//팝업ID - 부서코드
// 	this.gfn_GetCommDepm("N", this.div_DetailInput.form.tab_Detail.tpg_02.form.div_Search.form.edt_DepmCd, this.div_DetailInput.form.tab_Detail.tpg_02.form.div_Search.form.edt_DepmNm, sPopupId);//코드로 검색		
// };

/***********************************************************************************************
 *    02. [계약번호]
 ***********************************************************************************************/
/*---------------------------------------------------------------------------------------------
 *    [검색영역-Button] 계약번호 버튼 클릭 이벤트
  ---------------------------------------------------------------------------------------------*/
// this.div_DetailInput_tab_Detail_tpg_02_div_Search_btn_CnthNo_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
// {
// 	var sPopupId = "BS_CNTH_NO_01";//팝업ID - 계약정보
// 	var oArg = { paramCode:""};//Argument처리
// 	this.gfn_ContPop(sPopupId, oArg);		
// };

/*---------------------------------------------------------------------------------------------
 *    [검색영역-Edit] 계약번호 변경 이벤트
  ---------------------------------------------------------------------------------------------*/    
// this.div_DetailInput_tab_Detail_tpg_02_div_Search_mae_CnthNo_onchanged = function(obj:nexacro.MaskEdit,e:nexacro.ChangeEventInfo)
// {
// 	
// };

/***********************************************************************************************
 *    03. [거래처]
 ***********************************************************************************************/
/*---------------------------------------------------------------------------------------------
 *    [검색영역-Button] 거래처 버튼 클릭 이벤트
  ---------------------------------------------------------------------------------------------*/
// this.div_DetailInput_tab_Detail_tpg_02_div_Search_btn_CusmCd_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
// {
// 	var sPopupId = "BS_CUSM_CD_01";//팝업ID - 거래처정보
// 	var oArg = { paramCode:""};//Argument처리
// 	this.gfn_CusmPop(sPopupId, oArg);		
// };

/*---------------------------------------------------------------------------------------------
 *    [검색영역-Edit] 거래처 변경 이벤트
  ---------------------------------------------------------------------------------------------*/    
// this.div_DetailInput_tab_Detail_tpg_02_div_Search_edt_CusmCd_onchanged = function(obj:nexacro.Edit,e:nexacro.ChangeEventInfo)
// {
// 	this.gfn_GetCommCusm("C", this.div_DetailInput.form.tab_Detail.tpg_02.form.div_Search.form.edt_CusmCd, this.div_DetailInput.form.tab_Detail.tpg_02.form.div_Search.form.edt_CusmNm);//코드로 검색
// };

/*---------------------------------------------------------------------------------------------
 *    [검색영역-Edit] 거래처명 변경 이벤트
  ---------------------------------------------------------------------------------------------*/    
// this.div_DetailInput_tab_Detail_tpg_02_div_Search_edt_CusmNm_onchanged = function(obj:nexacro.Edit,e:nexacro.ChangeEventInfo)
// {
// 	var sPopupId = "BS_CUSM_CD_01";//팝업ID - 거래처정보
// 	this.gfn_GetCommCusm("N", this.div_DetailInput.form.tab_Detail.tpg_02.form.div_Search.form.edt_CusmCd, this.div_DetailInput.form.tab_Detail.tpg_02.form.div_Search.form.edt_CusmNm, sPopupId);//코드명으로 검색	
// };

/***********************************************************************************************
 *    04. [검색]
 ***********************************************************************************************/
// this.div_DetailInput_tab_Detail_tpg_02_div_Search_btn_Search_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
// {
// 	//[업무] 데이터셋 설정 - 데이터셋 초기화, 조회조건 설정
// 	this.ds_Detail20.clearData();
// 	this.ds_InputSch.clearData();
// 	
// 	this.ds_InputSch.addRow();
// 	this.ds_InputSch.setColumn(0, "FROM_DD", this.div_DetailInput.form.tab_Detail.tpg_02.form.div_Search.form.cal_TemhDtFr.value);
// 	this.ds_InputSch.setColumn(0, "CLOS_DD", this.div_DetailInput.form.tab_Detail.tpg_02.form.div_Search.form.cal_TemhDtTo.value);
// 	this.ds_InputSch.setColumn(0, "DEPM_CD", this.div_DetailInput.form.tab_Detail.tpg_02.form.div_Search.form.edt_DepmCd.value);	
// 	this.ds_InputSch.setColumn(0, "CNTH_NO", this.div_DetailInput.form.tab_Detail.tpg_02.form.div_Search.form.mae_CnthNo.value);
// 	this.ds_InputSch.setColumn(0, "CUSM_CD", this.div_DetailInput.form.tab_Detail.tpg_02.form.div_Search.form.edt_CusmCd.value);
// 		
// 	//[공통]서비스정보 초기화
// 	this.gfn_InitComService(this);
// 	
// 	//[공통]서비스정보 추가
// 	var svcAddObj = new Object();//[공통] 서비스 추가 파라메타 정보 Object
// 	svcAddObj.sSelectSql = "fa:M_FA_1000_D_SL20";
// 	this.gfn_AddComSearchService(this, svcAddObj);
// 	
// 	//[공통]서비스 호출 변수
// 	var svcCallObj = new Object();//[공통] 서비스 파라메타 정보 Object
// 	svcCallObj.sTrid = "DTLS_SEARCH";//Transaction ID 등 callback에서 넘겨 받을 String을 지정
// 	svcCallObj.sActionName = this.G_SV_FA;//서버에서 호출할 Action - 모듈별로 호출되는 기본 Actio이 다름 : 공통 서비스 Action 업무구분  변수 참조
// 	svcCallObj.sInputDaset = "ds_InputSch=ds_InputSch" //입력 데이터셋
// 	svcCallObj.sOutDatset = "ds_Detail20=ds_Detail20";//출력 데이터셋
// 	svcCallObj.sOtherArg = "";//서버로 전송할 기타 Argument 정보 문자열, 예) key=value key2=value2
// 	svcCallObj.sCallBackFnc = "fn_Callback";//서버에서 처리가 완료된 후 Callback 받을 Function 명
// 
// 	//[공통]서비스 호출
// 	this.gfn_CallComService(this, svcCallObj);		
// };




 
 
/***********************************************************************************************
 * 02.DG1.06. [첨부 파일 그리드-버튼] 파일추가 클릭 이벤트
 ***********************************************************************************************/
this.fn_FileGrd01AddRow = function()
{
	this.fvFileDiv.fn_ComFileAdd();//파일추가
};

/***********************************************************************************************
 * 02.DG1.07. [첨부 파일 그리드-버튼] 파일삭제 클릭 이벤트
 ***********************************************************************************************/
this.fn_FileGrd01DeleteRow = function()
{
	this.fvFileDiv.fn_ComFileDelete();//파일삭제
};


/***********************************************************************************************
 * 3. 복사
 ***********************************************************************************************/
/***********************************************************************************************
 * 03.01. [공통버튼] 복사 버튼 클릭 이벤트
 ***********************************************************************************************/ 
this.fn_ComBtnCopy = function()
{ 
	//전표상태가 저장 상태 이상인 경우만 복사처리
	
	if(!this.gfn_IsNull(this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_NO"))
	  && this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_NO") !=""){
	
		this.gfn_Confirm("PS005", "", "CONF.COPY", "fn_MsgCallback");//복사 하시겠습니까?
		
	}else{
	
		this.gfn_Alert("FA033");//저장한 전표만 복사 가능합니다.
		
	}
}

/***********************************************************************************************
 * 4. 취소
 ***********************************************************************************************/
/***********************************************************************************************
 * 04.01. [공통버튼] 취소 버튼 클릭 이벤트
 ***********************************************************************************************/ 
this.fn_ComBtnCancel = function()
{ 
	this.ds_Master10.reset();
	this.ds_Detail10.reset();
	this.div_DetailInput.form.div_ComGrdBtn.set_enable(false);
	this.div_DetailInput.form.btn_banFind.set_enable(false);
	this.fvFileDiv.fn_ClearAtchFile();//첨부파일 정보 초기화
}

/***********************************************************************************************
 * 5. 저장
 ***********************************************************************************************/
/***********************************************************************************************
 * 05.01. [공통버튼] 저장 버튼 클릭 이벤트
 ***********************************************************************************************/ 
this.fn_ComBtnSave = function()
{ 



	//[월마감제어-저장]
	var sBUDGsave_MM = this.gfn_Nvl(this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_DD"), "");//마감년월
	
	if (!this.gfn_IsNull(sBUDGsave_MM)) {
		//마감여부 체크
		var saveParamObj= new Object();//[공통] 예산통제체크 파라메타 정보 Object
		var mgasDstSave  = "C";//[필수] 마감구분 - C: 마감여부, A: 회계마감여부  
		
		//수정권한이 있는 부서인 경우 마감이 되었어도 회계마감만 아니면 처리 되게 한다.
		var findRow = this.ds_Fa100.findRowExpr("CODM_CD=='"+this.gfn_GetSessionValue("DEPM_CD")+"'");
		if(findRow > -1){
			mgasDstSave = "A";
		}
		
		saveParamObj.MGAS_MM = sBUDGsave_MM.substr(0,6);//마감년월
		saveParamObj.MODM_CD = "FA";//[필수] 모듈구분(공통코드-CA910(마감구분) 참조) : CC - 예산편성확정 마감여부, CB - 예산마감 여부
		saveParamObj.ACUM_CD = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACUM_CD");//[선택] 회계단위
		saveParamObj.BUSM_CD  = "";//[선택] 사업부문
		saveParamObj.SAUM_CD  = "";//[선택] 사업장코드
		saveParamObj.DEPM_CD  = "";//[선택] 부서코드
		saveParamObj.MODD_CD  = "";//[선택] 모듈상세구분(CA900)
		saveParamObj.BFPR_YN  = "Y";//[선택] 마감전 프로세스여부
		
		var bCheck = this.gfn_CheckMgas(saveParamObj, mgasDstSave);//마감여부 체크		
		
		//월마감된 경우
		if (bCheck) {
			this.gfn_Alert("CA016");//해당월의 예산이 마감되어서 등록하실수 없습니다.
			return;
		}	
	}


	//trace("=============1=============");    
	//변경여부 체크
	if (!this.gfn_DsIsUpdated(this.ds_Master10) && !this.gfn_DsIsUpdated(this.ds_Detail10) && !this.fvFileDiv.fn_CheckFileAddYn()) {
		this.gfn_Alert("SM036");//변경된 내용이 없습니다.
		return;
	}
	//trace("=============2=============");
	//이관여부 NULL 일경우 0으로 넣는다.
// 	if (this.ds_Master10.getColumn(this.ds_Master10.rowposition, "TRAN_YN") || this.gfn_IsNull(this.ds_Master10.getColumn(this.ds_Master10.rowposition, "TRAN_YN")) ) {
// 		this.ds_Master10.setColumn(this.ds_Master10.rowposition, "TRAN_YN", "0");
// 	}

	//trace("=============3=============");
	//첨부파일정보 변경시
	if (this.fvFileDiv.fn_CheckFileAddYn()) {
		//첨부파일정보만 변경시
		if (!this.gfn_DsIsUpdated(this.ds_Master10) && !this.gfn_DsIsUpdated(this.ds_Detail10) && this.ds_Master10.getRowCount() > 0) {
			//첨부파일정보 저장
			fvFileInfo = new Object();//[공통] 첨부파일정보
			fvFileInfo.PRGM_ID = this.fvComPrgmId;//프로그램ID
			fvFileInfo.FILH_GU = "H";//첨부파일위치구분 : H-Head, B-상세(그리드Row), E-기타
			fvFileInfo.CALLBACK_FUNC = "";//호출할 콜백함수
			fvFileInfo.PATH_NM = this.fvPathNm;//업무파일경로
			fvFileInfo.PK01_NO = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "COMM_CD");//PK번호1-회사코드
			fvFileInfo.PK02_NO = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_NO");//PK번호2-발의번호
			fvFileInfo.PK03_NO = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "WOFH_SQ");//PK번호3-결재차수
			//첨부파일Div 화면에 Key세팅하게 변경
			this.fvFileDiv.fn_AtchFileSave(this, fvFileInfo);
			return;	
		}
	}
	//trace("=============4=============");
	//저장전 유효성 체크
	//Master 데이터 유효성 체크
	
	//trace("cal_PareDd 1=" + this.div_MasterInput.form.tab_Master.tpg_01.form.cal_PareDd.value);
	
	if (this.gfn_DsIsUpdated(this.ds_Master10)) {
		if (!this.fn_VaildMasterSave()) return;
	}
	//trace("=============5=============");
	//trace("cal_PareDd 2=" + this.div_MasterInput.form.tab_Master.tpg_01.form.cal_PareDd.value);
	//Detail10 의 내용이 없으면 저장 막음
	if (this.ds_Detail10.getRowCount() == 0) {
		this.gfn_Alert("SD105");//상세내역 데이터가 없습니다.
		return;
	};
	
	//trace("cal_PareDd 3=" + this.div_MasterInput.form.tab_Master.tpg_01.form.cal_PareDd.value);

	
	//trace("=============6=============");
	//Detail 데이터 유효성 체크
	if (this.gfn_DsIsUpdated(this.ds_Detail10)) {
		if (!this.fn_VaildDetailSave()) return;
	}	
	
	//HEAD에 금액 넣기
	this.fn_AcchAmt();

	//trace("=============7=============");
	//trace("cal_PareDd  4=" + this.div_MasterInput.form.tab_Master.tpg_01.form.cal_PareDd.value);
	//Master 입력/수정/삭제 상태 체크
	var sChkRowType = this.gfn_GetRowType(this.ds_Master10, this.ds_Master10.rowposition);
	
	//Master 입력 상태이면
	//trace("sChkRowType = " + sChkRowType)
	//trace("=============8=============");
	if (sChkRowType == "I") {
		//trace("=============9=============");
		//채번-발의번호
		var sTemhNo = this.gfn_GetTbnmNo(this.fvComPrgmId, this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_DD"));//발의번호, 기준일자)
		if (this.gfn_IsNull(sTemhNo)) {
			//발의번호를 가져오는데 실패했습니다.
			return;
		}
		//trace("=============10=============");
		var sChkTemhNo = "";//발의번호-체크용
		var iMasterRowPos = this.ds_Master10.rowposition;//Master 현재 Row Position
		
		//Master 데이터셋에 채번정보 입력-발의번호
		this.ds_Master10.setColumn(iMasterRowPos, "ACCH_NO", sTemhNo);
		
		//결의승인여부 - 미승인(0)
		this.ds_Master10.setColumn(iMasterRowPos, "SLIP_YN", "0");
		
		//trace("=============11=============");
		var sCommCd = this.ds_Master10.getColumn(iMasterRowPos, "COMM_CD");//회사코드
		//var sTemhNo = this.ds_Master10.getColumn(iMasterRowPos, "ACCH_NO");//발의번호
		var sWofhSq = this.ds_Master10.getColumn(iMasterRowPos, "WOFH_SQ");//결재차수
		var sSlipYn = this.ds_Master10.getColumn(iMasterRowPos, "SLIP_YN");//결의승인여부
		var sAcumCd = this.ds_Master10.getColumn(iMasterRowPos, "ACUM_CD");//회계단위
// 		var sSlipNo = this.ds_Master10.getColumn(iMasterRowPos, "SLIP_NO");//결의번호
// 		var sSlipDd = this.ds_Master10.getColumn(iMasterRowPos, "SLIP_DD");//결의일자
		
		
		//trace("=============12=============");
		//Detail 데이터셋에 기본정보 입력-회사코드/발의번호/결재차수
		for (var iLoop=0; iLoop<this.ds_Detail10.getRowCount(); iLoop++) {
			sChkTemhNo = this.ds_Detail10.getColumn(iLoop, "ACCH_NO");//발의번호
			
			if (this.gfn_IsNull(sChkTemhNo)) {
				this.ds_Detail10.setColumn(iLoop, "COMM_CD", sCommCd);
				this.ds_Detail10.setColumn(iLoop, "ACCH_NO", sTemhNo);
				this.ds_Detail10.setColumn(iLoop, "WOFH_SQ", sWofhSq);
				this.ds_Detail10.setColumn(iLoop, "ACUM_CD", sAcumCd);
			}
			
			//결의승인여부(1승인_0미승인)
			//trace("SLIP_YN : " + sSlipYn );
			this.ds_Detail10.setColumn(iLoop, "SLIP_YN", sSlipYn)
			
		}		
		//trace("=============13=============");
	}	
	//trace("=============14=============");
	//첨부파일정보 변경시
	if (this.fvFileDiv.fn_CheckFileAddYn()) {
		fvFileInfo = new Object();//[공통] 첨부파일정보
		fvFileInfo.PRGM_ID = this.fvComPrgmId;//프로그램ID
		fvFileInfo.FILH_GU = "H";//첨부파일위치구분 : H-Head, D-상세(그리드Row), E-기타
		fvFileInfo.CALLBACK_FUNC = "fn_ComBtnSearch";//호출할 콜백함수
		fvFileInfo.PATH_NM = this.fvPathNm;//업무파일경로
		fvFileInfo.PK01_NO = nApp.gvCompany;//PK번호1-회사코드
		fvFileInfo.PK02_NO = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_NO");//PK번호2-발의번호
		fvFileInfo.PK03_NO = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "WOFH_SQ");//PK번호3-결재차수			
	}	
	//trace("=============15=============");	
	//Detail 데이터셋에 SORT_NO 입력
	var sSortNo ="";
	for (var iLoop=0; iLoop<this.ds_Detail10.getRowCount(); iLoop++) {
		sSortNo = this.ds_Detail10.getColumn(iLoop, "SORT_NO");
		if(this.gfn_IsNull(sSortNo) || sSortNo ==""){
			this.ds_Detail10.setColumn(iLoop, "SORT_NO", iLoop);
		}
	}
	
	
	//저장시 재조회 Key설정
	this.fvSchKey01 = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_NO");//조회Key01
	this.fvSchKey02 = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "WOFH_SQ");//조회Key02

	//[공통]서비스 정보 초기화
	this.gfn_InitComService(this);
	
	//[공통]서비스정보 추가
	var svcAddObj = new Object();//[공통] 서비스 추가 파라메타 정보 Object
	
	//[공통]서비스 호출 변수
	var sInputDaset = "" //입력 데이터셋
	var sOutDatset = "";//출력 데이터셋
	var sOtherArg = "";//서버로 전송할 기타 Argument 정보 문자열, 예) key=value key2=value2
	//trace("=============16=============");	
	//Master 변경건이 있으면 Master 저장
	if (this.gfn_DsIsUpdated(this.ds_Master10)) {
		
		//[공통]서비스 정보 추가
		svcAddObj = new Object();//[공통] 서비스 추가 파라메타 정보 Object				 
		svcAddObj.sInsertSql = "fa:M_FA_1000_M_IN10";//저장Sql
		svcAddObj.sUpdateSql = "fa:M_FA_1000_M_UP10";//수정Sql
		svcAddObj.sDeleteSql = "fa:M_FA_1000_M_DL10";//삭제Sql
		svcAddObj.sSaveFlagColumn = "";//insertSql, updateSql, deleteSql이 존재하여 신규, 수정, 삭제를 처리할 경우 기본적으로 Dataset의 getRowStates()로 판단하여 처리하며
								 //이를 Flag 컬럼으로 대체하고 싶은 경우 사용하는 [컬럼명], 해당 Flag 컬럼의 값은 신규 - I , 수정 - U , 삭제 - D의 값을 가져야 한다.

		this.gfn_AddComSaveService(this, svcAddObj);
		
		sInputDaset = "ds_Master10=ds_Master10:U" //입력 데이터셋

	}
	
	//Detail 변경건이 있으면 Detail 저장
	if (this.gfn_DsIsUpdated(this.ds_Detail10)) {
		
		//[공통]서비스 정보 추가
		svcAddObj = new Object();//[공통] 서비스 추가 파라메타 정보 Object	
		svcAddObj.sInsertSql = "fa:M_FA_1000_D_IN10";//저장Sql
		svcAddObj.sUpdateSql = "fa:M_FA_1000_D_UP10";//수정Sql
		svcAddObj.sDeleteSql = "fa:M_FA_1000_D_DL10";//삭제Sql
		svcAddObj.sSaveFlagColumn = "crudType";//insertSql, updateSql, deleteSql이 존재하여 신규, 수정, 삭제를 처리할 경우 기본적으로 Dataset의 getRowStates()로 판단하여 처리하며
								 //이를 Flag 컬럼으로 대체하고 싶은 경우 사용하는 [컬럼명], 해당 Flag 컬럼의 값은 신규 - I , 수정 - U , 삭제 - D의 값을 가져야 한다.
		
		this.gfn_AddComSaveService(this, svcAddObj);
		
		if (this.gfn_IsNull(sInputDaset)) {
			sInputDaset = "ds_Detail10=ds_Detail10:U" //입력 데이터셋
		} else {
			sInputDaset =  "ds_Detail10=ds_Detail10:U" + " " + sInputDaset //입력 데이터셋 detail - > master 순으로 저장한다.
		}
		
		//집행금액 발의 계산
		this.ds_Detail13.clearData();//집행금액 발의 정보
		this.fn_CalBgacAm("");
		
		if (this.ds_Detail13.getRowCount() > 0) {
			//[공통]서비스 정보 추가
			svcAddObj = new Object();//[공통] 서비스 추가 파라메타 정보 Object	
			svcAddObj.sInsertSql = "";//저장Sql
			svcAddObj.sUpdateSql = "fa:M_FA_1000_D_UP11";//수정Sql
			svcAddObj.sDeleteSql = "";//삭제Sql
			svcAddObj.sSaveFlagColumn = "crudType";//insertSql, updateSql, deleteSql이 존재하여 신규, 수정, 삭제를 처리할 경우 기본적으로 Dataset의 getRowStates()로 판단하여 처리하며
									 //이를 Flag 컬럼으로 대체하고 싶은 경우 사용하는 [컬럼명], 해당 Flag 컬럼의 값은 신규 - I , 수정 - U , 삭제 - D의 값을 가져야 한다.
			
			this.gfn_AddComSaveService(this, svcAddObj);
			
			sInputDaset =  sInputDaset + " ds_Detail13=ds_Detail13" //입력 데이터셋 detail - > master 순으로 저장한다.
	
		}

	}		
	
	
	
	
	
	//[공통]서비스 호출 변수
	var svcCallObj = new Object();//[공통] 서비스 파라메타 정보 Object
	svcCallObj.sTrid = "SAVE";//Transaction ID 등 callback에서 넘겨 받을 String을 지정
	svcCallObj.sActionName = "";//서버에서 호출할 Action - 모듈별로 호출되는 기본 Actio이 다름 : 공통 서비스 Action 업무구분  변수 참조
	svcCallObj.sInputDaset = sInputDaset //입력 데이터셋
	svcCallObj.sOutDatset = sOutDatset;//출력 데이터셋
	svcCallObj.sOtherArg = sOtherArg;//서버로 전송할 기타 Argument 정보 문자열, 예) key=value key2=value2
	svcCallObj.sCallBackFnc = "fn_Callback";//서버에서 처리가 완료된 후 Callback 받을 Function 명		
	
	//[공통]서비스 호출
	this.gfn_CallComService(this, svcCallObj);	



	//trace("cal_PareDd 5=" + this.div_MasterInput.form.tab_Master.tpg_01.form.cal_PareDd.value);
}

/***********************************************************************************************
 * 05.02. [Vaildation] Master 저장 필수값 체크 - 입력항목 
 ***********************************************************************************************/ 
this.fn_VaildMasterSave = function()
{
	//[저장] Validation 설정
	var arrArgs;
		var sAcchGu = this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_AcchGu.value;//발의구분
		
		//발의구분이 지출/수입인경우
		if (sAcchGu == "1" || sAcchGu == "2") {
			arrArgs = ["this.div_MasterInput.form.tab_Master.tpg_01.form.cal_AcchDd^" + this.div_MasterInput.form.tab_Master.tpg_01.form.sta_AcchDd.text + "|NULL" //발의일자
					  ,"this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_ActyCd^" + this.div_MasterInput.form.tab_Master.tpg_01.form.sta_ActyCd.text + "|NULL" //발의시스템
					  ,"this.div_MasterInput.form.tab_Master.tpg_01.form.edt_DepmCd^" + this.div_MasterInput.form.tab_Master.tpg_01.form.sta_DepmCd.text + "|NULL" //발의부서
					  ,"this.div_MasterInput.form.tab_Master.tpg_01.form.edt_DepmNm^" + this.div_MasterInput.form.tab_Master.tpg_01.form.sta_DepmCd.text + "|NULL" //발의부서명
					  ,"this.div_MasterInput.form.tab_Master.tpg_01.form.edt_SystId^" + this.div_MasterInput.form.tab_Master.tpg_01.form.sta_EmpmCd.text  + "|NULL" //발의자
					  ,"this.div_MasterInput.form.tab_Master.tpg_01.form.edt_EmpmNm^" + this.div_MasterInput.form.tab_Master.tpg_01.form.sta_EmpmCd.text  + "|NULL" //발의자명
					  ,"this.div_MasterInput.form.tab_Master.tpg_01.form.edt_AcumCd^" + this.div_MasterInput.form.tab_Master.tpg_01.form.sta_AcumCd.text  + "|NULL" //회계단위
					  ,"this.div_MasterInput.form.tab_Master.tpg_01.form.edt_AcumNm^" + this.div_MasterInput.form.tab_Master.tpg_01.form.sta_AcumCd.text  + "|NULL" //회계단위명
					  ,"this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_AcchGu^" + this.div_MasterInput.form.tab_Master.tpg_01.form.sta_AcchGu.text  + "|NULL" //발의구분
					  ,"this.div_MasterInput.form.tab_Master.tpg_01.form.edt_AcchNm^" + this.div_MasterInput.form.tab_Master.tpg_01.form.sta_AcchNm.text  + "|NULL" //내용요약
// 					  ,"this.div_MasterInput.form.tab_Master.tpg_01.form.cal_PareDd^" + this.div_MasterInput.form.tab_Master.tpg_01.form.sta_PareDd.text  + "|NULL" //지급요청일자
// 					  ,"this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PacsGu^" + this.div_MasterInput.form.tab_Master.tpg_01.form.sta_PacsGu.text  + "|NULL" //지급구분
// 					  ,"this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PacsCd^" + this.div_MasterInput.form.tab_Master.tpg_01.form.sta_PacsCd.text  + "|NULL" //지급처 
// 					  ,"this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PacsNm^" + this.div_MasterInput.form.tab_Master.tpg_01.form.sta_PacsCd.text  + "|NULL" //지급처명 
					  ,
					  ];
// 				if ( this.ds_Master10.getColumn(this.ds_Master10.rowposition, "PACS_GU")=="0030"){
// 					//지급구분이 계좌이체인경우 지급계좌, 입금계좌 필수체크
// 					arrArgs.push("this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PaacNo^" + this.div_MasterInput.form.tab_Master.tpg_01.form.sta_PaacNo.text  + "|NULL"  );//계좌정보
// 				}
					 
			
		} else {
			arrArgs = ["this.div_MasterInput.form.tab_Master.tpg_01.form.cal_AcchDd^" + this.div_MasterInput.form.tab_Master.tpg_01.form.sta_AcchDd.text + "|NULL" //발의일자
					  ,"this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_ActyCd^" + this.div_MasterInput.form.tab_Master.tpg_01.form.sta_ActyCd.text + "|NULL" //발의시스템
					  ,"this.div_MasterInput.form.tab_Master.tpg_01.form.edt_DepmCd^" + this.div_MasterInput.form.tab_Master.tpg_01.form.sta_DepmCd.text + "|NULL" //발의부서
					  ,"this.div_MasterInput.form.tab_Master.tpg_01.form.edt_DepmNm^" + this.div_MasterInput.form.tab_Master.tpg_01.form.sta_DepmCd.text + "|NULL" //발의부서명
					  ,"this.div_MasterInput.form.tab_Master.tpg_01.form.edt_SystId^" + this.div_MasterInput.form.tab_Master.tpg_01.form.sta_EmpmCd.text  + "|NULL" //발의자
					  ,"this.div_MasterInput.form.tab_Master.tpg_01.form.edt_AcumCd^" + this.div_MasterInput.form.tab_Master.tpg_01.form.sta_AcumCd.text  + "|NULL" //회계단위
					  ,"this.div_MasterInput.form.tab_Master.tpg_01.form.edt_AcumNm^" + this.div_MasterInput.form.tab_Master.tpg_01.form.sta_AcumCd.text  + "|NULL" //회계단위명
					  ,"this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_AcchGu^" + this.div_MasterInput.form.tab_Master.tpg_01.form.sta_AcchGu.text  + "|NULL" //발의구분
					  ,"this.div_MasterInput.form.tab_Master.tpg_01.form.edt_AcchNm^" + this.div_MasterInput.form.tab_Master.tpg_01.form.sta_AcchNm.text  + "|NULL" //내용요약					  
					  ]; 		
		}
				  
	var sCheckGroupTitle = this.div_MasterInput.form.tab_Master.tpg_01.text;//체크그룹 타이틀

	//컴포넌트 Vaild 체크
	if (!this.gfn_CheckFormCompValid(this, arrArgs, sCheckGroupTitle)) {
		return false;
	}
	
	return true;
}

/***********************************************************************************************
 * 05.03. [Vaildation] Detail 저장 필수값 체크 - 그리드항목
 ***********************************************************************************************/ 
this.fn_VaildDetailSave = function()
{


	//[저장] Validation 설정
	var arrArgs = ["ACOM_CD^NULL"  /* 계정코드 */
	              , "ACOM_NM^NULL"  /* 계정코드명 */
                  , "REMK_NM^NULL" /*적요*/
			      ]; 
				  
	var sCheckGroupTitle = this.div_DetailInput.form.tab_Detail.tpg_01.text;//체크그룹 타이틀
				
	
	//Grid Vaild 체크
	if (!this.gfn_CheckGridValid(this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10, arrArgs, sCheckGroupTitle) ) {
	 
		return false;
	}
	
	//마감체크
	if(this.ds_Detail10.getCaseCount("CONF_YN == 'Y'") > 0 ){
	
		//예산편성확정 여부 체크
		//마감여부 체크
		var paramObj= new Object();//[공통] 예산통제체크 파라메타 정보 Object
		var mgasDst  = "C";//[필수] 마감구분 - C: 마감여부, A: 회계마감여부  
		paramObj.MGAS_MM = this.ds_Detail10.getColumn(0, "BUDG_MM").substr(0,6);//마감년월
		paramObj.MODM_CD = "CC";//[필수] 모듈구분(공통코드-CA910(마감구분) 참조) : CC - 예산편성확정 마감여부, CB - 예산마감 여부
		paramObj.ACUM_CD = "";//[선택] 회계단위
		paramObj.BUSM_CD  = "";//[선택] 사업부문
		paramObj.SAUM_CD  = "";//[선택] 사업장코드
		paramObj.DEPM_CD  = "";//[선택] 부서코드
		paramObj.MODD_CD  = "";//[선택] 모듈상세구분(CA900)
		paramObj.BFPR_YN  = "Y";//[선택] 마감전 프로세스여부
		
		var bCheck = this.gfn_CheckMgas(paramObj, mgasDst);	
		
		if (!bCheck) {
			
			//trace("=============================2==============================");
			var arrMsgArg = ["1"];
			this.gfn_Alert("CA017", arrMsgArg);//해당월의 예산편성확정 정보가 없습니다.	
			//this.gfn_Alert("CA017");//해당월의 예산편성확정 정보가 없습니다.
			return false;
		}
	}
	
	//차/대금액 체크
	//dataset.getCaseSum("crudType != 'D'", "DEBI_AM") 
	
	
 	var dDEBI_AM = nexacro.toNumber(this.ds_Detail10.getCaseSum("crudType != 'D'", "DEBI_AM"));//차변금액
 	var dCRED_AM = nexacro.toNumber(this.ds_Detail10.getCaseSum("crudType != 'D'", "CRED_AM"));//대변금액

	if (dDEBI_AM != dCRED_AM) {
		this.gfn_Alert("FA010");//차변/대변 금액이 일치하지 않습니다.
		return false;
	}
	
	//회계기준코드 필수 체크
	var dCtrlCd = "";
	var dPalmCd = "";
	for (var iLoop=0; iLoop<this.ds_Detail10.getRowCount(); iLoop++) {
		dCtrlCd = this.ds_Detail10.getColumn(iLoop, "CTRL_CD");//01관리항목 필수여부
		if(!this.gfn_IsNull(dCtrlCd)){
			//계정의 전표손익제어 값이 있다면 회계기준코드 필수 체크를한다.
			dPalmCd = this.ds_Detail10.getColumn(iLoop, "PALM_CD");  //회계기준코드
			if(this.gfn_IsNull(dPalmCd)){
				this.ds_Detail10.set_rowposition(iLoop);
				
				var arrMsgArg = ["회계기준코드"];
				this.gfn_Alert("SM008", arrMsgArg);//&ITM0은(는) 필수 입력 항목입니다.	
				return false;
			}
		}
	}
	
	
	
	//관리항목 체크
	var dedtCd = "";
	var vdedtCd = "";
	
	var findRow = -1;
	for (var iLoop=1; iLoop< 9; iLoop++) {
	
		findRow = this.ds_Detail10.findRowExpr("DE0"+iLoop+"_CD != VDE0"+iLoop+"_CD && MA0"+iLoop+"_CD != '3'");
		while (findRow > -1){
		
			this.ds_Detail10.setColumn(findRow, "DE0"+iLoop+"_CD", this.ds_Detail10.getColumn(findRow, "VDE0"+iLoop+"_CD"));
			
			findRow = this.ds_Detail10.findRowExpr("DE0"+iLoop+"_CD != VDE0"+iLoop+"_CD");
		}
	}
	
	
	
	//관리항목 필수항목 체크
	var crudType = "";
	var iFindRow = 0;
	var sMA01_YN = "";//01관리항목 필수여부
	var sMA02_YN = "";//02관리항목 필수여부
	var sMA03_YN = "";//03관리항목 필수여부
	var sMA04_YN = "";//04관리항목 필수여부
	var sMA05_YN = "";//05관리항목 필수여부
	var sMA06_YN = "";//06관리항목 필수여부
	var sMA07_YN = "";//07관리항목 필수여부
	var sMA08_YN = "";//08관리항목 필수여부
	
	var sMA01_CD = "";//01관리항목코드
	var sMA02_CD = "";//02관리항목코드
	var sMA03_CD = "";//03관리항목코드
	var sMA04_CD = "";//04관리항목코드
	var sMA05_CD = "";//05관리항목코드
	var sMA06_CD = "";//06관리항목코드
	var sMA07_CD = "";//07관리항목코드
	var sMA08_CD = "";//08관리항목코드
	
	
	var dDebiAm = 0; //차변금액
	var dCredAm = 0; //대변금액
	
	
	
	var sCheckValue = "";//체크항목값
	var sACOM_NM = "";//계정명
	
	for (var iLoop=0; iLoop<this.ds_Detail10.getRowCount(); iLoop++) {
		crudType = this.ds_Detail10.getColumn(iLoop, "crudType");		
		
		dDebiAm = nexacro.toNumber(this.ds_Detail10.getColumn(iLoop, "DEBI_AM"));
		dCredAm = nexacro.toNumber(this.ds_Detail10.getColumn(iLoop, "CRED_AM"));
		
		
		//신규, 수정건인경우
		if (crudType == "I" || crudType == "U" ) {
			sMA01_YN = this.ds_Detail10.getColumn(iLoop, "MA01_YN");//01관리항목 필수여부
			sMA02_YN = this.ds_Detail10.getColumn(iLoop, "MA02_YN");//02관리항목 필수여부
			sMA03_YN = this.ds_Detail10.getColumn(iLoop, "MA03_YN");//03관리항목 필수여부
			sMA04_YN = this.ds_Detail10.getColumn(iLoop, "MA04_YN");//04관리항목 필수여부
			sMA05_YN = this.ds_Detail10.getColumn(iLoop, "MA05_YN");//05관리항목 필수여부
			sMA06_YN = this.ds_Detail10.getColumn(iLoop, "MA06_YN");//06관리항목 필수여부
			sMA07_YN = this.ds_Detail10.getColumn(iLoop, "MA07_YN");//07관리항목 필수여부
			sMA08_YN = this.ds_Detail10.getColumn(iLoop, "MA08_YN");//08관리항목 필수여부
			
			sMA01_CD = this.ds_Detail10.getColumn(iLoop, "MA01_CD");//01관리항목 코드
			sMA02_CD = this.ds_Detail10.getColumn(iLoop, "MA02_CD");//02관리항목 코드
			sMA03_CD = this.ds_Detail10.getColumn(iLoop, "MA03_CD");//03관리항목 코드
			sMA04_CD = this.ds_Detail10.getColumn(iLoop, "MA04_CD");//04관리항목 코드
			sMA05_CD = this.ds_Detail10.getColumn(iLoop, "MA05_CD");//05관리항목 코드
			sMA06_CD = this.ds_Detail10.getColumn(iLoop, "MA06_CD");//06관리항목 코드
			sMA07_CD = this.ds_Detail10.getColumn(iLoop, "MA07_CD");//07관리항목 코드
			sMA08_CD = this.ds_Detail10.getColumn(iLoop, "MA08_CD");//08관리항목 코드
			
			
			
			sACOM_NM = this.ds_Detail10.getColumn(iLoop, "ACOM_NM");//계정명
						
			//01관리항목이 필수인경우
			//trace("=============6-1=============");
			if (sMA01_YN == "1") {
				sCheckValue = this.ds_Detail10.getColumn(iLoop, "DE01_NM");//체크항목값

				if(sMA01_CD == "C3"){
					//부가세금액은 0 가능
					if((dDebiAm + dCredAm == 0 && this.gfn_IsNull(sCheckValue) ) 
					 || (this.gfn_IsNull(sCheckValue) && this.ds_Detail10.getColumn(iLoop, "DECR_GU") != this.ds_Detail10.getColumn(iLoop, "DECR_GU_CHK")) ){
						//차대변금액이 모두 0 이고 부가세 금액이 없으면
						this.ds_Detail10.setColumn(iLoop, "DE01_NM", 0);
						sCheckValue = this.ds_Detail10.getColumn(iLoop, "DE01_NM");//체크항목값
					}
				}
				
				if(sMA01_CD == "c"){
					//부가세금액은 0 가능
					if(this.gfn_IsNull(sCheckValue)){
						//차대변금액이 모두 0 이고 부가세 금액이 없으면
						this.ds_Detail10.setColumn(iLoop, "DE01_NM", 0);
						sCheckValue = this.ds_Detail10.getColumn(iLoop, "DE01_NM");//체크항목값
					}
				}
				
				
				if (this.gfn_IsNull(sCheckValue)) {
					this.ds_Detail10.set_rowposition(iLoop);
					var arrMsgArg = [sACOM_NM, this.div_DetailInput.form.div_detailRight.form.div_Item.form.sta_Ma01.text];
					this.gfn_Alert("FA009", arrMsgArg);//[ &ITM0 ] 계정의 관리항목 &ITM1 (은/는) 필수입력 항목입니다. 						
					return false;
				}					
			}
			
			//trace("=============6-2=============");
			//02관리항목이 필수인경우
			if (sMA02_YN == "1") {
				sCheckValue = this.ds_Detail10.getColumn(iLoop, "DE02_NM");//체크항목값
				
				if(sMA02_CD == "C3"){
					//부가세금액은 0 가능
					if((dDebiAm + dCredAm == 0 && this.gfn_IsNull(sCheckValue) ) 
					 || (this.gfn_IsNull(sCheckValue) && this.ds_Detail10.getColumn(iLoop, "DECR_GU") != this.ds_Detail10.getColumn(iLoop, "DECR_GU_CHK")) ){
						//차대변금액이 모두 0 이고 부가세 금액이 없으면
						this.ds_Detail10.setColumn(iLoop, "DE02_NM", 0);
						sCheckValue = this.ds_Detail10.getColumn(iLoop, "DE02_NM");//체크항목값
					}
				}
				
				if(sMA02_CD == "c"){
					//부가세금액은 0 가능
					if(this.gfn_IsNull(sCheckValue)){
						//차대변금액이 모두 0 이고 부가세 금액이 없으면
						this.ds_Detail10.setColumn(iLoop, "DE02_NM", 0);
						sCheckValue = this.ds_Detail10.getColumn(iLoop, "DE02_NM");//체크항목값
					}
				}
				
				
				if (this.gfn_IsNull(sCheckValue)) {
					this.ds_Detail10.set_rowposition(iLoop);
					var arrMsgArg = [sACOM_NM, this.div_DetailInput.form.div_detailRight.form.div_Item.form.sta_Ma02.text];
					this.gfn_Alert("FA009", arrMsgArg);//[ &ITM0 ] 계정의 관리항목 &ITM1 (은/는) 필수입력 항목입니다. 							
					return false;
				}					
			}		
			
			//trace("=============6-3=============");
			//03관리항목이 필수인경우
			if (sMA03_YN == "1") {
			
				sCheckValue = this.ds_Detail10.getColumn(iLoop, "DE03_NM");//체크항목값

				if(sMA03_CD == "C3"){
					//부가세금액은 0 가능
					if((dDebiAm + dCredAm == 0 && this.gfn_IsNull(sCheckValue) ) 
					 || (this.gfn_IsNull(sCheckValue) && this.ds_Detail10.getColumn(iLoop, "DECR_GU") != this.ds_Detail10.getColumn(iLoop, "DECR_GU_CHK")) ){
						//차대변금액이 모두 0 이고 부가세 금액이 없으면
						this.ds_Detail10.setColumn(iLoop, "DE03_NM", 0);
						sCheckValue = this.ds_Detail10.getColumn(iLoop, "DE03_NM");//체크항목값
					}
				}
				
				if(sMA03_CD == "c"){
					//부가세금액은 0 가능
					if(this.gfn_IsNull(sCheckValue)){
						//차대변금액이 모두 0 이고 부가세 금액이 없으면
						this.ds_Detail10.setColumn(iLoop, "DE03_NM", 0);
						sCheckValue = this.ds_Detail10.getColumn(iLoop, "DE03_NM");//체크항목값
					}
				}
				

				if (this.gfn_IsNull(sCheckValue)) {
					this.ds_Detail10.set_rowposition(iLoop);
					var arrMsgArg = [sACOM_NM, this.div_DetailInput.form.div_detailRight.form.div_Item.form.sta_Ma03.text];
					this.gfn_Alert("FA009", arrMsgArg);//[ &ITM0 ] 계정의 관리항목 &ITM1 (은/는) 필수입력 항목입니다. 							
					return false;
				}					
			}
			
			//trace("=============6-4=============");
			//04관리항목이 필수인경우
			if (sMA04_YN == "1") {
				sCheckValue = this.ds_Detail10.getColumn(iLoop, "DE04_NM");//체크항목값
				
				if(sMA04_CD == "C3"){
					//부가세금액은 0 가능
					if((dDebiAm + dCredAm == 0 && this.gfn_IsNull(sCheckValue) ) 
					 || (this.gfn_IsNull(sCheckValue) && this.ds_Detail10.getColumn(iLoop, "DECR_GU") != this.ds_Detail10.getColumn(iLoop, "DECR_GU_CHK")) ){
						//차대변금액이 모두 0 이고 부가세 금액이 없으면
						this.ds_Detail10.setColumn(iLoop, "DE04_NM", 0);
						sCheckValue = this.ds_Detail10.getColumn(iLoop, "DE04_NM");//체크항목값
					}
				}
				
				if(sMA04_CD == "c"){
					//부가세금액은 0 가능
					if(this.gfn_IsNull(sCheckValue)){
						//차대변금액이 모두 0 이고 부가세 금액이 없으면
						this.ds_Detail10.setColumn(iLoop, "DE04_NM", 0);
						sCheckValue = this.ds_Detail10.getColumn(iLoop, "DE04_NM");//체크항목값
					}
				}
				
				
				if (this.gfn_IsNull(sCheckValue)) {
					this.ds_Detail10.set_rowposition(iLoop);
					var arrMsgArg = [sACOM_NM, this.div_DetailInput.form.div_detailRight.form.div_Item.form.sta_Ma04.text];
					this.gfn_Alert("FA009", arrMsgArg);//[ &ITM0 ] 계정의 관리항목 &ITM1 (은/는) 필수입력 항목입니다. 							
					return false;
				}					
			}	
			
			//trace("=============6-5=============");
			//05관리항목이 필수인경우
			if (sMA05_YN == "1") {
				sCheckValue = this.ds_Detail10.getColumn(iLoop, "DE05_NM");//체크항목값
				
				if(sMA05_CD == "C3"){
					//부가세금액은 0 가능
					if((dDebiAm + dCredAm == 0 && this.gfn_IsNull(sCheckValue) ) 
					 || (this.gfn_IsNull(sCheckValue) && this.ds_Detail10.getColumn(iLoop, "DECR_GU") != this.ds_Detail10.getColumn(iLoop, "DECR_GU_CHK")) ){
						//차대변금액이 모두 0 이고 부가세 금액이 없으면
						this.ds_Detail10.setColumn(iLoop, "DE05_NM", 0);
						sCheckValue = this.ds_Detail10.getColumn(iLoop, "DE05_NM");//체크항목값
					}
				}
				
				if(sMA05_CD == "c"){
					//부가세금액은 0 가능
					
					if(this.gfn_IsNull(sCheckValue)){
						//차대변금액이 모두 0 이고 부가세 금액이 없으면
						this.ds_Detail10.setColumn(iLoop, "DE05_NM", 0);
						sCheckValue = this.ds_Detail10.getColumn(iLoop, "DE05_NM");//체크항목값
					}
				}
				
				
				if (this.gfn_IsNull(sCheckValue)) {
					this.ds_Detail10.set_rowposition(iLoop);
					var arrMsgArg = [sACOM_NM, this.div_DetailInput.form.div_detailRight.form.div_Item.form.sta_Ma05.text];
					this.gfn_Alert("FA009", arrMsgArg);//[ &ITM0 ] 계정의 관리항목 &ITM1 (은/는) 필수입력 항목입니다. 							
					return false;
				}					
			}
			
			//trace("=============6-6=============");
			//06관리항목이 필수인경우
			if (sMA06_YN == "1") {
				
				sCheckValue = this.ds_Detail10.getColumn(iLoop, "DE06_NM");//체크항목값
				
				//trace("========"+iLoop+"==========  "+sMA06_CD+" =" + sCheckValue);
				
				if(sMA06_CD == "C3"){
					//부가세금액은 0 가능
					//trace("========"+iLoop+"==========  dDebiAm + dCredAm =" + dDebiAm + dCredAm);
					if((dDebiAm + dCredAm == 0 && this.gfn_IsNull(sCheckValue) ) 
					 || (this.gfn_IsNull(sCheckValue) && this.ds_Detail10.getColumn(iLoop, "DECR_GU") != this.ds_Detail10.getColumn(iLoop, "DECR_GU_CHK")) ){
						//차대변금액이 모두 0 이고 부가세 금액이 없으면
						
						this.ds_Detail10.setColumn(iLoop, "DE06_NM", 0);
						sCheckValue = this.ds_Detail10.getColumn(iLoop, "DE06_NM");//체크항목값
						
						//trace("========"+iLoop+"========== sCheckValue =" + sCheckValue);
					}
					
					
				}
				
				if(sMA06_CD == "c"){
					//부가세금액은 0 가능
					if(this.gfn_IsNull(sCheckValue)){
						//차대변금액이 모두 0 이고 부가세 금액이 없으면
						this.ds_Detail10.setColumn(iLoop, "DE06_NM", 0);
						sCheckValue = this.ds_Detail10.getColumn(iLoop, "DE06_NM");//체크항목값
					}
				}
				
				
				if (this.gfn_IsNull(sCheckValue)) {
					this.ds_Detail10.set_rowposition(iLoop);
					var arrMsgArg = [sACOM_NM, this.div_DetailInput.form.div_detailRight.form.div_Item.form.sta_Ma06.text];
					this.gfn_Alert("FA009", arrMsgArg);//[ &ITM0 ] 계정의 관리항목 &ITM1 (은/는) 필수입력 항목입니다. 							
					return false;
				}					
			}	
			
			//trace("=============6-7=============");
			//07관리항목이 필수인경우
			if (sMA07_YN == "1") {
				sCheckValue = this.ds_Detail10.getColumn(iLoop, "DE07_NM");//체크항목값
				
				if(sMA07_CD == "C3"){
					//부가세금액은 0 가능
					if((dDebiAm + dCredAm == 0 && this.gfn_IsNull(sCheckValue) ) 
					 || (this.gfn_IsNull(sCheckValue) && this.ds_Detail10.getColumn(iLoop, "DECR_GU") != this.ds_Detail10.getColumn(iLoop, "DECR_GU_CHK")) ){
						//차대변금액이 모두 0 이고 부가세 금액이 없으면
						this.ds_Detail10.setColumn(iLoop, "DE07_NM", 0);
						sCheckValue = this.ds_Detail10.getColumn(iLoop, "DE07_NM");//체크항목값
					}
				}
				
				if(sMA07_CD == "c"){
					//부가세금액은 0 가능
					if(this.gfn_IsNull(sCheckValue)){
						//차대변금액이 모두 0 이고 부가세 금액이 없으면
						this.ds_Detail10.setColumn(iLoop, "DE07_NM", 0);
						sCheckValue = this.ds_Detail10.getColumn(iLoop, "DE07_NM");//체크항목값
					}
				}
				
				
				if (this.gfn_IsNull(sCheckValue)) {
					this.ds_Detail10.set_rowposition(iLoop);
					var arrMsgArg = [sACOM_NM, this.div_DetailInput.form.div_detailRight.form.div_Item.form.sta_Ma07.text];
					this.gfn_Alert("FA009", arrMsgArg);//[ &ITM0 ] 계정의 관리항목 &ITM1 (은/는) 필수입력 항목입니다. 							
					return false;
				}					
			}
			
			//trace("=============6-8=============");
			//08관리항목이 필수인경우
			if (sMA08_YN == "1") {
				sCheckValue = this.ds_Detail10.getColumn(iLoop, "DE08_NM");//체크항목값

				if(sMA08_CD == "C3"){
					//부가세금액은 0 가능
					// 
					if((dDebiAm + dCredAm == 0 && this.gfn_IsNull(sCheckValue) ) 
					 || (this.gfn_IsNull(sCheckValue) && this.ds_Detail10.getColumn(iLoop, "DECR_GU") != this.ds_Detail10.getColumn(iLoop, "DECR_GU_CHK")) ){
						//차대변금액이 모두 0 이고 부가세 금액이 없으면
						this.ds_Detail10.setColumn(iLoop, "DE08_NM", 0);
						sCheckValue = this.ds_Detail10.getColumn(iLoop, "DE08_NM");//체크항목값
					}
				}
				if(sMA08_CD == "c"){
					//부가세금액은 0 가능
					if(this.gfn_IsNull(sCheckValue)){
						//차대변금액이 모두 0 이고 부가세 금액이 없으면
						this.ds_Detail10.setColumn(iLoop, "DE08_NM", 0);
						sCheckValue = this.ds_Detail10.getColumn(iLoop, "DE08_NM");//체크항목값
					}
				}
				//trace("=============6-8  =============" + sCheckValue);
				if (this.gfn_IsNull(sCheckValue)) {
				
					//trace("=============6-8- 1  =============" + sCheckValue);
					//alert(this.div_DetailInput.form.div_detailRight.form.div_Item.form.sta_Ma08.text);
					this.ds_Detail10.set_rowposition(iLoop);
					var arrMsgArg = [sACOM_NM, this.div_DetailInput.form.div_detailRight.form.div_Item.form.sta_Ma08.text];
					
					this.gfn_Alert("FA009", arrMsgArg);//[ &ITM0 ] 계정의 관리항목 &ITM1 (은/는) 필수입력 항목입니다. 							
					return false;
				}					
			}				
			//trace("=============6-9=============");
		}
		
	}
	//trace("=============6-10=============");
	//예산통제정보 체크
	this.ds_Detail12.clearData();
	
	var sBGCM_YN = "";//예산통제여부
	var sBUDG_MM= "";//편성년월
	var oBUDG_MM= "";//편성년월
	var sBUDP_CD = "";//예산부서코드
	var oBUDP_CD = "";//예산부서코드
	var sACOM_CD = "";//계정코드
	var oACOM_CD = "";//계정코드
	var sACOM_NM = "";//계정명
	var oACOM_NM = "";//계정명
	var sDECR_GU = "";//차대구분
	var sSumCol = "";//합계대상컬럼
	var iFindRow = 0;
	var iAddRow = 0;
	var dUseAmSum = 0;//사용금액합계
	var dsDOrgAm = 0; //변동금액
	
	//trace("=============6-11=============");
	//예산통제대상 계정취합
	for (var iLoop=0; iLoop<this.ds_Detail10.getRowCount(); iLoop++) {
	
	
		sBGCM_YN = this.ds_Detail10.getColumn(iLoop, "BGCM_YN");//예산통제여부
		sBUDG_MM = this.ds_Detail10.getColumn(iLoop, "BUDG_MM");//편성년월
		oBUDG_MM = this.ds_Detail10.getOrgColumn(iLoop, "BUDG_MM");//편성년월
		sBUDP_CD = this.ds_Detail10.getColumn(iLoop, "BUDP_CD");//예산부서코드
		oBUDP_CD = this.ds_Detail10.getOrgColumn(iLoop, "BUDP_CD");//예산부서코드
		sACOM_CD = this.ds_Detail10.getColumn(iLoop, "ACOM_CD");//계정코드
		oACOM_CD = this.ds_Detail10.getOrgColumn(iLoop, "ACOM_CD");//계정코드
		sACOM_NM = this.ds_Detail10.getColumn(iLoop, "ACOM_NM");//계정명
		oACOM_NM = this.ds_Detail10.getOrgColumn(iLoop, "ACOM_NM");//계정명
		sDECR_GU = this.ds_Detail10.getColumn(iLoop, "DECR_GU");//차대구분
		
		//trace("=============6-12=============");
		//예산통제계정인경우
		if (sBGCM_YN == "Y") {
			
		
			iFindRow = this.ds_Detail12.findRowExpr("BUGS_YM == '" + sBUDG_MM + "' && DEPM_CD == '" + sBUDP_CD + "' && ACOM_CD == '" + sACOM_CD + "'" );
			//trace("=============iFindRow=============" + iFindRow);
			if (iFindRow < 0) {
				iAddRow = this.ds_Detail12.addRow();
				this.ds_Detail12.setColumn(iAddRow, "BUGS_YM", sBUDG_MM);//편성년월
				this.ds_Detail12.setColumn(iAddRow, "DEPM_CD", sBUDP_CD);//예산부서코드
				this.ds_Detail12.setColumn(iAddRow, "ACOM_CD", sACOM_CD);//계정코드
				this.ds_Detail12.setColumn(iAddRow, "ACOM_NM", sACOM_NM);//계정명
				//trace("=============6-14=============");
				//차대구분-차변
				if (sDECR_GU == "D") {
					sSumCol = "DEBI_AM";//합계대상컬럼
				} else {
					sSumCol = "CRED_AM";//합계대상컬럼
				}
				//trace("=============6-15=============");
				dUseAmSum = this.ds_Detail10.getCaseSum("DECR_GU == '" + sDECR_GU + "' && ACOM_CD == '" + sACOM_CD + "' && BUDG_MM == '" + sBUDG_MM + "' && BUDP_CD == '" + sBUDP_CD + "'", sSumCol);//사용금액합
				this.ds_Detail12.setColumn(iAddRow, "USED_AM", dUseAmSum);//사용금액합계
			}
			
			iAddRow = -1;
			if(this.ds_Detail10.getColumn(iLoop, "crudType") =="U"){
				if (oACOM_NM != sACOM_NM || sBUDG_MM != oBUDG_MM || sBUDP_CD != oBUDP_CD){
					iAddRow = this.ds_Detail12.addRow();
					this.ds_Detail12.setColumn(iAddRow, "ACOM_CD", oACOM_CD);//계정코드
					this.ds_Detail12.setColumn(iAddRow, "ACOM_NM", oACOM_NM);//계정명
					this.ds_Detail12.setColumn(iAddRow, "BUGS_YM", oBUDG_MM);//편성년월
					this.ds_Detail12.setColumn(iAddRow, "DEPM_CD", oBUDP_CD);//편성년월
					if (sDECR_GU == "D") {
						sSumCol = "DEBI_AM";//합계대상컬럼
					} else {
						sSumCol = "CRED_AM";//합계대상컬럼
					}
					dUseAmSum = this.ds_Detail10.getOrgColumn(iLoop, sSumCol) * -1;
					this.ds_Detail12.setColumn(iAddRow, "USED_AM", dUseAmSum);//사용금액합계
				}
			}
			/*
			if(this.ds_Detail10.getColumn(iLoop, "crudType") =="U"){
				if (oACOM_NM != sACOM_NM){
					if(iAddRow <= -1){
						iAddRow = this.ds_Detail12.addRow();
					}
					this.ds_Detail12.setColumn(iAddRow, "ACOM_CD", oACOM_CD);//계정코드
					this.ds_Detail12.setColumn(iAddRow, "ACOM_NM", oACOM_NM);//계정명
				}
				if (sBUDG_MM != oBUDG_MM){
					if(iAddRow <= -1){
						iAddRow = this.ds_Detail12.addRow();
					}
					this.ds_Detail12.setColumn(iAddRow, "BUGS_YM", oBUDG_MM);//편성년월
				}
				if (sBUDP_CD != oBUDP_CD){
					if(iAddRow <= -1){
						iAddRow = this.ds_Detail12.addRow();
					}
					this.ds_Detail12.setColumn(iAddRow, "DEPM_CD", oBUDP_CD);//편성년월
				}
				
				if(iAddRow > - 1){
					if (oACOM_NM == sACOM_NM){
						this.ds_Detail12.setColumn(iAddRow, "ACOM_CD", sACOM_CD);//계정코드
						this.ds_Detail12.setColumn(iAddRow, "ACOM_NM", sACOM_NM);//계정명
					}
					if (sBUDG_MM == oBUDG_MM){
						this.ds_Detail12.setColumn(iAddRow, "BUGS_YM", sBUDG_MM);//편성년월
					}
					if (sBUDP_CD == oBUDP_CD){
						this.ds_Detail12.setColumn(iAddRow, "DEPM_CD", sBUDP_CD);//편성년월
					}
					
					if (sDECR_GU == "D") {
						sSumCol = "DEBI_AM";//합계대상컬럼
					} else {
						sSumCol = "CRED_AM";//합계대상컬럼
					}
					dUseAmSum = this.ds_Detail10.getOrgColumn(iLoop, sSumCol) * -1;
					this.ds_Detail12.setColumn(iAddRow, "USED_AM", dUseAmSum);//사용금액합계
				}
			}	
			*/
			
			
		}
	}
	
	//trace("=============this.ds_Detail12.getRowCount()=============" + this.ds_Detail12.getRowCount());
	if (this.ds_Detail12.getRowCount() > 0) {
		
		for (var iLoop=0; iLoop<this.ds_Detail12.getRowCount(); iLoop++) {
		
			//trace("=============this.ds_Detail12.USED_AM=============" + this.ds_Detail12.getColumn(iLoop, "USED_AM"));
		
			this.ds_Input.clearData();
			this.ds_Detail11.clearData();
			
			sBUDG_MM = this.ds_Detail12.getColumn(iLoop, "BUGS_YM");//편성년월
			sBUDP_CD = this.ds_Detail12.getColumn(iLoop, "DEPM_CD");//예산부서코드
			sACOM_CD = this.ds_Detail12.getColumn(iLoop, "ACOM_CD");//계정코드			
			sACOM_NM = this.ds_Detail12.getColumn(iLoop, "ACOM_NM");//계정명
			dUseAmSum = nexacro.toNumber(this.ds_Detail12.getColumn(iLoop, "USED_AM"));//사용금액합계			
			//trace("=============6-17=============");
			this.ds_Input.addRow();

			this.ds_Input.setColumn(0, "BUGS_YM", sBUDG_MM);
			this.ds_Input.setColumn(0, "DEPM_CD", sBUDP_CD);
			this.ds_Input.setColumn(0, "ACOM_CD", sACOM_CD);
			
			//[공통]서비스정보 초기화
			this.gfn_InitComService(this);
				
			//[공통]서비스정보 추가
			var svcAddObj = new Object();//[공통] 서비스 추가 파라메타 정보 Object
			svcAddObj.sSelectSql = "fa:M_FA_1000_D_SL12";
			this.gfn_AddComSearchService(this, svcAddObj);			

			//[공통]서비스 호출 변수
			var svcCallObj = new Object();//[공통] 서비스 파라메타 정보 Object
				//trace("=============6-18=============");
			svcCallObj.sTrid = "CHK_BUDG";//Transaction ID 등 callback에서 넘겨 받을 String을 지정
			svcCallObj.sActionName = this.G_SV_FA;//서버에서 호출할 Action - 모듈별로 호출되는 기본 Actio이 다름 : 공통 서비스 Action 업무구분  변수 참조
			svcCallObj.sInputDaset = "ds_Input=ds_Input" //입력 데이터셋
			svcCallObj.sOutDatset = "ds_Detail11=ds_Detail11";//출력 데이터셋
			svcCallObj.sOtherArg = "";//서버로 전송할 기타 Argument 정보 문자열, 예) key=value key2=value2
			svcCallObj.sCallBackFnc = "fn_Callback";//서버에서 처리가 완료된 후 Callback 받을 Function 명
			svcCallObj.isSync = true;//동기식으로 설정할지 여부

			//[공통]서비스 호출
			this.gfn_CallComService(this, svcCallObj);	
			
			if (this.ds_Detail11.getRowCount() > 0) {
			//trace("=============6-19=============");
				var dRecAm = nexacro.toNumber(this.ds_Detail11.getColumn(0, "BGSU_AM"));//편성금액			
				var dUseAm2 = nexacro.toNumber(this.ds_Detail11.getColumn(0, "USED_AM"));//사용금액2				
				var iChkRow = this.ds_Detail10.findRowExpr("ACOM_CD == '" + sACOM_CD + "'");
				

				dsDOrgAm = 0;
				for (var iDLoop=0; iDLoop<this.ds_Detail10.getRowCount(); iDLoop++) {
				
						sCrudType = this.ds_Detail10.getColumn(iDLoop, "crudType");//CRUD Type
						if (sCrudType == "U" && this.ds_Detail10.getColumn(iDLoop, "ACOM_CD") == sACOM_CD){
							dsDOrgAm = dsDOrgAm + this.ds_Detail10.getOrgColumn(iDLoop, "DEBI_AM");//변경전 금액				
						}
						//trace("dsDOrgAm  == " + dsDOrgAm);
			
			
				}
				
				var dAvailAm = dRecAm - (dUseAmSum  - dsDOrgAm) ;//가용잔액 = 편성금액 - ( 사용금액1합 + 사용금액2)
				
				// 사용금액이 - 인경우
				if (dUseAm2 < 0){
					dAvailAm = dAvailAm + (dUseAm2)*-1
				}
				
				
				//trace("dRecAm = " + dRecAm);
				//trace("dUseAmSum = " + dUseAmSum);
				//trace("dUseAm2 = " + dUseAm2);
				//trace("dsDOrgAm  == " + dsDOrgAm);
				//trace("dAvailAm = " + dAvailAm);
				
				
				if (isNaN(dAvailAm) || dAvailAm < 0) {
					var arrMsgArg = [sACOM_NM, sBUDG_MM];
					this.gfn_Alert("CA014", arrMsgArg);//[&ITM0] 계정의 [&ITM1] 편성년월의 가용잔액이 부족합니다.
					this.ds_Detail10.set_rowposition(-1);
					this.ds_Detail10.set_rowposition(iChkRow);					
					return false;
				} 
				//trace("=============6-20=============");
			} else {
				//금액이 마이너스 이면 넘어간다.
				if(dUseAmSum > 0 ){
					var arrMsgArg = [sACOM_NM, sBUDG_MM];
					this.gfn_Alert("CA013", arrMsgArg);//[&ITM0] 계정의 [&ITM1] 편성년월의 예산편성정보가 없습니다.
					return false;
				}
			}
		//trace("=============6-21=============");
		}
	}
	//trace("=============6-22=============");
	return true;
}
 
/***********************************************************************************************
 * 6. 삭제
 ***********************************************************************************************/
/***********************************************************************************************
 * 06.01. [공통버튼] 삭제 버튼 클릭 이벤트
 ***********************************************************************************************/  
this.fn_ComBtnDelete = function()
{ 



	//[월마감제어-삭제]
	var sBUDG_MM = this.gfn_Nvl(this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_DD"), "");//마감년월
	
	if (!this.gfn_IsNull(sBUDG_MM)) {
		//마감여부 체크
		var paramObj= new Object();//[공통] 예산통제체크 파라메타 정보 Object
		var mgasDst  = "C";//[필수] 마감구분 - C: 마감여부, A: 회계마감여부  
		
		//수정권한이 있는 부서인 경우 마감이 되었어도 회계마감만 아니면 처리 되게 한다.
		var findRow = this.ds_Fa100.findRowExpr("CODM_CD=='"+this.gfn_GetSessionValue("DEPM_CD")+"'");
		if(findRow > -1){
			mgasDst = "A";
		}
		
		paramObj.MGAS_MM = sBUDG_MM.substr(0,6);//마감년월
		paramObj.MODM_CD = "FA";//[필수] 모듈구분(공통코드-CA910(마감구분) 참조) : CC - 예산편성확정 마감여부, CB - 예산마감 여부
		paramObj.ACUM_CD = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACUM_CD");//[선택] 회계단위
		paramObj.BUSM_CD  = "";//[선택] 사업부문
		paramObj.SAUM_CD  = "";//[선택] 사업장코드
		paramObj.DEPM_CD  = "";//[선택] 부서코드
		paramObj.MODD_CD  = "";//[선택] 모듈상세구분(CA900)
		paramObj.BFPR_YN  = "Y";//[선택] 마감전 프로세스여부
		
		var bCheck = this.gfn_CheckMgas(paramObj, mgasDst);//마감여부 체크		
		
		//월마감된 경우
		if (bCheck) {
			this.gfn_Alert("CA026");//해당월의 정보가 마감이 되어서 삭제 할 수 없습니다. 
			return;
		}	
	}
	
	
	this.gfn_Confirm("SM004", "", "CONF.DELETE", "fn_MsgCallback");//삭제 하시겠습니까?
}

/***********************************************************************************************
 * 06.02. [서비스] 삭제처리
 ***********************************************************************************************/  
this.fn_SvcDelete = function() 
{ 
	//삭제전 유효성 체크
	//Master 데이터 유효성 체크

	if (!this.fn_VaildMasterDelete()) return;

	
	//삭제키 정보 설정
	this.ds_Input.clearData();
	this.ds_Input.addRow();
	this.ds_Input.setColumn(0, "ACCH_NO", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_NO"));//발의NO
	this.ds_Input.setColumn(0, "WOFH_SQ", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "WOFH_SQ"));//결재차수
	this.ds_Input.setColumn(0, "crudType", "D");//삭제-Flag
	
	
	
	
	//[공통]서비스 정보 초기화
	this.gfn_InitComService(this);
	
	//Master 삭제
	//[공통]서비스 정보 추가
	var svcAddObj = new Object();//[공통] 서비스 추가 파라메타 정보 Object
	svcAddObj.sInsertSql = "";//저장Sql
	svcAddObj.sUpdateSql = "";//수정Sql
	svcAddObj.sDeleteSql = "fa:M_FA_1000_M_DL10";//삭제Sql
	svcAddObj.sSaveFlagColumn = "crudType";//insertSql, updateSql, deleteSql이 존재하여 신규, 수정, 삭제를 처리할 경우 기본적으로 Dataset의 getRowStates()로 판단하여 처리하며
							 //이를 Flag 컬럼으로 대체하고 싶은 경우 사용하는 [컬럼명], 해당 Flag 컬럼의 값은 신규 - I , 수정 - U , 삭제 - D의 값을 가져야 한다.

	this.gfn_AddComSaveService(this, svcAddObj);

	//Detail 삭제
	//[공통]서비스 정보 추가
	svcAddObj = new Object();//[공통] 서비스 추가 파라메타 정보 Object
	svcAddObj.sInsertSql = "";//저장Sql
	svcAddObj.sUpdateSql = "";//수정Sql
	svcAddObj.sDeleteSql = "fa:M_FA_1000_D_DL11";//삭제Sql
	svcAddObj.sSaveFlagColumn = "crudType";//insertSql, updateSql, deleteSql이 존재하여 신규, 수정, 삭제를 처리할 경우 기본적으로 Dataset의 getRowStates()로 판단하여 처리하며
							 //이를 Flag 컬럼으로 대체하고 싶은 경우 사용하는 [컬럼명], 해당 Flag 컬럼의 값은 신규 - I , 수정 - U , 삭제 - D의 값을 가져야 한다.
	
	this.gfn_AddComSaveService(this, svcAddObj);
	
	var sInputDaset = "ds_Master10=ds_Input";
	
	//집행금액 발의 계산
	this.ds_Detail13.clearData();//집행금액 발의 정보
	this.fn_CalBgacAm("D");

	if (this.ds_Detail13.getRowCount() > 0) {
		//[공통]서비스 정보 추가
		svcAddObj = new Object();//[공통] 서비스 추가 파라메타 정보 Object	
		svcAddObj.sInsertSql = "";//저장Sql
		svcAddObj.sUpdateSql = "fa:M_FA_1000_D_UP12";//수정Sql
		svcAddObj.sDeleteSql = "";//삭제Sql
		svcAddObj.sSaveFlagColumn = "crudType";//insertSql, updateSql, deleteSql이 존재하여 신규, 수정, 삭제를 처리할 경우 기본적으로 Dataset의 getRowStates()로 판단하여 처리하며
								 //이를 Flag 컬럼으로 대체하고 싶은 경우 사용하는 [컬럼명], 해당 Flag 컬럼의 값은 신규 - I , 수정 - U , 삭제 - D의 값을 가져야 한다.
		
		this.gfn_AddComSaveService(this, svcAddObj);
		
		sInputDaset =  sInputDaset + " ds_Detail13=ds_Detail13"; //입력 데이터셋 detail - > master 순으로 저장한다.

	}	

	//[공통]서비스 호출 변수
	var svcCallObj = new Object();//[공통] 서비스 파라메타 정보 Object
	svcCallObj.sTrid = "DELETE";//Transaction ID 등 callback에서 넘겨 받을 String을 지정
	svcCallObj.sActionName = "";//서버에서 호출할 Action - 모듈별로 호출되는 기본 Actio이 다름 : 공통 서비스 Action 업무구분  변수 참조
	svcCallObj.sInputDaset = sInputDaset //입력 데이터셋
	svcCallObj.sOutDatset = "";//출력 데이터셋
	svcCallObj.sOtherArg = "";//서버로 전송할 기타 Argument 정보 문자열, 예) key=value key2=value2
	svcCallObj.sCallBackFnc = "fn_Callback";//서버에서 처리가 완료된 후 Callback 받을 Function 명
	
	//[공통]서비스 호출
	this.gfn_CallComService(this, svcCallObj);	

}

/***********************************************************************************************
 * 06.03. [Vaildation] 삭제항목 체크
 ***********************************************************************************************/  
this.fn_VaildMasterDelete = function()
{
	if (this.ds_Master10.getRowCount() < 1 || this.gfn_IsNull(this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_NO"))) {
		this.gfn_Alert("SM006");//삭제할 대상을 선택하세요.
		return false;
	}
	return true;
}

/***********************************************************************************************
 * 7. 엑셀
 ***********************************************************************************************/
/***********************************************************************************************
 * 07.01. [공통버튼] 엑셀저장 버튼 클릭 이벤트
 ***********************************************************************************************/  
this.fn_ComBtnExcel = function()
{ 
	//출력 그리드 정보 설정
	var objGridList = ["this.div_MasterView.form.grd_Master10|" + this.div_MasterView.form.sta_Master10.text
	                  ,"this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10|" + this.div_DetailInput.form.tab_Detail.tpg_01.text];
	 
	var sFileName = "회계전표";//출력파일명
	this.gfn_ExcelExport(this, objGridList, sFileName);
}

/***********************************************************************************************
 * 8. 인쇄
 ***********************************************************************************************/
/***********************************************************************************************
 * 08.01. [공통버튼] 인쇄 버튼 클릭 이벤트
 ***********************************************************************************************/  
this.fn_ComBtnPrint = function()
{ 
	var iSelRow = this.ds_Master10.rowposition;//선택한Row

	if (this.ds_Master10.getRowCount() > 0 && iSelRow > -1) {
		
		this.ds_ComWfLine.clearData();
		this.ds_ComWfDrLine.clearData();
		this.ds_ComWfAtLine.clearData();
		this.ds_ComFileList.clearData(); //첨부파일  
		
		var sACCH_GU = this.ds_Master10.getColumn(iSelRow, "ACCH_GU");//발의구분
		var oDs = this.ds_ComWfLine;//결재라인정보
		var oDsAt = this.ds_ComWfAtLine;//결재라인정보-감사
		var sCommCd = this.ds_Master10.getColumn(iSelRow, "COMM_CD");//회사코드
		var sWofhNo = this.ds_Master10.getColumn(iSelRow, "WOFH_NO");//결재PID
		var sCallBackFunc = "fn_ComWfLineCallback";//콜백함수
		var sId = sACCH_GU;//콜백함수 구분ID - 발의구분
		
 
		//첨부파일 데이타셋에 담기 
		if ( this.fvFileDiv.ds_Smfilb.rowcount > 0 ) {
		
			this.ds_ComFileList.clearData();
			this.ds_ComFileList.addRow()	
			
			var sFileNmTmp = "";
			var sFileNm    = "";	
			
			for(var iLoop = 0; iLoop < this.fvFileDiv.ds_Smfilb.rowcount; iLoop++){
				sFileNmTmp = this.fvFileDiv.ds_Smfilb.getColumn(iLoop, "FILE_NM");
				if (iLoop == 0) {
					sFileNm   = sFileNmTmp; 		
				} else {   
					sFileNm   = sFileNm + ',  '+sFileNmTmp; 		
				}
			} //loop	
		
			this.ds_ComFileList.setColumn(0, "FILE_NM", sFileNm) ;//첨부파일제목 	// 
			
			//this.alert(this.ds_ComFileList.getColumn(0, 'FILE_NM'));
		
	  } //첨부파일 
		
		//레포트 결재라인 조회후 레포트 출력
		this.gfn_GetCommWfLine(this, oDs, sCommCd, sWofhNo, sCallBackFunc, sId, "", oDsAt);
			
	} else {
		this.gfn_Alert("SM083");//출력할 정보가 없습니다.
	}
}

/***********************************************************************************************
 * 9. 결재요청
 ***********************************************************************************************/
/***********************************************************************************************
 * 09.01. [공통버튼] 결재요청 버튼 클릭 이벤트
 ***********************************************************************************************/  
this.fn_ComBtnDecide = function()
{ 
	//[공통] 결재요청 Vaildation 체크
	if (!this.fn_VaildWfDecide()) return;
	
	var iRow = this.ds_Master10.rowposition;
	var sPks = this.ds_Master10.getColumn(iRow, "COMM_CD");//회사코드
	sPks += "ⓐ" + this.ds_Master10.getColumn(iRow, "ACCH_NO");//발의No
	sPks += "ⓐ" + this.ds_Master10.getColumn(iRow, "WOFH_SQ");//결재차수
	
	var sPopupId = "C_WF_REQUEST";//팝업ID - 결재요청
	var oArg = { CommCd:this.gfn_GetSessionValue("COMM_CD")//회사코드
	           , ModuCd:"FA"//모듈구분
			   , WctmId:"WF_M_FA_1000_W1"//결재업무ID
			   , SystId:this.gfn_GetSessionValue("SYST_ID")//결재자_시스템사번
			   , WofhNm:"[전표등록:" + this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_AcchGu.text + "] " +  this.ds_Master10.getColumn(iRow, "ACCH_NM")//결재명
			   , WofhNo:this.ds_Master10.getColumn(iRow, "WOFH_NO")//결재PID
			   , InnrGb:"1"//내부결재구분(1:신규, 2:내부)
			   , CharSystId:""//담당자_시스템사번
			   , CharWfguCd:""//담당자 결재구분
			   , SworqVr:"3"//결재요청버전(1,2,3)
			   , WfamAmtr:this.ds_Master10.getColumn(iRow, "ACCH_AM")//금액
			   , WfamOpid:""//원천PIID
			   , WfPkvl:sPks//PK값 정보 - PK 값을 순서대로 전달, Row구분자는 ⓡ, 조건 구분자는 ⓐ
	           };//Argument처리
	this.gfn_WfRequestPop(sPopupId, oArg);	
}

/***********************************************************************************************
 * 09.02. [공통버튼] 결재요청 유효성체크
 ***********************************************************************************************/  
this.fn_VaildWfDecide = function() {
	
	//변경여부 체크
	if (!this.gfn_DsIsUpdated(this.ds_Master10) && !this.gfn_DsIsUpdated(this.ds_Detail10) && !this.fvFileDiv.fn_CheckFileAddYn()) {
		var sWOFH_ST = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "WOFH_ST");//결재진행상태
		
// 		if (sWOFH_ST == "0030" || sWOFH_ST == "0040" || sWOFH_ST == "0050") {			
// 			var arrMsgArg = ["결재요청"];
// 			this.gfn_Alert("WF001", arrMsgArg);//결재가 진행중일때는 &ITM0 하실수 없습니다.
// 			return false;
// 		}
		if (!this.gfn_CheckDecideWf(sWOFH_ST)) {			
			return false;		
		}
	} else {
		var arrMsgArg = ["결재요청"];
		this.gfn_Alert("SM064", arrMsgArg);//변경된 내용이 있습니다.\n저장 후 &ITM0하시기 바랍니다.
		return false;
	}
	
	//결재진행내역체크
	if (this.ds_Master10.getRowCount() < 1 || this.ds_Master10.rowposition < 0) {
		this.gfn_Alert("WF016", arrMsgArg);//결재내역을 선택한 후 결재요청하세요.
		return false;
	}
	
	//차/대금액 체크
	var dDEBI_AM = nexacro.toNumber(this.ds_Detail10.getSum("DEBI_AM"));//차변금액
	var dCRED_AM = nexacro.toNumber(this.ds_Detail10.getSum("CRED_AM"));//대변금액
	
	if (dDEBI_AM != dCRED_AM) {
		this.gfn_Alert("FA010");//차변/대변 금액이 일치하지 않습니다.
		return false;
	}	
	
	
	

	//[월마감제어-결재요청]
	var sBUDG_MM = this.gfn_Nvl(this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_DD"), "");//마감년월
	
	var sACUM_CD = this.div_MasterInput.form.tab_Master.tpg_01.form.edt_AcumCd.value;
	
	if (!this.gfn_IsNull(sBUDG_MM)) {
		//마감여부 체크
		var paramObj= new Object();//[공통] 예산통제체크 파라메타 정보 Object
		var mgasDst  = "C";//[필수] 마감구분 - C: 마감여부, A: 회계마감여부  
		
		//수정권한이 있는 부서인 경우 마감이 되었어도 회계마감만 아니면 처리 되게 한다.
		var findRow = this.ds_Fa100.findRowExpr("CODM_CD=='"+this.gfn_GetSessionValue("DEPM_CD")+"'");
		if(findRow > -1){
			mgasDst = "A";
		}
		
		paramObj.MGAS_MM = sBUDG_MM.substr(0,6);//마감년월
		paramObj.MODM_CD = "FA";//[필수] 모듈구분(공통코드-CA910(마감구분) 참조) : CC - 예산편성확정 마감여부, CB - 예산마감 여부
//		paramObj.ACUM_CD = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACUM_CD");//[선택] 회계단위
        paramObj.ACUM_CD  = sACUM_CD;//[선택] 회계단위
		paramObj.BUSM_CD  = "";//[선택] 사업부문
		paramObj.SAUM_CD  = "";//[선택] 사업장코드
		paramObj.DEPM_CD  = "";//[선택] 부서코드
		paramObj.MODD_CD  = "";//[선택] 모듈상세구분(CA900)
		paramObj.BFPR_YN  = "Y";//[선택] 마감전 프로세스여부
		
		var bCheck = this.gfn_CheckMgas(paramObj, mgasDst);//마감여부 체크		
		
		//월마감된 경우
		if (bCheck) {
			this.gfn_Alert("CA027");//해당월의 정보가 마감이 되어서 결재요청 할 수 없습니다.
			return false;
		}	
	}
	
	return true;
}

/***********************************************************************************************
 * 10. 결재현황
 ***********************************************************************************************/
/***********************************************************************************************
 * 10.01. [공통버튼] 결재현황 버튼 클릭 이벤트
 ***********************************************************************************************/  
this.fn_ComBtnProcess = function()
{ 
	this.gfn_WfStatPop(this.ds_Master10.getColumn(this.ds_Master10.rowposition, "WOFH_NO"));//결재진행현황 팝업호출
}

/***********************************************************************************************
 * 11. 재기안
 ***********************************************************************************************/
/***********************************************************************************************
 * 11. 재기안
 ***********************************************************************************************/
/***********************************************************************************************
 * 11.01. [공통버튼] 재기안 버튼 클릭 이벤트
 ***********************************************************************************************/ 
this.fn_ComBtnRecide = function()
{ 
	//재기안시 최종여부 체크
	var sWOFH_YN = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "WOFH_YN");//최종여부
	if (sWOFH_YN != "1") {
		this.gfn_Alert("WF022");//결재차수가 최종일경우에만 재기안 처리 하실 수 있습니다.
		return;
	}
	
	var sSLIP_NO = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "SLIP_NO");  //결의번호

	if (!this.gfn_IsNull(sSLIP_NO)) {
		this.gfn_Alert("HS008");//확정된 전표는 재기안 할 수 없습니다.
		return;
	}
	
	
	//재기안시 발의시스템이 재무회계만 가능
	var sActyCd = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACTY_CD");//발의시스템
	if(sActyCd !="FA"){
		this.gfn_Alert("FA030");//발의시스템이 재무회계만 재기안 할 수 있습니다.
		return;
	}
	
	

	//[월마감제어-재기안]
	var sBUDG_MM = this.gfn_Nvl(this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_DD"), "");//마감년월
	var sACUM_CD = this.div_MasterInput.form.tab_Master.tpg_01.form.edt_AcumCd.value;
	
	if (!this.gfn_IsNull(sBUDG_MM)) {
		//마감여부 체크
		var paramObj= new Object();//[공통] 예산통제체크 파라메타 정보 Object
		var mgasDst  = "C";//[필수] 마감구분 - C: 마감여부, A: 회계마감여부  
		
		//수정권한이 있는 부서인 경우 마감이 되었어도 회계마감만 아니면 처리 되게 한다.
		var findRow = this.ds_Fa100.findRowExpr("CODM_CD=='"+this.gfn_GetSessionValue("DEPM_CD")+"'");
		if(findRow > -1){
			mgasDst = "A";
		}
		
		paramObj.MGAS_MM = sBUDG_MM.substr(0,6);//마감년월
		paramObj.MODM_CD = "FA";//[필수] 모듈구분(공통코드-CA910(마감구분) 참조) : CC - 예산편성확정 마감여부, CB - 예산마감 여부
//		paramObj.ACUM_CD = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACUM_CD");//[선택] 회계단위
        paramObj.ACUM_CD  = sACUM_CD;//[선택] 회계단위
		paramObj.BUSM_CD  = "";//[선택] 사업부문
		paramObj.SAUM_CD  = "";//[선택] 사업장코드
		paramObj.DEPM_CD  = "";//[선택] 부서코드
		paramObj.MODD_CD  = "";//[선택] 모듈상세구분(CA900)
		paramObj.BFPR_YN  = "Y";//[선택] 마감전 프로세스여부
		
		var bCheck = this.gfn_CheckMgas(paramObj, mgasDst);//마감여부 체크		
		
		//월마감된 경우
		if (bCheck) {
			this.gfn_Alert("CA028");//해당월의 정보가 마감이 되어서 재기안 할 수 없습니다.
			return;
		}	
	}
	
	
	
	
	this.gfn_Confirm("WF019", "", "CONF.RECIDE", "fn_MsgCallback");//재기안 하시겠습니까?	
}

/***********************************************************************************************
 * 11.02. [공통버튼] 재기안 유효성체크
 ***********************************************************************************************/  
this.fn_VaildWfRecide = function() {
	
	//변경여부 체크
	if (!this.gfn_DsIsUpdated(this.ds_Master10) && !this.gfn_DsIsUpdated(this.ds_Detail10) && !this.fvFileDiv.fn_CheckFileAddYn()) {
		var sWOFH_ST = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "WOFH_ST");//결재진행상태
		if (!this.gfn_CheckRecideWf(sWOFH_ST)) {			
			return false;		
		}


		
	} else {
		var arrMsgArg = ["재기안"];
		this.gfn_Alert("SM064", arrMsgArg);//변경된 내용이 있습니다.\n저장 후 &ITM0하시기 바랍니다.
		return false;
	}
	
	//결재진행내역체크
	if (this.ds_Master10.getRowCount() < 1 || this.ds_Master10.rowposition < 0) {
		this.gfn_Alert("WF021", arrMsgArg);//결재내역을 선택한 후 재기안하세요.
		return false;
	}	
	
	return true;
}


/***********************************************************************************************
 * 11.03. [공통버튼] 재기안 서비스
 ***********************************************************************************************/ 
this.fn_ComBtnRecideProc = function()
{ 
	//[공통] 재기안 Vaildation 체크
	if (!this.fn_VaildWfRecide()) return;
	
	nApp.gds_WfRst.clearData();//[결재]재기안결과 글로벌 데이터셋
	this.ds_Master10Wf.clearData();
	this.ds_Master10Wf.addRow();
	this.ds_Master10Wf.setColumn(0, "PRGM_ID", this.fvComPrgmId);//프로그램ID
	this.ds_Master10Wf.setColumn(0, "TABL_NM", "FAS..T_FA_ACCHⓐFAS..T_FA_ACCB");//재기안처리할 테이블명-마스터테이블부터 순서대로
	this.ds_Master10Wf.setColumn(0, "FILH_GU", "H");//파일구분
	this.ds_Master10Wf.setColumn(0, "PK01_NO", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "COMM_CD"));//PK번호1-PK는 마스터 테이블기준 순서대로 
	this.ds_Master10Wf.setColumn(0, "PK02_NO", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_NO"));//PK번호2
	this.ds_Master10Wf.setColumn(0, "PK03_NO", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "WOFH_SQ"));//PK번호3
	this.ds_Master10Wf.setColumn(0, "PK04_NO", "");//PK번호4
	this.ds_Master10Wf.setColumn(0, "PK05_NO", "");//PK번호5
	this.ds_Master10Wf.setColumn(0, "PK06_NO", "");//PK번호6
	this.ds_Master10Wf.setColumn(0, "PK07_NO", "");//PK번호7
	this.ds_Master10Wf.setColumn(0, "PK08_NO", "");//PK번호8
	this.ds_Master10Wf.setColumn(0, "PK09_NO", "");//PK번호9
	this.ds_Master10Wf.setColumn(0, "PK10_NO", "");//PK번호10
	this.ds_Master10Wf.setColumn(0, "WOFH_SQ_NO", "3");//결재차수-컬럼번호 : 첨부파일의 Key중 결재차수 컬럼의 PK컬럼순서
	this.ds_Master10Wf.setColumn(0, "FILE_YN", "Y");//첨부파일 사용업무여부
	this.ds_Master10Wf.setColumn(0, "ACCH_YN", "N");//자동전표 사용업무여부
	this.ds_Master10Wf.setColumn(0, "SKPC_NM", "");//지우지 말아야할 테이블 정보 : 있을경우에만 입력
	this.ds_Master10Wf.setColumn(0, "COMM_CD", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "COMM_CD"));//자동전표 관련 회사코드 : 자동전표 사용업무여부가 Y인경우 필수, 아닌경우에는 빈값
	this.ds_Master10Wf.setColumn(0, "WOFH_NO", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "WOFH_NO"));//자동전표 관련 결재PID : 자동전표 사용업무여부가 Y인경우 필수, 아닌경우에는 빈값
	this.ds_Master10Wf.setColumn(0, "WOFH_ST", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "WOFH_ST"));//자동전표 관련 결재상태 : 자동전표 사용업무여부가 Y인경우 필수, 아닌경우에는 빈값	
	
	
	//[공통] 재기안후 재조회시 KEY값 설정
	this.fvSchKey01 = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_NO");//조회Key01
	this.fvSchKey02 = nexacro.toNumber(this.ds_Master10.getColumn(this.ds_Master10.rowposition, "WOFH_SQ")) + 1;//조회Key02	
			
	//[공통]서비스정보 초기화
	this.gfn_InitComService(this);
	
	//[공통]서비스정보 추가
	var svcAddObj = new Object();//[공통] 서비스 추가 파라메타 정보 Object
	svcAddObj.sSelectSql = "wf:M_WF_1100_M_UP12";
	this.gfn_AddComSearchService(this, svcAddObj);
	
	//[공통]서비스 호출 변수
	var svcCallObj = new Object();//[공통] 서비스 파라메타 정보 Object
	svcCallObj.sTrid 		= "WF_RECIDE";			//Transaction ID 등 callback에서 넘겨 받을 String을 지정
	svcCallObj.sActionName 	= "";			//서버에서 호출할 Action - 모듈별로 호출되는 기본 Actio이 다름 : 공통 서비스 Action 업무구분  변수 참조
	svcCallObj.sInputDaset 	= "ds_Master10Wf=ds_Master10Wf" 	//입력 데이터셋
	svcCallObj.sOutDatset 	= "gds_WfRst=gds_WfRst";//출력 데이터셋
	svcCallObj.sOtherArg 	= "";					//서버로 전송할 기타 Argument 정보 문자열, 예) key=value key2=value2
	svcCallObj.sCallBackFnc = "fn_Callback";		//서버에서 처리가 완료된 후 Callback 받을 Function 명

	//[공통]서비스 호출
	this.gfn_CallComService(this, svcCallObj);	
}


/***********************************************************************************************
 * 11.04. [공통버튼] 복사 서비스
 ***********************************************************************************************/ 
this.fn_ComBtnCopyProc = function()
{ 



		var iFindCopyRow = 0; //관리항목복사기능 yn data 찾기 row
		var sCopyYn = "";     //관리항목복사기능 yn
		var sCommCd = "";     //관리항목복사기능 key1
		var sItemCd = "";     //관리항목복사기능 key2
		
		this.fvDsRowPosChange = false; //데이터셋 Row 변경이벤트-false 후 true 해야함.
		
		var sToDay = this.gfn_GetCommDate("toDay");//현재일자
		
		var pRow = this.ds_Master10.rowposition;	
		var iAddRow = this.ds_Master10.addRow();
		this.ds_Master10.copyRow(iAddRow, this.ds_Master10, pRow);
		
		var sChkRowType = this.gfn_GetRowType(this.ds_Master10, iAddRow);
		
		this.ds_Master10.setColumn(iAddRow, "ACCH_NO", "");	
		this.ds_Master10.setColumn(iAddRow, "ACCH_DD", "");
		this.ds_Master10.setColumn(iAddRow, "WOFH_NO", "");
		this.ds_Master10.setColumn(iAddRow, "WOFH_ST", "0010");
		this.ds_Master10.setColumn(iAddRow, "WOFH_SQ", "1");
		
		this.ds_Master10.setColumn(iAddRow, "SLIP_YN", "0");
		this.ds_Master10.setColumn(iAddRow, "SLIP_NO", "");
		this.ds_Master10.setColumn(iAddRow, "SLIP_DD", "");
		this.ds_Master10.setColumn(iAddRow, "SLIP_ID", "");
		
		this.ds_Master10.setColumn(iAddRow, "ACTY_CD", "FA"); //발의시스템 FA
		this.ds_Master10.setColumn(iAddRow, "PARE_DD", "");   //지급요청일
		this.ds_Master10.setColumn(iAddRow, "PACS_GU", "");   //지급구분(FA114)
		this.ds_Master10.setColumn(iAddRow, "PACS_CD", "");   //지급처코드(사번,거래처코드)
		this.ds_Master10.setColumn(iAddRow, "PACS_NM", "");   //지급처명
		this.ds_Master10.setColumn(iAddRow, "PABA_CD", "");   //지급은행코드
		this.ds_Master10.setColumn(iAddRow, "PABA_NM", "");   //지급은행명
		this.ds_Master10.setColumn(iAddRow, "PAAC_NO", "");   //지급계좌
		
		this.ds_Master10.setColumn(iAddRow, "TRAN_YN", "0");  //이관여부(1이관_0미이관)
		this.ds_Master10.setColumn(iAddRow, "TRAN_DT", "");   //이관일시
		this.ds_Master10.setColumn(iAddRow, "TRAN_ID", "");   //이관자


		
		
		this.ds_Master10.setColumn(iAddRow, "DEPM_CD", this.gfn_GetSessionValue("DEPM_CD"));//등록부서코드	
		this.ds_Master10.setColumn(iAddRow, "DEPM_NM", this.gfn_GetSessionValue("DEPM_NM"));//등록부서명	
		this.ds_Master10.setColumn(iAddRow, "SYST_ID", this.gfn_GetSessionValue("SYST_ID"));//등록자ID	
		
		this.ds_Master10.setColumn(iAddRow, "EMPM_CD", this.gfn_GetSessionValue("USEM_ID"));//등록자사번	
		this.ds_Master10.setColumn(iAddRow, "EMPM_NM", this.gfn_GetSessionValue("USEM_NM"));//등록자명		
		
		
		
		
		this.ds_Master10.setColumn(iAddRow, "ACCH_DD", sToDay);//등록일자-오늘날자로 설정
		
		// 복사시 첨부파일 초기화
		this.fvFileDiv.fn_ClearAtchFile(); //초기화
		
		
        //this.fvFileDiv = this.div_DetailInput.form.tab_Detail.tpg_03.form.div_CommFile.form;//[첨부파일]Div
		
		//this.fn_ClearAtchFile 
		
		                       
		
		/*
		var sMa01Cd = "";
		var sMa02Cd = "";
		var sMa08Cd = "";
		var sMa04Cd = "";
		var sMa05Cd = "";
		var sMa06Cd = "";
		var sMa07Cd = "";
		var sMa08Cd = "";
		var sItemRow = -1;
		var sCopyYn = "";
		var sCommCD = this.ds_Master10.getColumn(iAddRow, "COMM_CD");
		*/
		
		for (var iLoop=0; iLoop<this.ds_Detail10.getRowCount(); iLoop++) {
	
		     //관리항목 복사
			 this.f_ItemCopy(iLoop);
			/*
	
			//관리항목 세팅
			this.ds_Detail10.set_rowposition(iLoop);
			//trace("iLoop = " + iLoop);
			
			
			
            sMa01Cd = this.ds_Detail10.getColumn(iLoop, "MA01_CD");
            sMa02Cd = this.ds_Detail10.getColumn(iLoop, "MA02_CD");
            sMa03Cd = this.ds_Detail10.getColumn(iLoop, "MA03_CD");
            sMa04Cd = this.ds_Detail10.getColumn(iLoop, "MA04_CD");
            sMa05Cd = this.ds_Detail10.getColumn(iLoop, "MA05_CD");
            sMa06Cd = this.ds_Detail10.getColumn(iLoop, "MA06_CD");
            sMa07Cd = this.ds_Detail10.getColumn(iLoop, "MA07_CD");
            sMa08Cd = this.ds_Detail10.getColumn(iLoop, "MA08_CD");
			
			
			//관리항목 1
			if(!this.gfn_IsNull(sMa01Cd) && sMa01Cd !="" && sMa01Cd != "*"){ 
			
				sItemRow = this.ds_ItemList.findRowExpr("COMM_CD == '"+sCommCD+"' && ITEM_CD == '"+ sMa01Cd +"'");	
				//trace("관리항목 1 -"+iLoop+" sMa01Cd = "+sMa01Cd+ "  sItemRow = " + sItemRow);
				if(sItemRow > -1){
					sCopyYn = this.ds_ItemList.getColumn(sItemRow, "COPY_YN");
					//trace("관리항목 1 -"+iLoop+" sCopyYn = " + sCopyYn);
					if(sCopyYn == "0" || this.gfn_IsNull(sCopyYn)){
						//trace("관리항목 1 -"+iLoop+" sCopyYn = " + sCopyYn);
						this.ds_Detail10.setColumn(iLoop, "DE01_CD", "");
						this.ds_Detail10.setColumn(iLoop, "DE01_NM", "");
						this.ds_Detail10.setColumn(iLoop, "VDE01_CD", "");
						this.ds_Detail10.setColumn(iLoop, "VDE01_NM", "");
						
						this.ds_CmMaInfo.setColumn(0, "DE01_CD", "");
						this.ds_CmMaInfo.setColumn(0, "DE01_NM", "");
						this.ds_CmMaInfo.setColumn(0, "VDE01_CD", "");
						this.ds_CmMaInfo.setColumn(0, "VDE01_NM", "");
					}
				}
			}
			//관리항목 2
			if(!this.gfn_IsNull(sMa02Cd) && sMa02Cd !="" && sMa02Cd != "*"){ 
				sItemRow = this.ds_ItemList.findRowExpr("COMM_CD == '"+sCommCD+"' && ITEM_CD == '"+ sMa02Cd +"'");
				//trace("관리항목 2 -"+iLoop+" sMa02Cd = "+sMa02Cd+ "  sItemRow = " + sItemRow);
				if(sItemRow > -1){
					sCopyYn = this.ds_ItemList.getColumn(sItemRow, "COPY_YN");
					//trace("관리항목 2 -"+iLoop+"sCopyYn = " + sCopyYn);
					if(sCopyYn == "0" || this.gfn_IsNull(sCopyYn)){
						//trace("관리항목 2 -"+iLoop+"sCopyYn = " + sCopyYn);
						this.ds_Detail10.setColumn(iLoop, "DE02_CD", "");
						this.ds_Detail10.setColumn(iLoop, "DE02_NM", "");
						this.ds_Detail10.setColumn(iLoop, "VDE02_CD", "");
						this.ds_Detail10.setColumn(iLoop, "VDE02_NM", "");
						
						this.ds_CmMaInfo.setColumn(0, "DE02_CD", "");
						this.ds_CmMaInfo.setColumn(0, "DE02_NM", "");
						this.ds_CmMaInfo.setColumn(0, "VDE02_CD", "");
						this.ds_CmMaInfo.setColumn(0, "VDE02_NM", "");
					}
				}
			}		
			//관리항목 3
			if(!this.gfn_IsNull(sMa03Cd) && sMa03Cd !="" && sMa03Cd != "*"){ 
				sItemRow = this.ds_ItemList.findRowExpr("COMM_CD == '"+sCommCD+"' && ITEM_CD == '"+ sMa03Cd +"'");
				//trace("관리항목 3 -"+iLoop+" sMa03Cd = "+sMa03Cd+ "  sItemRow = " + sItemRow);			
				if(sItemRow > -1){
					sCopyYn = this.ds_ItemList.getColumn(sItemRow, "COPY_YN");
					//trace("관리항목 3 -"+iLoop+"sCopyYn = " + sCopyYn);
					if(sCopyYn == "0" || this.gfn_IsNull(sCopyYn)){
						//trace("관리항목 3 -"+iLoop+"sCopyYn = " + sCopyYn);
						this.ds_Detail10.setColumn(iLoop, "DE03_CD", "");
						this.ds_Detail10.setColumn(iLoop, "DE03_NM", "");
						this.ds_Detail10.setColumn(iLoop, "VDE03_CD", "");
						this.ds_Detail10.setColumn(iLoop, "VDE03_NM", "");
						
						this.ds_CmMaInfo.setColumn(0, "DE03_CD", "");
						this.ds_CmMaInfo.setColumn(0, "DE03_NM", "");
						this.ds_CmMaInfo.setColumn(0, "VDE03_CD", "");
						this.ds_CmMaInfo.setColumn(0, "VDE03_NM", "");
					}
				}
			}	
			//관리항목 4
			if(!this.gfn_IsNull(sMa04Cd) && sMa04Cd !="" && sMa04Cd != "*"){ 
				sItemRow = this.ds_ItemList.findRowExpr("COMM_CD == '"+sCommCD+"' && ITEM_CD == '"+ sMa04Cd +"'");	
				//trace("관리항목 4 -"+iLoop+" sMa04Cd = "+sMa04Cd+ "  sItemRow = " + sItemRow);
				if(sItemRow > -1){
					sCopyYn = this.ds_ItemList.getColumn(sItemRow, "COPY_YN");
					//trace("관리항목 4 -"+iLoop+"sCopyYn = " + sCopyYn);
					if(sCopyYn == "0" || this.gfn_IsNull(sCopyYn)){
						//trace("관리항목 4 -"+iLoop+"sCopyYn = " + sCopyYn);
						this.ds_Detail10.setColumn(iLoop, "DE04_CD", "");
						this.ds_Detail10.setColumn(iLoop, "DE04_NM", "");
						this.ds_Detail10.setColumn(iLoop, "VDE04_CD", "");
						this.ds_Detail10.setColumn(iLoop, "VDE04_NM", "");
						
						this.ds_CmMaInfo.setColumn(0, "DE04_CD", "");
						this.ds_CmMaInfo.setColumn(0, "DE04_NM", "");
						this.ds_CmMaInfo.setColumn(0, "VDE04_CD", "");
						this.ds_CmMaInfo.setColumn(0, "VDE04_NM", "");
					}
				}
			}
			//관리항목 5
			if(!this.gfn_IsNull(sMa05Cd) && sMa05Cd !="" && sMa05Cd != "*"){ 
				sItemRow = this.ds_ItemList.findRowExpr("COMM_CD == '"+sCommCD+"' && ITEM_CD == '"+ sMa05Cd +"'");
				//trace("관리항목 5 -"+iLoop+" sMa05Cd = "+sMa05Cd+ "  sItemRow = " + sItemRow);
				if(sItemRow > -1){
					sCopyYn = this.ds_ItemList.getColumn(sItemRow, "COPY_YN");
					//trace("관리항목 5-"+iLoop+" sCopyYn = " + sCopyYn);
					if(sCopyYn == "0" || this.gfn_IsNull(sCopyYn)){
						//trace("관리항목 5 -"+iLoop+"sCopyYn = " + sCopyYn);
						this.ds_Detail10.setColumn(iLoop, "DE05_CD", "");
						this.ds_Detail10.setColumn(iLoop, "DE05_NM", "");
						this.ds_Detail10.setColumn(iLoop, "VDE05_CD", "");
						this.ds_Detail10.setColumn(iLoop, "VDE05_NM", "");
						
						this.ds_CmMaInfo.setColumn(0, "DE05_CD", "");
						this.ds_CmMaInfo.setColumn(0, "DE05_NM", "");
						this.ds_CmMaInfo.setColumn(0, "VDE05_CD", "");
						this.ds_CmMaInfo.setColumn(0, "VDE05_NM", "");
					}
				}
			}
			//관리항목 6
			if(!this.gfn_IsNull(sMa06Cd) && sMa06Cd !="" && sMa06Cd != "*"){ 
				sItemRow = this.ds_ItemList.findRowExpr("COMM_CD == '"+sCommCD+"' && ITEM_CD == '"+ sMa06Cd +"'");		
				//trace("관리항목 6 -"+iLoop+" sMa06Cd = "+sMa06Cd+ "  sItemRow = " + sItemRow);
				if(sItemRow > -1){
					sCopyYn = this.ds_ItemList.getColumn(sItemRow, "COPY_YN");
					//trace("관리항목 6-"+iLoop+" sCopyYn = " + sCopyYn);
					if(sCopyYn == "0" || this.gfn_IsNull(sCopyYn)){
						//trace("관리항목 6 -"+iLoop+"sCopyYn = " + sCopyYn);
						this.ds_Detail10.setColumn(iLoop, "DE06_CD", "");
						this.ds_Detail10.setColumn(iLoop, "DE06_NM", "");
						this.ds_Detail10.setColumn(iLoop, "VDE06_CD", "");
						this.ds_Detail10.setColumn(iLoop, "VDE06_NM", "");
						
						this.ds_CmMaInfo.setColumn(0, "DE06_CD", "");
						this.ds_CmMaInfo.setColumn(0, "DE06_NM", "");
						this.ds_CmMaInfo.setColumn(0, "VDE06_CD", "");
						this.ds_CmMaInfo.setColumn(0, "VDE06_NM", "");
					}
				}
			}
			//관리항목 7
			if(!this.gfn_IsNull(sMa07Cd) && sMa07Cd !="" && sMa07Cd != "*"){ 
				sItemRow = this.ds_ItemList.findRowExpr("COMM_CD == '"+sCommCD+"' && ITEM_CD == '"+ sMa07Cd +"'");	
				//trace("관리항목 7 -"+iLoop+" sMa07Cd = "+sMa07Cd+ "  sItemRow = " + sItemRow);
				if(sItemRow > -1){
					sCopyYn = this.ds_ItemList.getColumn(sItemRow, "COPY_YN");
					//trace("관리항목 7-"+iLoop+" sCopyYn = " + sCopyYn);
					if(sCopyYn == "0" || this.gfn_IsNull(sCopyYn)){
						//trace("관리항목 7 -"+iLoop+"sCopyYn = " + sCopyYn);
						this.ds_Detail10.setColumn(iLoop, "DE07_CD", "");
						this.ds_Detail10.setColumn(iLoop, "DE07_NM", "");
						this.ds_Detail10.setColumn(iLoop, "VDE07_CD", "");
						this.ds_Detail10.setColumn(iLoop, "VDE07_NM", "");
						
						this.ds_CmMaInfo.setColumn(0, "DE07_CD", "");
						this.ds_CmMaInfo.setColumn(0, "DE07_NM", "");
						this.ds_CmMaInfo.setColumn(0, "VDE07_CD", "");
						this.ds_CmMaInfo.setColumn(0, "VDE07_NM", "");
					}
				}
			}
			//관리항목 8
			if(!this.gfn_IsNull(sMa08Cd) && sMa08Cd !="" && sMa08Cd != "*"){ 
				sItemRow = this.ds_ItemList.findRowExpr("COMM_CD == '"+sCommCD+"' && ITEM_CD == '"+ sMa08Cd +"'");	
				//trace("관리항목 8 -"+iLoop+" sMa08Cd = "+sMa08Cd+ "  sItemRow = " + sItemRow);	
				if(sItemRow > -1){
					sCopyYn = this.ds_ItemList.getColumn(sItemRow, "COPY_YN");
					//trace("관리항목 8-"+iLoop+" sCopyYn = " + sCopyYn);
					if(sCopyYn == "0" || this.gfn_IsNull(sCopyYn)){
						//trace("관리항목 8 -"+iLoop+"sCopyYn = " + sCopyYn);
						this.ds_Detail10.setColumn(iLoop, "DE08_CD", "");
						this.ds_Detail10.setColumn(iLoop, "DE08_NM", "");
						this.ds_Detail10.setColumn(iLoop, "VDE08_CD", "");
						this.ds_Detail10.setColumn(iLoop, "VDE08_NM", "");
						
						this.ds_CmMaInfo.setColumn(0, "DE08_CD", "");
						this.ds_CmMaInfo.setColumn(0, "DE08_NM", "");
						this.ds_CmMaInfo.setColumn(0, "VDE08_CD", "");
						this.ds_CmMaInfo.setColumn(0, "VDE08_NM", "");
					}
				}
			}
			
		
			*/
			//this.fn_SetMaNm(iLoop);
			
			
			this.GetBudgYn = false;
			
			this.ds_Detail10.setColumn(iLoop, "CONF_YN", 0);
			this.ds_Detail10.setColumn(iLoop, "ACOM_ENABLE", 1);
			
			this.ds_Detail10.setColumn(iLoop, "crudType", "I");
			this.ds_Detail10.setColumn(iLoop, "ACCH_NO", "");
			this.ds_Detail10.setColumn(iLoop, "WOFH_SQ", "1");
			
			this.ds_Detail10.setColumn(iLoop, "SLIP_NO", "");
			this.ds_Detail10.setColumn(iLoop, "SLIP_DD", "");
			this.ds_Detail10.setColumn(iLoop, "SLIP_ID", "");
			this.ds_Detail10.setColumn(iLoop, "SLIP_YN", "0");
			
			var sCtrlCd = this.ds_Detail10.getColumn(iLoop, "CTRL_CD");//회계기준코드
			//
			var sSystId = this.gfn_GetSessionValue("SYST_ID");
			//var iFindRow = this.ds_EmPalm.findRowExpr("SYST_ID == '"+sSystId+"'");
			//회계기준코드는 예산부서에서 가져온다.
			// 줄추가인경우 ds_Master10의 부서코드를 가져온다.
			var iFindRow = this.ds_EmPalm.findRowExpr("DEPM_CD == '"+this.ds_Master10.getColumn(this.ds_Master10.rowposition, "DEPM_CD")+"'");
			
			var palmCd = this.ds_EmPalm.getColumn(iFindRow, "PALM_CD");
			var palmNm = this.ds_EmPalm.getColumn(iFindRow, "PALM_NM");
			
			//회계기준코드 자동입력
			//계정의 전표손익제어 의 값이 있는경우만 자동으로 가져온다.
			if(!this.gfn_IsNull(palmCd) && !this.gfn_IsNull(sCtrlCd)){
				//trace(""palmCd 2 = " + palmCd);
				
				
				this.ds_Detail10.setColumn(iLoop, "PALM_CD", palmCd);
				this.ds_Detail10.setColumn(iLoop, "PALM_NM", palmNm);
			}
			
			
			this.ds_Detail10.setColumn(iLoop, "WOFH_ST", "0010");
			this.ds_Detail10.setColumn(iLoop, "BUDP_CD", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "DEPM_CD"));//등록부서코드
			this.ds_Detail10.setColumn(iLoop, "BUDP_NM", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "DEPM_NM"));//등록부서코드
			this.ds_Detail10.setColumn(iLoop, "BUDG_MM", sToDay.substr(0, 6));
			
			this.ds_Detail10.setColumn(iLoop, "ANTI_NO", "");
			this.ds_Detail10.setColumn(iLoop, "ANTI_SE", "");
			this.ds_Detail10.setColumn(iLoop, "JBGU_CD", "");
			this.ds_Detail10.setColumn(iLoop, "JBAC_NO", "");
			
			
			//trace("CRED_YN" + this.ds_Detail10.getColumn(iLoop, "CRED_YN"));
			//채권/채무구분에서 채무 인경우 관리항목 clear 한다.
			/*
			if(this.ds_Detail10.getColumn(iLoop, "CRED_YN") == "2"){
				///trace("CRED_YN" + this.ds_Detail10.getColumn(iLoop, "CRED_YN"));
				this.ds_Detail10.setColumn(iLoop, "DE01_CD", "");
				this.ds_Detail10.setColumn(iLoop, "DE01_NM", "");
				this.ds_Detail10.setColumn(iLoop, "DE02_CD", "");
				this.ds_Detail10.setColumn(iLoop, "DE02_NM", "");
				this.ds_Detail10.setColumn(iLoop, "DE03_CD", "");
				this.ds_Detail10.setColumn(iLoop, "DE03_NM", "");
				this.ds_Detail10.setColumn(iLoop, "DE04_CD", "");
				this.ds_Detail10.setColumn(iLoop, "DE04_NM", "");
				this.ds_Detail10.setColumn(iLoop, "DE05_CD", "");
				this.ds_Detail10.setColumn(iLoop, "DE05_NM", "");
				this.ds_Detail10.setColumn(iLoop, "DE06_CD", "");
				this.ds_Detail10.setColumn(iLoop, "DE06_NM", "");
				this.ds_Detail10.setColumn(iLoop, "DE07_CD", "");
				this.ds_Detail10.setColumn(iLoop, "DE07_NM", "");
				this.ds_Detail10.setColumn(iLoop, "DE08_CD", "");
				this.ds_Detail10.setColumn(iLoop, "DE08_NM", "");
				
				this.ds_Detail10.setColumn(iLoop, "VDE01_CD", "");
				this.ds_Detail10.setColumn(iLoop, "VDE01_NM", "");
				this.ds_Detail10.setColumn(iLoop, "VDE02_CD", "");
				this.ds_Detail10.setColumn(iLoop, "VDE02_NM", "");
				this.ds_Detail10.setColumn(iLoop, "VDE03_CD", "");
				this.ds_Detail10.setColumn(iLoop, "VDE03_NM", "");
				this.ds_Detail10.setColumn(iLoop, "VDE04_CD", "");
				this.ds_Detail10.setColumn(iLoop, "VDE04_NM", "");
				this.ds_Detail10.setColumn(iLoop, "VDE05_CD", "");
				this.ds_Detail10.setColumn(iLoop, "VDE05_NM", "");
				this.ds_Detail10.setColumn(iLoop, "VDE06_CD", "");
				this.ds_Detail10.setColumn(iLoop, "VDE06_NM", "");
				this.ds_Detail10.setColumn(iLoop, "VDE07_CD", "");
				this.ds_Detail10.setColumn(iLoop, "VDE07_NM", "");
				this.ds_Detail10.setColumn(iLoop, "VDE08_CD", "");
				this.ds_Detail10.setColumn(iLoop, "VDE08_NM", "");
			}else{
				//관리항목관리의 복사기능이 Y인것만 복사한다.
				//나머지는 초기화 한다.
				//var iFindCopyRow = 0; //관리항목복사기능 yn data 찾기 row
		        //var sCopyYn = "";     //관리항목복사기능 yn
		        //var sCommCd = "";     //관리항목복사기능 key1
		        //sItemCd = "";         //관리항목복사기능 key2
				sCommCd = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "COMM_CD");
				for(var iD10Row =1; 8; iD10Row++){
				
					sItemCd = this.ds_Detail10.getColumn(iLoop, "MA0"+iD10Row+"_CD");
					iFvFindRow = this.ds_ItemList.findRowExpr("COMM_CD=='" + sCommCd + "' && ITEM_CD=='" + this.fvSchKey02 + "'");//업무Key Row 찾기
					
					if (iFvFindRow > -1){
					
					}
					
				}
				//for(var iD10Row =0; this.ds_Detail10.getRowCount(); iD10Row++){
				
				//}
			
			}
			*/
			
			//예산체크
			this.GetBudgYn = true;
			this.fn_GetBudg();
			
		}
		
		this.fvDsRowPosChange = true; //데이터셋 Row 변경이벤트-실행유무

		
		this.fn_cbo_AcchGu(this.ds_Master10.getColumn(iAddRow, "ACCH_GU"), true);
		/*
		if(this.ds_Detail10.getColumn(0, "CRED_YN")=="2"){
			
				this.ds_CmMaInfo.setColumn(0, "DE01_CD", "");
				this.ds_CmMaInfo.setColumn(0, "DE01_NM", "");
				this.ds_CmMaInfo.setColumn(0, "DE02_CD", "");
				this.ds_CmMaInfo.setColumn(0, "DE02_NM", "");
				this.ds_CmMaInfo.setColumn(0, "DE03_CD", "");
				this.ds_CmMaInfo.setColumn(0, "DE03_NM", "");
				this.ds_CmMaInfo.setColumn(0, "DE04_CD", "");
				this.ds_CmMaInfo.setColumn(0, "DE04_NM", "");
				this.ds_CmMaInfo.setColumn(0, "DE05_CD", "");
				this.ds_CmMaInfo.setColumn(0, "DE05_NM", "");
				this.ds_CmMaInfo.setColumn(0, "DE06_CD", "");
				this.ds_CmMaInfo.setColumn(0, "DE06_NM", "");
				this.ds_CmMaInfo.setColumn(0, "DE07_CD", "");
				this.ds_CmMaInfo.setColumn(0, "DE07_NM", "");
				this.ds_CmMaInfo.setColumn(0, "DE08_CD", "");
				this.ds_CmMaInfo.setColumn(0, "DE08_NM", "");
				
				this.ds_CmMaInfo.setColumn(0, "VDE01_CD", "");
				this.ds_CmMaInfo.setColumn(0, "VDE01_NM", "");
				this.ds_CmMaInfo.setColumn(0, "VDE02_CD", "");
				this.ds_CmMaInfo.setColumn(0, "VDE02_NM", "");
				this.ds_CmMaInfo.setColumn(0, "VDE03_CD", "");
				this.ds_CmMaInfo.setColumn(0, "VDE03_NM", "");
				this.ds_CmMaInfo.setColumn(0, "VDE04_CD", "");
				this.ds_CmMaInfo.setColumn(0, "VDE04_NM", "");
				this.ds_CmMaInfo.setColumn(0, "VDE05_CD", "");
				this.ds_CmMaInfo.setColumn(0, "VDE05_NM", "");
				this.ds_CmMaInfo.setColumn(0, "VDE06_CD", "");
				this.ds_CmMaInfo.setColumn(0, "VDE06_NM", "");
				this.ds_CmMaInfo.setColumn(0, "VDE07_CD", "");
				this.ds_CmMaInfo.setColumn(0, "VDE07_NM", "");
				this.ds_CmMaInfo.setColumn(0, "VDE08_CD", "");
				this.ds_CmMaInfo.setColumn(0, "VDE08_NM", "");
		}
		*/
		
		
		this.ds_Detail10.set_rowposition(0);
}




/***********************************************************************************************
 * 12. 닫기
 ***********************************************************************************************/
/***********************************************************************************************
 * 12.01. [공통버튼] 닫기 버튼 클릭 이벤트
 ***********************************************************************************************/ 
this.fn_ComBtnClose = function()
{ 
	return true;
}

/***********************************************************************************************
 * 13. [CallBack] 함수
 ***********************************************************************************************/
/***********************************************************************************************
 * 13.01. [서비스] CallBack 함수 처리
 ***********************************************************************************************/ 
this.fn_Callback = function(sSvcId, nErrorCode, sErrorMsg)
{
	if(nErrorCode != 0)
	{
		return;
	}	
	switch(sSvcId)
	{
		case "MST_SEARCH": //조회		
	
	
	
			if (this.ds_Master10.getRowCount() > 0) {
			
				//저장후 재조회여부-true
				if (this.fvSchKeyYn) {
					var iFvFindRow = this.ds_Master10.findRowExpr("ACCH_NO=='" + this.fvSchKey01 + "' && WOFH_SQ=='" + this.fvSchKey02 + "'");//업무Key Row 찾기

					//마스터 데이터셋 이벤트가 비활성시 - 활성화
					if (!this.ds_Master10.enableevent) {
						this.ds_Master10.set_enableevent(true);
					}
				
					if (iFvFindRow > -1) {
						if (iFvFindRow == 0) {
							this.ds_Master10.set_rowposition(-1);
						} 
						this.ds_Master10.set_rowposition(iFvFindRow);
					} else {
						this.ds_Master10.set_rowposition(0);
					}
				}				
				
				

				
				
				//입력영역 활성화
				this.div_MasterInput.set_enable(true);
				this.div_DetailInput.form.div_ComGrdBtn.set_enable(true);
				this.div_DetailInput.form.tab_Detail.set_enable(true);
					
				//trace("fn_ComBtnSearch=1=" );
					
					
				//첨부파일정보 권한설정
				var oScrnBtnAuth = new Object();//[공통] 첨부파일 권한정보
				oScrnBtnAuth.BTN_ENABLE = true;//권한 유무	
				this.fvFileDiv.fn_SetCommFileBtnAuth(oScrnBtnAuth);	
				
				//[공통]그리드NoData Text 초기화 설정
				this.gfn_InitGridNoDataText(this.div_MasterView.form.grd_Master10);
				
			} else {
				
				//[공통]그리드NoData Text설정
				this.gfn_SetGridNoDataText(this.div_MasterView.form.grd_Master10);
				
				//마스터 데이터셋 이벤트가 비활성시 - 활성화
				if (!this.ds_Master10.enableevent) {
					this.ds_Master10.set_enableevent(true);
				}
			
				//입력영역 비활성화
				this.div_MasterInput.set_enable(false);
				this.div_DetailInput.form.div_ComGrdBtn.set_enable(false);
				this.div_DetailInput.form.tab_Detail.set_enable(false);
					
				//첨부파일정보 권한설정
				var oScrnBtnAuth = new Object();//[공통] 첨부파일 권한정보
				oScrnBtnAuth.BTN_ENABLE = false;//권한 유무	
				this.fvFileDiv.fn_SetCommFileBtnAuth(oScrnBtnAuth);					
			}
			
			//저장후 재조회여부-true
			if (this.fvSchKeyYn) {
				this.fvSchKeyYn = false;//저장후 재조회여부
			}			
	
			break;
		case "COMBO_SEARCH" : //콤보조회
				//다른화면에서 호출한 함수명이 존재하면-해당 함수 호출
				//trace("COMBO_SEARCH 1");
				if (!this.gfn_IsNull(this.fvCmScrnCallFunc)) {
					//trace("COMBO_SEARCH 2");
					this.lookupFunc(this.fvCmScrnCallFunc).call(this.fvCmScrnCallArgs);//함수 호출	
					
				}
				//계좌정보를 초기화면엔 보여주지 않는다.
				this.ds_SdCbabFull.filter("");
				this.ds_SdCbabFull.filter("CUSM_CD == ''");	
				this.ds_SdCbabFull.set_keystring( "S:-CBAB_YN" );
				
				var addRow = this.ds_SdCbabFull.addRow();
				this.ds_SdCbabFull.setColumn(addRow, "COMM_CD", "XX")
				this.ds_SdCbabFull.setColumn(addRow, "CUSM_CD", "")
				this.ds_SdCbabFull.setColumn(addRow, "ACNM_NO", "")
				this.ds_SdCbabFull.setColumn(addRow, "ACNM_CD", "")
				this.ds_SdCbabFull.setColumn(addRow, "BANM_CD", "")
				this.ds_SdCbabFull.setColumn(addRow, "ACNM_FULL", "")
				this.ds_SdCbabFull.setColumn(addRow, "BANM_NM", "")
				this.ds_SdCbabFull.setColumn(addRow, "ACNO_NM", "")
				
			break;
			
		case "SAVE":   //저장		

			//첨부파일 추가건이 없으면
			if (!this.fvFileDiv.fn_CheckFileAddYn()) {
				this.fvSchKeyYn = true;//저장후 재조회여부
				this.fn_ComBtnSearch();//저장후 재조회
			} else {
				this.fvFileDiv.fn_AtchFileSave(this, fvFileInfo);			
			}
			break;	
		case "DTL_SEARCH": //조회		

			this.ds_Detail10.addColumn("s_chk", "string");
			this.ds_Detail10.addColumn("crudType", "string");
			this.ds_Detail10.addColumn("BGCM_YN", "string");//예산체크여부
			this.ds_Detail10.addColumn("BGCM_AM", "string");//예산편성금액
			this.ds_Detail10.addColumn("DECR_GU_CHK", "string");//차대구분 체크용
			this.ds_Detail10.addColumn("ACOM_ENABLE", "string");//반제처리에서 가져온 계정코드는 수정할수없게 구분자 둠
			
			//첨부파일 정보 조회
			var oFileInfo = new Object();//[공통] 첨부파일정보
			oFileInfo.PRGM_ID = this.fvComPrgmId;//프로그램ID
			oFileInfo.FILH_GU = "H";//첨부파일위치구분 : H-Head, D-상세(그리드Row), E-기타
			oFileInfo.PK01_NO = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "COMM_CD");//PK번호1-회사코드
			oFileInfo.PK02_NO = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_NO");//PK번호2-발의번호
			oFileInfo.PK03_NO = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "WOFH_SQ");//PK번호3-결재차수						
			
			var strActyCd = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACTY_CD"); // 발의시스템
			//trace("strActyCd --> " + strActyCd);
			if(this.gfn_IsNull(strActyCd) || strActyCd == 'FA') { // 발의시스템이 없거나 재무회계일때 첨부파일 공통을 태운다.
				this.fvFileDiv.fn_AtchFileSearch(oFileInfo);
			} else {
				this.fvFileDiv.fn_AtchFileSearchIF(oFileInfo);
			}
			
			if (this.ds_Detail10.getRowCount() > 0) {
				//[공통]그리드NoData Text 초기화 설정
				this.gfn_InitGridNoDataText(this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10);
				
				// 전표보기에서 
				if(!this.gfn_IsNull(this.popAccbSe)){
					var iFvFindRow = this.ds_Detail10.findRowExpr("ACCB_SE=='" + this.popAccbSe + "'");//업무Key Row 찾기
					if(iFvFindRow > -1){
						this.ds_Detail10.set_rowposition(iFvFindRow);
						
					}
				}
				
			} else {
				//[공통]그리드NoData Text설정
				this.gfn_SetGridNoDataText(this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10);			
			}
			
			
			//this.fvNumS 세팅
			//trace("================" + this.ds_Detail10.getColumn(this.ds_Detail10.getRowCount() - 1, "NUMB_SE"));
			this.fvNumS =  nexacro.toNumber(this.ds_Detail10.getColumn(this.ds_Detail10.getRowCount() - 1, "NUMB_SE"));
			
			
			break;			
			
		case "DTLS_SEARCH": //전표상세검색		
			this.ds_Detail20.addColumn("s_chk", "string");		
			this.ds_Detail20.addColumn("s_conf", "string");
			
			if (this.ds_Detail20.getRowCount() > 0) {
				//[공통]그리드NoData Text 초기화 설정
				this.gfn_InitGridNoDataText(this.div_DetailInput.form.tab_Detail.tpg_02.form.grd_Detail20);
			} else {
				//[공통]그리드NoData Text설정
				this.gfn_SetGridNoDataText(this.div_DetailInput.form.tab_Detail.tpg_02.form.grd_Detail20);			
			}
			
			break;			
		case "ACOM_MA_SET":
			//계정별 관리항목 ds_AcomMa
			
			//관리항목 조회 후 ds_Detail에 MA_NM 값을 넣어준다.
			this.fn_SetMaNm(this.ds_Detail10.rowposition);
			
			//관리항목 컴포넌트 동적생성
			this.fn_MakeMaData();
			
			//가용금액 계산중이 아닐경우-계산
			if (!this.fvBCalAvailAmt) {
				//trace("===========fn_Callback ACOM_MA_SET  start ")
				this.fn_CalAvailAm();//가용금액 계산
				//trace("===========fn_Callback ACOM_MA_SET  end ")
			}
			
			break;
		case "ACOM_MA":
			//관리항목 컴포넌트 동적생성
			this.fn_MakeMaData();
			
			//반제전표찾기
			if (this.fvDetailGu == true) {
				this.fvDetailGu = false;
			}
			
			//가용금액 계산중이 아닐경우-계산
			//trace("===========fn_Callback ACOM_MA  start ")
			if (!this.fvBCalAvailAmt) {
				//trace("===========fn_Callback ACOM_MA  start ")
				this.fn_CalAvailAm();//가용금액 계산
				//trace("===========fn_Callback ACOM_MA  start ")
			}		
			break;		
			
		case "GET_BUDG": //예산통제정보 조회
			//trace("fn_Callback GET_BUDG start ")
			//가용금액 계산중이 아닐경우-계산
			if (!this.fvBCalAvailAmt) {
				
				//trace("fn_Callback GET_BUDG fvBCalAvailAmt start ")
				this.fn_CalAvailAm();//가용금액 계산
				//trace("fn_Callback GET_BUDG fvBCalAvailAmt end ")
			}		
			
			//trace("fn_Callback GET_BUDG end ")
			break;				
		case "DELETE": //삭제		
			this.fn_ComBtnSearch();//조회
			break;		
			
			
		case "WF_RECIDE": //[결재]재기안처리		
			if (nApp.gds_WfRst.getRowCount() > 0) {
				if (nApp.gds_WfRst.getColumn(0, "O_RET_CODE") == "TRUE") {
					this.gfn_Alert("WF012");//재기안 처리가 완료되었습니다.
					this.fvSchKeyYn = true;//저장후 재조회여부
					this.fn_ComBtnSearch();//저장후 재조회					
				} else {
					//trace(nApp.gds_WfRst.saveXML());
					var arrMsgArg = [nApp.gds_WfRst.getColumn(0, "O_RET_CMSG")];
					this.gfn_Alert("WF013", arrMsgArg);//재기안 처리시 오류가 발생하였습니다.\n&ITM0				
				}
			} else {
				var arrMsgArg = [""];
				this.gfn_Alert("WF013", arrMsgArg);//재기안 처리시 오류가 발생하였습니다.\n&ITM0
			}
			break;	
		case "GET_CUSMNM":
			
			break;
	}
};

/***********************************************************************************************
 * 13.02. [팝업] CallBack 함수 처리
          strId : 팝업호출시 지정한 팝업ID
	      rtnValue : 팝업창에서 close시 지정한 반환값
          주의 : Open(popuptype=modeless)창은 팝업콜백을 지원하지 않음
 ***********************************************************************************************/ 
this.fn_PopupCallback = function(strId, rtnValue)
{
	// pop창 콜백 id
	
	trace("fn_PopupCallback =====");
	
	
	//[결재요청/결재취소]
	if (strId == "C_WF_REQUEST") {
		if (!this.gfn_IsNull(rtnValue)) {
			var arrRtnVal = eval(rtnValue);
			
			//리턴메세지코드
			if (!this.gfn_IsNull(arrRtnVal.MSG_CODE)) {
				//결재정상처리 된경우
				if (arrRtnVal.MSG_CODE == "0") {
					//[공통] 결재요청/결재취소 재조회시 KEY값 설정
					this.fvSchKeyYn = true;
					this.fvSchKey01 = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_NO");//조회Key01
					this.fvSchKey02 = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "WOFH_SQ");//조회Key02					
					//재조회
					this.fn_ComBtnSearch();
				}
			}
		}		

	//[조회영역]
	//발의부서
	} else if (strId == "S_DEPM_CD_01") {
		if (!this.gfn_IsNull(rtnValue)) {
			var arrRtnVal = eval(rtnValue);
			
			if (!this.gfn_IsNull(arrRtnVal.DEPM_CD)) {
				this.div_Search.form.edt_DepmCd.set_value(arrRtnVal.DEPM_CD);
				this.div_Search.form.edt_DepmNm.set_value(arrRtnVal.DEPM_NM);
			}
		}else{
			//조회조건영역 - 전체권한여부 체크
			if (this.gfn_CheckAllAuth(this.fvComPrgmId)) {
				this.div_Search.form.edt_DepmCd.set_value("");
				this.div_Search.form.edt_DepmNm.set_value("");		
			} else {
				this.div_Search.form.edt_DepmCd.set_value(this.gfn_GetSessionValue("DEPM_CD"));
				this.div_Search.form.edt_DepmNm.set_value(this.gfn_GetSessionValue("DEPM_NM"));					
			}	
		}	
	//발의자
	} else if (strId == "S_SYST_ID_01") {
		if (!this.gfn_IsNull(rtnValue)) {
			var arrRtnVal = eval(rtnValue);	
			
			if (!this.gfn_IsNull(arrRtnVal.EMPM_CD)) {
				this.div_Search.form.edt_EmpmCd.set_value(arrRtnVal.EMPM_CD);
				this.div_Search.form.edt_EmpmNm.set_value(arrRtnVal.EMPM_NM);
				this.div_Search.form.edt_SystId.set_value(arrRtnVal.SYST_ID);
			}
		}else{

			
			//조회조건영역 - 자신의자료 권한여부 체크		
			if (this.gfn_CheckOwnAuth(this.fvComPrgmId)) {
				this.div_Search.form.edt_EmpmCd.set_value(this.gfn_GetSessionValue("EMPM_CD"));
				this.div_Search.form.edt_EmpmNm.set_value(this.gfn_GetSessionValue("EMPM_NM"));
				this.div_Search.form.edt_SystId.set_value(this.gfn_GetSessionValue("SYST_ID"));	
			} else {
				this.div_Search.form.edt_EmpmCd.set_value("");
				this.div_Search.form.edt_EmpmNm.set_value("");
				this.div_Search.form.edt_SystId.set_value("");				
			}
			
		}

	//[Master영역]
	//발의부서		
	} else if (strId == "M_DEPM_CD_01") {
	
		//trace(""M_DEPM_CD_01 ==== " + "M_DEPM_CD_01");
		if (!this.gfn_IsNull(rtnValue)) {
			var arrRtnVal = eval(rtnValue);	
			
			if (!this.gfn_IsNull(arrRtnVal.DEPM_CD)) {
				
			
				this.div_MasterInput.form.tab_Master.tpg_01.form.edt_DepmCd.set_value(arrRtnVal.DEPM_CD);
				this.div_MasterInput.form.tab_Master.tpg_01.form.edt_DepmNm.set_value(arrRtnVal.DEPM_NM);
				
// 				//발의부서 변경시 예산부서도 같이 변경한다.
// 				for (var iLoop=0; iLoop<this.ds_Detail10.getRowCount(); iLoop++) {
// 					this.ds_Detail10.set_rowposition(iLoop);
// 					this.ds_Detail10.setColumn(iLoop, "BUDP_CD", arrRtnVal.DEPM_CD);
// 					this.ds_Detail10.setColumn(iLoop, "BUDP_NM", arrRtnVal.DEPM_NM);
// 				}
				
			}
		}else{
			this.div_MasterInput.form.tab_Master.tpg_01.form.edt_DepmCd.set_value("");
			this.div_MasterInput.form.tab_Master.tpg_01.form.edt_DepmNm.set_value("");
		}
		
		
		
		
		
	//발의자		
	} else if (strId == "M_SYST_ID_01") {
		if (!this.gfn_IsNull(rtnValue)) {
			var arrRtnVal = eval(rtnValue);	
			
			if (!this.gfn_IsNull(arrRtnVal.EMPM_CD)) {
				this.div_MasterInput.form.tab_Master.tpg_01.form.edt_EmpmCd.set_value(arrRtnVal.EMPM_CD);
				this.div_MasterInput.form.tab_Master.tpg_01.form.edt_EmpmNm.set_value(arrRtnVal.EMPM_NM);
				this.div_MasterInput.form.tab_Master.tpg_01.form.edt_DepmCd.set_value(arrRtnVal.DEPM_CD);
				this.div_MasterInput.form.tab_Master.tpg_01.form.edt_DepmNm.set_value(arrRtnVal.DEPM_NM);
				this.div_MasterInput.form.tab_Master.tpg_01.form.edt_SystId.set_value(arrRtnVal.SYST_ID);				
			}
		}else{
			this.div_MasterInput.form.tab_Master.tpg_01.form.edt_EmpmCd.set_value("");
			this.div_MasterInput.form.tab_Master.tpg_01.form.edt_EmpmNm.set_value("");
			this.div_MasterInput.form.tab_Master.tpg_01.form.edt_DepmCd.set_value("");
			this.div_MasterInput.form.tab_Master.tpg_01.form.edt_DepmNm.set_value("");
			this.div_MasterInput.form.tab_Master.tpg_01.form.edt_SystId.set_value("");
		}
	//[Detail영역]
	//예산부서		
	} else if (strId == "B_DEPM_CD_01") {
		if (!this.gfn_IsNull(rtnValue)) {
			var arrRtnVal = eval(rtnValue);	
			//trace("arrRtnVal.DEPM_CD = " + arrRtnVal.DEPM_CD);
			if (!this.gfn_IsNull(arrRtnVal.DEPM_CD)) {
				this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "BUDP_CD", arrRtnVal.DEPM_CD);
				this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "BUDP_NM", arrRtnVal.DEPM_NM);
			}
		}else{
			this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "BUDP_CD", "");
			this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "BUDP_NM", "");
		}
		
	//예산 - 예산부서		
	} else if (strId == "B_SDDP_CD_01") {
		if (!this.gfn_IsNull(rtnValue)) {
			var arrRtnVal = eval(rtnValue);	
			
			if (!this.gfn_IsNull(arrRtnVal.DEPM_CD)) {
				this.div_DetailInput.form.div_detailRight.form.div_Budget.form.edt_BudgetDeptCd.set_value(arrRtnVal.DEPM_CD);//.set_value(arrRtnVal.DEPM_CD);
				this.div_DetailInput.form.div_detailRight.form.div_Budget.form.edt_BudgetDeptNm.set_value(arrRtnVal.DEPM_NM);
				
			}
		}else{
			this.div_DetailInput.form.div_detailRight.form.div_Budget.form.edt_BudgetDeptCd.set_value("");//.set_value(arrRtnVal.DEPM_CD);
			this.div_DetailInput.form.div_detailRight.form.div_Budget.form.edt_BudgetDeptNm.set_value("");
		}
	} else if(strId == "B_PALM_CD_01"){
		if (!this.gfn_IsNull(rtnValue)) {
			var arrRtnVal = eval(rtnValue);	
			
			if (!this.gfn_IsNull(arrRtnVal.PALM_CD)) {
				
				//trace("fn_PopupCallback PALM_CD 1 = "+ arrRtnVal.PALM_CD);
				//trace(""palmCd 3 = " + arrRtnVal.PALM_CD);
				this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "PALM_CD", arrRtnVal.PALM_CD);
				this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "PALM_NM", arrRtnVal.PALM_NM);
				
			}
		}else{
		
			//trace(""palmCd 4 = " + "");
			this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "PALM_CD", "");
			this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "PALM_NM", "");
		}
	} else if(strId == "S_ACOM_CD_01"){
		//계정 popup
		if (!this.gfn_IsNull(rtnValue)) {
			var arrRtnVal = eval(rtnValue);	
			
			if (!this.gfn_IsNull(arrRtnVal.ACOM_CD)) {
				
				this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "ACOM_CD", arrRtnVal.ACOM_CD);
				this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "ACOM_NM", arrRtnVal.ACOM_NM);
				this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "DECR_GU_CHK", arrRtnVal.DECR_GU);//차대구분					
				this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "CTRL_CD", arrRtnVal.CTRL_CD);//전표손익제어					
				this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "ANTI_YN", arrRtnVal.ANTI_YN);//반제전표계정	
				
				
				//차대금액 둘다 0 이면
				//차대구분은 계정의 차대구분을 넣는다.
				if(this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "DEBI_AM")==0 && this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "CRED_AM")==0){
				    if(this.gfn_IsNull(arrRtnVal.DECR_GU) || arrRtnVal.DECR_GU ==""){
						this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "DECR_GU", "D");
					}else{
						this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "DECR_GU", arrRtnVal.DECR_GU);
					}
				}
				
				
				
				/*
				반제계정인경우 
				반제계정의 차대구분과 전표의 차대구분이 일치해야 함
				불일치시 등록 못함
				*/
// 				//trace(arrRtnVal.ANTI_YN 1= " + arrRtnVal.ANTI_YN);
// 				//trace(arrRtnVal.DECR_GU 1= " + arrRtnVal.DECR_GU);
// 				
// 				
// 				if(arrRtnVal.ANTI_YN == "1"){
// 					var sDecrGu = this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "DECR_GU");
// 					//trace(sDecrGu 1= " + sDecrGu);
// 					if(sDecrGu != arrRtnVal.DECR_GU){
// 						var sDEcrGuNm = "";
// 						if(sDecrGu == "D"){
// 							sDEcrGuNm = "대변";
// 						}else{
// 							sDEcrGuNm = "차변";
// 						}
// 					    //trace("sDEcrGuNm = " + sDEcrGuNm);
// 						var arrMsgArg = [sDEcrGuNm];
// 						this.gfn_Alert("FA020", arrMsgArg); //반제계정은 [ &ITM0 ] 만 가능합니다. 
// 						
// 						this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "ACOM_CD", "");
// 						this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "ACOM_NM", "");
// 						this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "DECR_GU_CHK", "");//차대구분					
// 						this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "CTRL_CD", "");//전표손익제어
// 					}
// 				}
				
			}
		}else{
			this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "ACOM_CD", "");
			this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "ACOM_NM", "");
			this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "DECR_GU_CHK", "");//차대구분					
			this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "CTRL_CD", "");//전표손익제어					
		}
// 		else{
// 			 this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "ACOM_CD", "");
// 			 this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10.setCellPos(this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10.getBindCellIndex("body",'ACOM_CD'));
// 		     this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10.setFocus();
// 		}
	
	} else if(strId == "S_ACUM_CD_01"){
		// 조회 회계단위
		if (!this.gfn_IsNull(rtnValue)) {
			var arrRtnVal = eval(rtnValue);	
			
			if (!this.gfn_IsNull(arrRtnVal.ACUM_CD)) {
				this.div_Search.form.edt_AcumCd.set_value(arrRtnVal.ACUM_CD);
				this.div_Search.form.edt_AcumNm.set_value(arrRtnVal.ACUM_NM);
			}
		}else{
			this.div_Search.form.edt_AcumCd.set_value("");
			this.div_Search.form.edt_AcumNm.set_value("");
		}
	} else if(strId == "S_ACUM_CD_02"){
		// MASTER 회계단위
		if (!this.gfn_IsNull(rtnValue)) {
			var arrRtnVal = eval(rtnValue);	
			
			if (!this.gfn_IsNull(arrRtnVal.ACUM_CD)) {
				this.div_MasterInput.form.tab_Master.tpg_01.form.edt_AcumCd.set_value(arrRtnVal.ACUM_CD);
				this.div_MasterInput.form.tab_Master.tpg_01.form.edt_AcumNm.set_value(arrRtnVal.ACUM_NM);
			}
		}
	}else if(strId == "M_CUSM_CD_01"){
	
		//trace("M_CUSM_CD_01 1");
		if (!this.gfn_IsNull(rtnValue)) {
			var arrRtnVal = eval(rtnValue);	
			
			if (!this.gfn_IsNull(arrRtnVal.CUSM_CD)) {
				//trace("M_CUSM_CD_01 1" + arrRtnVal.CUSM_CD);
				//this.ds_Master10.setColumn(this.ds_Master10.rowposition, "PACS_CD", arrRtnVal.CUSM_CD)
				this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PacsCd.set_value(arrRtnVal.CUSM_CD);
				this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PacsNm.set_value(arrRtnVal.CUSM_NM);
			}
		}else{
			this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PacsCd.set_value("");
			this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PacsNm.set_value("");
		}
	//[Detail영역-검색]
	//반제전표찾기
	} else if(strId == "S_BANJE_CD_01"){
		
		trace("rtnValue = " + rtnValue);
	
		if (!this.gfn_IsNull(rtnValue)) {
		
			var arrRtnVal01 = rtnValue.split("@^&");
			var sAcchNo = "";
			var sAccbSe = "";
			var sRemkNm = ""; 
			var iFvFindRow = 0;
			//trace("arrRtnVal01 = " + arrRtnVal01);
			//this.ds_Detail10.clearData();
			bCheckBgcm = false;
			trace("arrRtnVal01.length = " + arrRtnVal01.length);
			
  			for(var iLoop = 0; iLoop < arrRtnVal01.length-1; iLoop++) {
			
			
				var arrRtnVal = eval(arrRtnVal01[iLoop]);
				
				
				//trace("arrRtnVal = " + arrRtnVal);
				
				
				
				sAcchNo = arrRtnVal.ACCH_NO;
				sAccbSe = arrRtnVal.ACCB_SE;
				trace("1");
				sRemkNm = arrRtnVal.REMK_NM; //적요
				trace("2");
				//같은 반제전표는 등록 안되게 한다.
				iFvFindRow = this.ds_Detail10.findRowExpr("ANTI_NO=='" + sAcchNo+ "' && ANTI_SE=='"+sAccbSe+"'");//업무Key Row 찾기
				trace("3");
				//trace("iFvFindRow = " + iFvFindRow);

				if(iFvFindRow < 0){
					
					trace("4");
					
				
					this.fvDsRowPosChangeDetail = false; //DETAIL10 컬럼변경, ROW 변경 이벤트 타지않도록
					this.fvDetailGu = true;
					
					
					//var iAddRow = this.gfn_GridInsertProcess(this, this.ds_Detail10);//crud_flag 변경-입력(I)
					//var iAddRow = this.ds_Detail10.addRow();
					var iAddRow = this.gfn_GridInsertProcess(this, this.ds_Detail10);//crud_flag 변경-입력(I)
					
					var sDecrGu = arrRtnVal.DECR_GU//차대변구분1
					var sConverGu = "";//차대변구분2
					var dDebiAm = 0;//차변금액
					var dCredAm = 0;//대변금액
					
					//계정구분이 차변일때
					if (sDecrGu == "D") {
						sConverGu = "C";
						dCredAm = arrRtnVal.MIBAN_AM;//대변금액에 잔액 세팅
					//대변일때	
					} else if (sDecrGu == "C") {
						sConverGu = "D";
						dDebiAm = arrRtnVal.MIBAN_AM;//차변금액에 잔액 세팅
					}
					
					this.ds_Detail10.setColumn(iAddRow, "COMM_CD", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "COMM_CD")); //회사코드
					this.ds_Detail10.setColumn(iAddRow, "ACCH_NO", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACCH_NO")); //발의번호
					this.ds_Detail10.setColumn(iAddRow, "WOFH_SQ", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "WOFH_SQ")); //결재차수
					this.ds_Detail10.setColumn(iAddRow, "ACUM_CD", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "ACUM_CD")); //회계단위코드
					
		
					//this.ds_Detail10.setColumn(iAddRow, "ACUM_CD", arrRtnVal.ACUM_CD);//회계단위코드
					this.ds_Detail10.setColumn(iAddRow, "DECR_GU", sConverGu);//차대구분
					this.ds_Detail10.setColumn(iAddRow, "ACOM_CD", arrRtnVal.ACOM_CD);//계정코드
					this.ds_Detail10.setColumn(iAddRow, "ACOM_NM", arrRtnVal.ACOM_NM);//계정명
					
					//trace(""palmCd 5 = " + arrRtnVal.PALM_CD);
					this.ds_Detail10.setColumn(iAddRow, "PALM_CD", arrRtnVal.PALM_CD);//회계기준코드   .replace("undefined","")
					this.ds_Detail10.setColumn(iAddRow, "PALM_NM", arrRtnVal.PALM_NM);//회계기준명
					this.ds_Detail10.setColumn(iAddRow, "CRED_AM", dCredAm);//대변금액
					this.ds_Detail10.setColumn(iAddRow, "DEBI_AM", dDebiAm);//차변금액
					//반제잔액 체크용
					this.ds_Detail10.setColumn(iAddRow, "ANTI_AM", arrRtnVal.MIBAN_AM);//반제잔액
					this.ds_Detail10.setColumn(iAddRow, "ANTI_YN", "1");//반제YN
					
					this.ds_Detail10.setColumn(iAddRow, "REMK_NM", arrRtnVal.REMK_NM);//적요
					
					this.ds_Detail10.setColumn(iAddRow, "MANA_CD", arrRtnVal.MANA_CD);//대표_관리항목코드
					this.ds_Detail10.setColumn(iAddRow, "MANA_NM", arrRtnVal.MANA_NM);//대표_관리항목명
					this.ds_Detail10.setColumn(iAddRow, "DETA_CD", arrRtnVal.DETA_CD);//대표_관리상세코드
					this.ds_Detail10.setColumn(iAddRow, "DETA_CD", arrRtnVal.DETA_CD);//대표_관리상세코드
					this.ds_Detail10.setColumn(iAddRow, "DETA_NM", arrRtnVal.DETA_NM);//대표_관리상세명
					this.ds_Detail10.setColumn(iAddRow, "MA01_CD", arrRtnVal.MA01_CD);//관리항목코드1
					this.ds_Detail10.setColumn(iAddRow, "MA02_CD", arrRtnVal.MA02_CD);//관리항목코드2
					this.ds_Detail10.setColumn(iAddRow, "MA03_CD", arrRtnVal.MA03_CD);//관리항목코드3
					this.ds_Detail10.setColumn(iAddRow, "MA04_CD", arrRtnVal.MA04_CD);//관리항목코드4
					this.ds_Detail10.setColumn(iAddRow, "MA05_CD", arrRtnVal.MA05_CD);//관리항목코드5
					this.ds_Detail10.setColumn(iAddRow, "MA06_CD", arrRtnVal.MA06_CD);//관리항목코드6
					this.ds_Detail10.setColumn(iAddRow, "MA07_CD", arrRtnVal.MA07_CD);//관리항목코드7
					this.ds_Detail10.setColumn(iAddRow, "MA08_CD", arrRtnVal.MA08_CD);//관리항목코드8
					this.ds_Detail10.setColumn(iAddRow, "MA01_NM", arrRtnVal.MA01_NM);//관리항목명1
					this.ds_Detail10.setColumn(iAddRow, "MA02_NM", arrRtnVal.MA02_NM);//관리항목명2
					this.ds_Detail10.setColumn(iAddRow, "MA03_NM", arrRtnVal.MA03_NM);//관리항목명3
					this.ds_Detail10.setColumn(iAddRow, "MA04_NM", arrRtnVal.MA04_NM);//관리항목명4
					this.ds_Detail10.setColumn(iAddRow, "MA05_NM", arrRtnVal.MA05_NM);//관리항목명5
					this.ds_Detail10.setColumn(iAddRow, "MA06_NM", arrRtnVal.MA06_NM);//관리항목명6
					this.ds_Detail10.setColumn(iAddRow, "MA07_NM", arrRtnVal.MA07_NM);//관리항목명7
					this.ds_Detail10.setColumn(iAddRow, "MA08_NM", arrRtnVal.MA08_NM);//관리항목명8
					this.ds_Detail10.setColumn(iAddRow, "DE01_CD", arrRtnVal.DE01_CD);//관리상세코드1
					this.ds_Detail10.setColumn(iAddRow, "DE02_CD", arrRtnVal.DE02_CD);//관리상세코드2
					this.ds_Detail10.setColumn(iAddRow, "DE03_CD", arrRtnVal.DE03_CD);//관리상세코드3
					this.ds_Detail10.setColumn(iAddRow, "DE04_CD", arrRtnVal.DE04_CD);//관리상세코드4
					this.ds_Detail10.setColumn(iAddRow, "DE05_CD", arrRtnVal.DE05_CD);//관리상세코드5
					this.ds_Detail10.setColumn(iAddRow, "DE06_CD", arrRtnVal.DE06_CD);//관리상세코드6
					this.ds_Detail10.setColumn(iAddRow, "DE07_CD", arrRtnVal.DE07_CD);//관리상세코드7
					this.ds_Detail10.setColumn(iAddRow, "DE08_CD", arrRtnVal.DE08_CD);//관리상세코드8
					
					this.ds_Detail10.setColumn(iAddRow, "VDE01_CD", arrRtnVal.DE01_CD);//관리상세코드1
					this.ds_Detail10.setColumn(iAddRow, "VDE02_CD", arrRtnVal.DE02_CD);//관리상세코드2
					this.ds_Detail10.setColumn(iAddRow, "VDE03_CD", arrRtnVal.DE03_CD);//관리상세코드3
					this.ds_Detail10.setColumn(iAddRow, "VDE04_CD", arrRtnVal.DE04_CD);//관리상세코드4
					this.ds_Detail10.setColumn(iAddRow, "VDE05_CD", arrRtnVal.DE05_CD);//관리상세코드5
					this.ds_Detail10.setColumn(iAddRow, "VDE06_CD", arrRtnVal.DE06_CD);//관리상세코드6
					this.ds_Detail10.setColumn(iAddRow, "VDE07_CD", arrRtnVal.DE07_CD);//관리상세코드7
					this.ds_Detail10.setColumn(iAddRow, "VDE08_CD", arrRtnVal.DE08_CD);//관리상세코드8
					
					this.ds_Detail10.setColumn(iAddRow, "DE01_NM", arrRtnVal.DE01_NM);//관리상세명1
					this.ds_Detail10.setColumn(iAddRow, "DE02_NM", arrRtnVal.DE02_NM);//관리상세명2
					this.ds_Detail10.setColumn(iAddRow, "DE03_NM", arrRtnVal.DE03_NM);//관리상세명3
					this.ds_Detail10.setColumn(iAddRow, "DE04_NM", arrRtnVal.DE04_NM);//관리상세명4
					this.ds_Detail10.setColumn(iAddRow, "DE05_NM", arrRtnVal.DE05_NM);//관리상세명5
					this.ds_Detail10.setColumn(iAddRow, "DE06_NM", arrRtnVal.DE06_NM);//관리상세명6
					this.ds_Detail10.setColumn(iAddRow, "DE07_NM", arrRtnVal.DE07_NM);//관리상세명7
					this.ds_Detail10.setColumn(iAddRow, "DE08_NM", arrRtnVal.DE08_NM);//관리상세명8
					
					this.ds_Detail10.setColumn(iAddRow, "SLIP_YN", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "SLIP_YN"));//결의승인여부
					this.ds_Detail10.setColumn(iAddRow, "BUDG_MM", this.div_MasterInput.form.tab_Master.tpg_01.form.cal_AcchDd.value.substring(0, 6));//편성년월
					this.ds_Detail10.setColumn(iAddRow, "BUDP_CD", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "DEPM_CD"));//예산부서코드
					this.ds_Detail10.setColumn(iAddRow, "BUDP_NM", this.ds_Master10.getColumn(this.ds_Master10.rowposition, "DEPM_NM"));//예산부서명
					this.ds_Detail10.setColumn(iAddRow, "CURR_CD", arrRtnVal.CURR_CD);//화폐(디폴트KRW)
					this.ds_Detail10.setColumn(iAddRow, "EXCH_RT", arrRtnVal.EXCH_RT);//환율
					
// 					trace("arrRtnVal.FRDB_AM = " + arrRtnVal.FRDB_AM);
// 					trace("arrRtnVal.FRCR_AM = " + arrRtnVal.FRCR_AM);
					
					if(sConverGu=="D"){
						this.ds_Detail10.setColumn(iAddRow, "FRDB_AM", arrRtnVal.FRCR_AM);//외화차변
						this.ds_Detail10.setColumn(iAddRow, "FRCR_AM", 0);//외화대변
					}else{
						this.ds_Detail10.setColumn(iAddRow, "FRDB_AM", 0);//외화차변
						this.ds_Detail10.setColumn(iAddRow, "FRCR_AM", arrRtnVal.FRDB_AM);//외화대변
					}
					
					this.ds_Detail10.setColumn(iAddRow, "ANTI_NO", arrRtnVal.ACCH_NO);//결의번호-반제_발의번호
					this.ds_Detail10.setColumn(iAddRow, "ANTI_SE", arrRtnVal.ACCB_SE);//발의순번-반제_발의순번
					
					this.ds_Detail10.setColumn(iAddRow, "ACOM_ENABLE", "0");//계정코드 수정할수없게(0은 수정X, 나머지는 수정O)
				
					this.fn_dsAcomMa(this.ds_Detail10.getColumn(iAddRow, "ACOM_CD"), "", bCheckBgcm);//관리항목
					this.fvDsRowPosChangeDetail = true;
					
					
					this.ds_Detail10.set_rowposition(iAddRow);
					
				}else{
					//반제 전표가 있는경우 메세지 처리
					//
					var arrMsgArg = [sRemkNm];
					this.gfn_Alert("FA023", arrMsgArg);//[ &ITM0 ]은(는) 중복 데이터 입니다.
				}
  			}
			this.ds_Detail10.set_rowposition(0);
			
 		}
  	}

};
 
/***********************************************************************************************
 * 13.03. [메세지] CallBack 함수 처리
 ***********************************************************************************************/  
this.fn_MsgCallback = function (strId, strVal)
{
	//삭제여부
	if (strId == "CONF.DELETE") {
		if(strVal )
		{
			this.fn_SvcDelete();//삭제 서비스 호출
		}
	//MASTER 변경사항 저장여부
	} else if (strId == "CONF.MAST_CHANGE") {
		if(strVal )
		{
			this.fn_ComBtnSave();//저장 서비스 호출
		} else {
			//데이터 변경여부 체크
			if (this.gfn_DsIsUpdated(this.ds_Master10)) {
				this.gfn_UndoColumn(this.div_MasterView.form.grd_Master10);
			}		
			
			if (this.gfn_DsIsUpdated(this.ds_Detail10)) {
				this.gfn_UndoColumn(this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10);
			}				
		}
	//[결재] 재기안여부
	} else if (strId == "CONF.RECIDE") {
		if(strVal) {
			this.fn_ComBtnRecideProc();//[결재] 재기안 서비스 호출
		}			
		//복사
	} else if (strId =="CONF.COPY"){
		if(strVal) {
			this.fn_ComBtnCopyProc();
		}
		
	}
}; 

/***********************************************************************************************
 * 13.04. [인쇄] 결재라인조회 CallBack 함수 처리
 ***********************************************************************************************/  
this.fn_ComWfLineCallback = function (sId)
{
	var sReportFile = "";//레포트파일ID
	//발의구분 - 지출
	if (sId == "2") {
		sReportFile = "M_FA_1000_01";//레포트파일ID
	//발의구분 - 대체
	} else if (sId == "3") {
		sReportFile = "M_FA_1000_02";//레포트파일ID
	//발의구분 - 결산
	} else if (sId == "4") {
		sReportFile = "M_FA_1000_03";//레포트파일ID	
	//발의구분 - 수입
	} else {
		sReportFile = "M_FA_1000_04";//레포트파일ID		
	}
	
	//마스터출력할 Row 복사
	this.ds_Master10Rt.clearData();
	this.ds_Master10Rt.addRow();
	this.ds_Master10Rt.copyRow(0, this.ds_Master10, this.ds_Master10.rowposition);
	
	//결의자 결재라인 정보 조회 - 주관부서 결재라인
	var sSLIP_ID = this.ds_Master10Rt.getColumn(0, "SLIP_ID");//결의자
	
	

	//결의자정보가 있으면
	if (!this.gfn_IsNull(sSLIP_ID)) {
		this.ds_Input.clearData();
		
		this.ds_Input.addRow();
		this.ds_Input.setColumn(0, "SLIP_ID", sSLIP_ID);//결의자
				
		//[공통]서비스정보 초기화
		this.gfn_InitComService(this);

		svcAddObj = new Object();//[공통] 서비스 추가 파라메타 정보 Object - 결의자 결재라인정보
		svcAddObj.sSelectSql = "wf:M_WF_1100_D_SL17";
		this.gfn_AddComSearchService(this, svcAddObj);		
		
		//[공통]서비스 호출 변수
		var svcCallObj = new Object();//[공통] 서비스 파라메타 정보 Object
		svcCallObj.sTrid = "DTL_ACCB_SEARCH";//Transaction ID 등 callback에서 넘겨 받을 String을 지정
		svcCallObj.sActionName = this.G_SV_FA;//서버에서 호출할 Action - 모듈별로 호출되는 기본 Actio이 다름 : 공통 서비스 Action 업무구분  변수 참조
		svcCallObj.sInputDaset = "ds_Input=ds_Input" //입력 데이터셋
		svcCallObj.sOutDatset = "gds_WfSlipFileUrl=ds_Detail17";//출력 데이터셋
		svcCallObj.sOtherArg = "";//서버로 전송할 기타 Argument 정보 문자열, 예) key=value key2=value2
		svcCallObj.sCallBackFnc = "fn_Callback";//서버에서 처리가 완료된 후 Callback 받을 Function 명
		svcCallObj.isSync = true;//동기식으로 설정할지 여부

		//[공통]서비스 호출
		this.gfn_CallComService(this, svcCallObj);	
		
		if (nApp.gds_WfSlipFileUrl.getRowCount() > 0) {
		
			var objWfFileUrl = nApp.gds_WfSlipFileUrl;
			this.ds_ComWfDrLine.addRow();

			var iNowCol = 1;//현재컬럼번호
			var sEMSI_ID = "";//저장파일명	
			var sFILE_UL = "";//URL		
			var sFULL_FILE_UL = "";//Full URL	
			var sEncode = "";

			for (var iLoop=0; iLoop < objWfFileUrl.getRowCount(); iLoop++) {

				sEMSI_ID = objWfFileUrl.getColumn(iLoop, "EMSI_ID");//저장파일명	
				sFILE_UL = objWfFileUrl.getColumn(iLoop, "FILE_UL");//URL
				sFULL_FILE_UL = "";//Full URL	

				if (!this.gfn_IsNull(sEMSI_ID)) {
					sEncode = encodeURI(sEMSI_ID.replace(/\+/,"%2B"));
					sFULL_FILE_UL = sFILE_UL + sEncode;//Full URL
				}				

				this.ds_ComWfDrLine.setColumn(0, "POSI_NM" + iNowCol, objWfFileUrl.getColumn(iLoop, "POSI_NM"));//직위
				this.ds_ComWfDrLine.setColumn(0, "APPR_NM" + iNowCol, objWfFileUrl.getColumn(iLoop, "EMPM_NM"));//성명
				this.ds_ComWfDrLine.setColumn(0, "SIGN_UL" + iNowCol, sFULL_FILE_UL);//사인
				this.ds_ComWfDrLine.setColumn(0, "APPR_TM" + iNowCol, objWfFileUrl.getColumn(iLoop, "WOFH_DD"));//날짜
				iNowCol++;

			}			
		
		}
		
	}
	
//출력
	var dsObj = new Object();//출력 데이터셋 정보
	dsObj.ds_Master10 = this.ds_Master10Rt;
	dsObj.ds_Detail10 = this.ds_Detail10;
	dsObj.ds_ComWfLine = this.ds_ComWfLine;//발의부서 결재라인
	dsObj.ds_ComWfDrLine = this.ds_ComWfDrLine;//주관부서 결재라인
	dsObj.ds_ComWfAtLine = this.ds_ComWfAtLine;//감사 결재라인	
	dsObj.ds_ComFileList = this.ds_ComFileList;// 첨부파일		 
	

	var paObj = new Object();//출력 파라메타 정보	
	paObj.PRNT_NM = this.gfn_GetSessionValue("USEM_NM");//출력자
	paObj.LOGO_UL = this.gfn_GetReportImageUrl("LOGO_UL_01");//이미지-로고
	   
	var oArg = {ProjectFolder:"FA"        //레포트저장 폴더
			  , ReportFile:sReportFile //레포트파일명
			  , ReportDs:dsObj            //레포트파라메타 - 데이터셋
			  , ReportParam:paObj         //레포트파라메타 - 변수
			   };                         //Popup화면 전달 파라메터
			   
	this.gfn_ReportPop("REPORT", oArg, "fn_PopupCallback");//레포트 팝업 호출	

}; 
 
/***********************************************************************************************
 * 14. [화면 사이즈] 조정 버튼 이벤트
 ***********************************************************************************************/
/***********************************************************************************************
 * 14.01. [조회영역-▲] 화면 사이즈조정 버튼 이벤트
 ***********************************************************************************************/ 
this.btn_DivMoveMi_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	//[공통] 버튼 변수
	var btnObj = new Object();//[공통] 버튼 변수 정보 Object
	btnObj.DivSearch = "this.div_Search";//조회영역 Div
	btnObj.DivMstLeft = "this.div_MasterView";//Master영역 Left Div : Master영역이 하나인경우에는 Left에 설정
	btnObj.DivMstRight = "this.div_MasterInput";//Master영역 Right Div
	btnObj.DivDetail = "this.div_DetailInput";//Detail영역 Div
	btnObj.MstLeft = this.sta_HSplitter.getOffsetLeft() + 6;//Master영역 Div Left
	btnObj.MstTop = 90;//Master영역 Div Top
	btnObj.MstHeight = 294;//Master영역 Div Height : Height가 없는경우 ""로 입력
	btnObj.MoveBtnDtl = "";//Detail영역 Move 버튼 : 없으면 ""로 입력
	this.gfn_MoveSeBtnNew(obj, btnObj);//Master영역 접고/펼치기 버튼 이벤트
};

/***********************************************************************************************
 * 14.02. [Master영역-▶] 화면 사이즈조정 버튼 이벤트
 ***********************************************************************************************/ 
this.div_MasterView_btn_DivMoveMv_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	//[공통] 버튼 변수
	var btnObj = new Object();//[공통] 버튼 변수 정보 Object
	btnObj.DivMstLeft = "this.div_MasterView";//Master영역 Left Div : Master영역이 하나인경우에는 Left에 설정
	btnObj.DivMstRight = "this.div_MasterInput";//Master영역 Right Div
	btnObj.MstWidth = 412;//Master Left 영역 Div Width
	btnObj.MstHeight = 294;//Master Left영역 Div Height : Height가 없는경우 ""로 입력
	btnObj.MoveBtnSch = "this.btn_DivMoveMi";//조회영역밑 Move 버튼
	btnObj.MoveBtnDtl = "this.div_DetailInput.form.btn_DivMoveDi";//Detail영역 Move 버튼 : 없으면 ""로 입력
	this.gfn_MoveMlBtn(obj, btnObj);//Master Left 영역 접고/펼치기 버튼 이벤트	
};

/***********************************************************************************************
 * 14.03. [Detail영역-▲] 화면 사이즈조정 버튼 이벤트
 ***********************************************************************************************/ 
this.div_DetailInput_btn_DivMoveDi_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	//[공통] 버튼 변수
	var btnObj = new Object();//[공통] 버튼 변수 정보 Object
	btnObj.DivMstLeft = "this.div_MasterView";//Master영역 Left Div : Master영역이 하나인경우에는 Left에 설정
	btnObj.DivMstRight = "this.div_MasterInput";//Master영역 Right Div
	btnObj.DivDetail = "this.div_DetailInput";//Detail영역 Div
	btnObj.DtlTop = 378;//Detail영역 Div Top
	btnObj.MoveBtnSch = "this.btn_DivMoveMi";//조회영역밑 Move 버튼
	this.gfn_MoveDtlBtn(obj, btnObj);//Detail영역 접고/펼치기 버튼 이벤트				
};


/***********************************************************************************************
 * 14.03. [Detail영역-▶] 화면 사이즈조정 버튼 이벤트
 ***********************************************************************************************/ 





/***********************************************************************************************
 * 15. [사용자정의 함수]
 ***********************************************************************************************/

/***********************************************************************************************
 * 15.00. [결재] 결재상태에 따른 컴포넌트 Enable 등 처리
 ***********************************************************************************************/ 
this.fn_SetWfCompEnable = function()
{ 	
	//[결재]결재내역 팝업화면으로 호출여부
	if (!this.fvWfPopupMode) {
		//[결재] 공통버튼 제어
 		var bCommSaveButton = true;//저장버튼 활성화 여부-기본값은 false로 해야함. - 결재승인후 수정일 필요한 화면에서만 true로 설정해야함. 
 		//this.fvWfSearchMode = this.gfn_SetCommButtonWf(this, this.ds_Master10.getColumn(this.ds_Master10.rowposition, "WOFH_ST"), bCommSaveButton);//결재진행상태		
		var sWofhSt =  this.ds_Master10.getColumn(this.ds_Master10.rowposition, "WOFH_ST");
		var sSlipYn =  this.ds_Master10.getColumn(this.ds_Master10.rowposition, "SLIP_YN");
 		this.fvWofhStatus = this.gfn_SetCommButtonWf(this, sWofhSt, bCommSaveButton);//결재진행상태		
		
		//결재승인상태가 아니고 수정가능한 부서이면 
		if(this.fvModifyYn &&  sSlipYn == "0"){
			this.fvWofhStatus = false;
		}
		//결의전표 수정가능 
		if(this.fvModifySlipYn){
		    //공통코드 FA100 결의전표수정여부 Y
			this.fvWofhStatus = false;
		}
		
	}
	
	if (!this.gfn_IsNull(this.popAcchNo)) {
		this.fvWofhStatus = true;
	}
	
	//[결재]결재내역 조회모드이면 Visble false
	if (this.fvWfSearchMode || this.fvWofhStatus ) {
		//trace("1");
		//[결재]결재내역 팝업화면으로 호출여부
		if (this.fvWfPopupMode) {
			this.div_Search.set_enable(false);//조회영역 Enable처리
		}
		this.div_DetailInput.form.div_ComGrdBtn.set_visible(false);
		this.div_DetailInput.form.btn_banFind.set_visible(false);//반제전표찾기
		//[결재] Div하위의 컴포넌트 Enable 처리
		this.gfn_SetCompGroupEnable(this.div_MasterInput.form, false);//Master 입력 프리폼
		this.gfn_SetCompGroupEnable(this.div_DetailInput.form, false);//Detail 입력			
		this.div_MasterInput.form.tab_Master.tpg_01.form.btn_AcreNmPop.set_enable(true);
		this.div_DetailInput.form.btn_banFind.set_enable(false);
		//관리항목Div
		this.div_DetailInput.form.div_detailRight.form.div_Item.set_enable(false);

	} else {

		//trace("2");
		this.div_DetailInput.form.div_ComGrdBtn.set_visible(true);
		this.div_DetailInput.form.btn_banFind.set_visible(true);//반제전표찾기
		//[결재] Div하위의 컴포넌트 Enable 처리
		this.gfn_SetCompGroupEnable(this.div_MasterInput.form, true);//Master 입력 프리폼
		this.gfn_SetCompGroupEnable(this.div_DetailInput.form, true);//Detail 입력	
		
		//[결재] Div하위의 컴포넌트 Enable 처리 제외할 컴포넌트설정
		this.div_MasterInput.form.tab_Master.tpg_01.form.mae_AcchNo.set_readonly(true);
 		this.div_MasterInput.form.tab_Master.tpg_01.form.mae_SlipNo.set_readonly(true);
 		this.div_MasterInput.form.tab_Master.tpg_01.form.edt_DepmNm.set_readonly(true);
 		this.div_MasterInput.form.tab_Master.tpg_01.form.edt_EmpmNm.set_readonly(true);
 		this.div_MasterInput.form.tab_Master.tpg_01.form.edt_AcumNm.set_readonly(true);
 		this.div_MasterInput.form.tab_Master.tpg_01.form.mae_AcchAm.set_readonly(true);	
 		this.div_MasterInput.form.tab_Master.tpg_01.form.chk_TranYn.set_readonly(true);	
 		this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_ActyCd.set_readonly(true);	 
 		this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PacsNm.set_readonly(true);	 
		this.div_DetailInput.form.btn_banFind.set_enable(true);
		
		//관리항목Div
		this.div_DetailInput.form.div_detailRight.form.div_Item.set_enable(true);	
		//this.div_DetailInput.form.div_detailRight.form.div_Budget.form.chk_BgcmYn.set_enable(false);//예산통제여부		
		this.div_DetailInput.form.div_detailRight.form.div_Budget.set_enable(false);
	}
	
}

/***********************************************************************************************
 * 15.01. [공통 그리드 버튼] 입력 버튼 설정
 ***********************************************************************************************/ 
this.fn_SetGridInputButton = function()
{
	//그리드 공통 버튼 권한이 있으면
	if (this.fvFormComBtnAuthYn)
	{
		this.gfn_SetGridInputBtnUrl(this.div_DetailInput.form.div_ComGrdBtn);//[공통] 그리드 입력 버튼 URL 설정
		
		//상세 그리드버튼 설정 : 버튼ID|권한(Y/N)|호출함수명
		var objBtnInfo01List = ["COPY|Y|fn_DetailGrd01Copy"
							 ,"ADD|Y|fn_DetailGrd01AddRow"
							 ,"INSERT|Y|fn_DetailGrd01InsertRow"
							 ,"DELETE|Y|fn_DetailGrd01DeleteRow"
							 ,"CANCEL|Y|fn_DetailGrd01Cancel"];
		this.div_DetailInput.form.div_ComGrdBtn.form.fn_SetGrdButtonFunc(this, objBtnInfo01List);	
		
		
	}
}

/***********************************************************************************************
 * 15.02. [공통 그리드 버튼] 검색 Tab 버튼 설정
 ***********************************************************************************************/ 
this.fn_SetGridChoiceButton = function()
{

	this.gfn_SetGridChoiceBtnUrl(this.div_DetailInput.form.div_ComGrdBtn);//[공통]그리드 선택 버튼 URL 설정

	//상세 그리드버튼 설정 : 버튼ID|권한(Y/N)|호출함수명
	var objBtnInfo01List = ["CHECK|Y|fn_DetailGrd02AllCheck"
						 ,"UNCHK|Y|fn_DetailGrd02AllUnCheck"
						 ,"S_CHECK|Y|fn_DetailGrd02SomeCheck"
						 ,"S_UNCHK|Y|fn_DetailGrd02SomeUnCheck"						 
						 ,"CHOICE|Y|fn_DetailGrd02Choice"
						 ,"CANCEL|Y|fn_DetailGrd02Cancel"];
	this.div_DetailInput.form.div_ComGrdBtn.form.fn_SetGrdButtonFunc(this, objBtnInfo01List);		
}

/***********************************************************************************************
 * 15.03. [공통 첨부파일] 화면 설정
 ***********************************************************************************************/ 
this.fn_SetTabComAttachFile = function()
{
	//그리드 공통 버튼 권한이 있으면
	if (this.fvFormComBtnAuthYn)
	{
		//첨부파일정보 권한설정
		var oScrnAuth = new Object();//[공통] 첨부파일 권한정보
		oScrnAuth.POPUP_YN = "N";//팝업화면 유무
		oScrnAuth.AUTH_YN = "Y";//권한 유무
		oScrnAuth.FILE_CHECK_YN = "Y";//첨부파일종류 체크유무
		oScrnAuth.PRGM_ID = this.fvComPrgmId;//프로그램ID
		oScrnAuth.FILM_GU = "H";//첨부파일구분-Head
		
		this.fvFileDiv.fn_SetCommFileScrnAuth(oScrnAuth);	
	} else {
		//첨부파일정보 권한설정
		var oScrnAuth = new Object();//[공통] 첨부파일 권한정보
		oScrnAuth.POPUP_YN = "N";//팝업화면 유무
		oScrnAuth.AUTH_YN = "N";//권한 유무
		oScrnAuth.FILE_CHECK_YN = "Y";//첨부파일종류 체크유무
		oScrnAuth.PRGM_ID = this.fvComPrgmId;//프로그램ID
		oScrnAuth.FILM_GU = "H";//첨부파일구분-Head		
		
		this.fvFileDiv.fn_SetCommFileScrnAuth(oScrnAuth);	
	}
}

/***********************************************************************************************
 * 15.04. [공통 그리드 버튼] 파일 버튼 설정
 ***********************************************************************************************/ 
this.fn_SetGridFileButton = function()
{
	this.gfn_SetFileBtnUrl(this.div_DetailInput.form.div_ComGrdBtn);//[공통] 파일 버튼 URL 설정
	
	//파일 버튼 설정 : 버튼ID|호출함수명
	var objBtnInfo01List = ["ADD|fn_FileGrd01AddRow"
						 ,"DELETE|fn_FileGrd01DeleteRow"];
	this.div_DetailInput.form.div_ComGrdBtn.form.fn_SetGrdButtonFunc(this, objBtnInfo01List);			
}



/***********************************************************************************************
 * 15.05. [발의구분] DATA 변경시
 ***********************************************************************************************/ 
this.fn_cbo_AcchGu = function(acchGuValue, rowChgEvt)
{
	/*
	1. 발의구분 변경시 
	   입금/지급 구분에 따리 입력항목 text 를 넣어준다.

		   지급          입금
		1) 지급구분   – 입금구분 
		2) 지급처     – 거래처
		3) 지급은행   – 입금은행
		4) 지급계좌   – 입금계좌
		5) 지급요청일 - 입금예정일
	*/
	//this.fvDsRowPosChange = true;
	//trace("fn_cbo_AcchGu start");
	
	//0030
	
	
	if(acchGuValue == "1"){
		//수입
	
		this.div_MasterInput.form.tab_Master.tpg_01.form.cal_PareDd.set_readonly(false); // 입금예정일
		this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PacsGu.set_readonly(false); // 입금구분
		this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PacsCd.set_readonly(false); // 거래처
		this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PacsNm.set_readonly(true); // 입금처명
		this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PabaCd.set_readonly(false); // 입금은행
		//this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PaacNo.set_enable(true); // 입금계좌
		this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PaacNo.set_readonly(false);
		this.div_MasterInput.form.tab_Master.tpg_01.form.btn_PacsCd.set_enable(true); //
		
		this.div_MasterInput.form.tab_Master.tpg_01.form.sta_PacsGu.set_text("입금구분");
		this.div_MasterInput.form.tab_Master.tpg_01.form.sta_PacsCd.set_text("거래처");
		this.div_MasterInput.form.tab_Master.tpg_01.form.sta_PabaCd.set_text("입금은행"); 
		this.div_MasterInput.form.tab_Master.tpg_01.form.sta_PaacNo.set_text("입금계좌"); 
		this.div_MasterInput.form.tab_Master.tpg_01.form.sta_PareDd.set_text("입금예정일");
// 		this.div_MasterInput.form.tab_Master.tpg_01.form.cal_PareDd.set_cssclass("essential"); //지급요청일 
// 		this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PacsGu.set_cssclass("essential"); //지급구분 
// 		this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PacsCd.set_cssclass("essential"); //지급처 
		//trace("fn_cbo_AcchGu = "+acchGuValue + "   = " +this.ds_Master10.getColumn(this.ds_Master10.rowposition, "PACS_GU"));
		if ( this.ds_Master10.getColumn(this.ds_Master10.rowposition, "PACS_GU")=="0030"){
			//입금구분이 계좌이체인경우 입금계좌 필수
			//this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PaacNo.set_cssclass("essential"); //계좌정보
			this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PaacNo.set_readonly(false);
		}else{
			this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PaacNo.set_cssclass(""); //계좌정보
			this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PaacNo.set_readonly(true);
		}
		
		

		this.ds_SdCbabFull.filter("");
		this.ds_SdCbabFull.filter("CUSM_CD == '" + "ACNO" + "' || COMM_CD == 'XX'");	
		//this.ds_SdCbabFull.filter("CUSM_CD == '" + "ACNO" + "'");	
		this.ds_SdCbabFull.set_keystring( "S:-CBAB_YN" );
		//this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PaacNo.set_index(0);
		
		
		//입금구분
		this.ds_Fa114.filter("");
		this.ds_Fa114.filter("OP01_NM == '" + "1" + "'");
		
		
	}else if(acchGuValue == "2"){
		//지출
		
		this.div_MasterInput.form.tab_Master.tpg_01.form.cal_PareDd.set_readonly(false); // 지급요청일
		this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PacsGu.set_readonly(false); // 지급구분
		this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PacsCd.set_readonly(false); // 지급처
		this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PacsNm.set_readonly(true); // 거래처명
		this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PabaCd.set_readonly(false); // 지급은행
		//this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PaacNo.set_enable(true); // 지급계좌
		this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PaacNo.set_readonly(false);
		this.div_MasterInput.form.tab_Master.tpg_01.form.btn_PacsCd.set_enable(true); //
		
		this.div_MasterInput.form.tab_Master.tpg_01.form.sta_PacsGu.set_text("지급구분");
		this.div_MasterInput.form.tab_Master.tpg_01.form.sta_PacsCd.set_text("지급처");
		this.div_MasterInput.form.tab_Master.tpg_01.form.sta_PabaCd.set_text("지급은행"); 
		this.div_MasterInput.form.tab_Master.tpg_01.form.sta_PaacNo.set_text("지급계좌"); 
		this.div_MasterInput.form.tab_Master.tpg_01.form.sta_PareDd.set_text("지급요청일"); 
// 		this.div_MasterInput.form.tab_Master.tpg_01.form.cal_PareDd.set_cssclass("essential"); //지급요청일 
// 		this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PacsGu.set_cssclass("essential"); //지급구분 
// 		this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PacsCd.set_cssclass("essential"); //지급처 
		//trace("fn_cbo_AcchGu = "+acchGuValue + "   = " +this.ds_Master10.getColumn(this.ds_Master10.rowposition, "PACS_GU"));
		if ( this.ds_Master10.getColumn(this.ds_Master10.rowposition, "PACS_GU")=="0030"){
			//입금구분이 계좌이체인경우 입금계좌 필수
			//this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PaacNo.set_cssclass("essential"); //계좌정보
			////this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PaacNo.set_cssclass("essential"); //계좌정보 
		}else{
			this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PaacNo.set_cssclass(""); //계좌정보
		}
		
		
		
		var pacsCd = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "PACS_CD");
		//trace("pacsCd = " + pacsCd);
		this.ds_SdCbabFull.filter("");
	    this.ds_SdCbabFull.filter("CUSM_CD == '" + pacsCd + "' || COMM_CD == 'XX'");	
		//this.ds_SdCbabFull.filter("CUSM_CD == '" + pacsCd + "'");	
		this.ds_SdCbabFull.set_keystring( "S:-CBAB_YN" );
		//this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PaacNo.set_index(0);
		
		
		//입금구분
		this.ds_Fa114.filter("");
		
		
	}else{
		this.div_MasterInput.form.tab_Master.tpg_01.form.cal_PareDd.set_cssclass("");
		// 값 지움
		/*
			ds_Master10.rowchage 일때는 false
			발의구분값이 변경시 true
		*/
		if(rowChgEvt){
			this.div_MasterInput.form.tab_Master.tpg_01.form.cal_PareDd.set_value(""); // 지급요청일
			this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PacsGu.set_value(""); // 지급구분
			this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PacsCd.set_value(""); // 지급처
			this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PabaCd.set_value(""); // 지급은행
			//this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PaacNo.set_value(""); // 지급계좌
			this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PaacNo.set_value("");
		}
		
		// enable = false
		this.div_MasterInput.form.tab_Master.tpg_01.form.cal_PareDd.set_readonly(true); // 지급요청일
		this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PacsGu.set_readonly(true); // 지급구분
		this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PacsCd.set_readonly(true); // 지급처
		this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PacsNm.set_readonly(true); // 거래처명
		this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PabaCd.set_readonly(true); // 지급은행
		//this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PaacNo.set_enable(false); // 지급계좌
		this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PaacNo.set_readonly(true);
		this.div_MasterInput.form.tab_Master.tpg_01.form.btn_PacsCd.set_enable(false); //
		
		
		this.div_MasterInput.form.tab_Master.tpg_01.form.cal_PareDd.set_cssclass(""); //지급요청일 
		this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PacsGu.set_cssclass(""); //지급구분 
		this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PacsCd.set_cssclass(""); //지급처 
		this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PaacNo.set_cssclass(""); //계좌정보 
		
	}
	
	var sWOFH_ST = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "WOFH_ST");//결재진행상태
	
	if (sWOFH_ST == "0020" || sWOFH_ST == "0030" || sWOFH_ST == "0040" || sWOFH_ST == "0050") {
		this.div_MasterInput.form.tab_Master.tpg_01.form.cal_PareDd.set_readonly(true); // 지급요청일
		this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PacsGu.set_readonly(true); // 지급구분
		this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PacsCd.set_readonly(true); // 지급처
		this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PacsNm.set_readonly(true); // 지급처명
		this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PabaCd.set_readonly(true); // 지급은행
		//this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PaacNo.set_enable(false); // 지급계좌
		this.div_MasterInput.form.tab_Master.tpg_01.form.cbo_PaacNo.set_readonly(true);
		this.div_MasterInput.form.tab_Master.tpg_01.form.btn_PacsCd.set_enable(false); //	
	}
	//this.fvDsRowPosChange = false;
	//trace("fn_cbo_AcchGu end");
}


/***********************************************************************************************
 * 15.06. [MASTER 금액] DETAIL 차변금액 -> MASTER 금액 데이타 넣기 
 ***********************************************************************************************/ 
this.fn_AcchAmt = function()
{

	//DETAIL 차변금액 합을 Master그리드  금액으로 올린다.	
	var varSum;
	varSum = this.ds_Detail10.getCaseSum("crudType != 'D'", "CRED_AM");
	this.ds_Master10.setColumn(this.ds_Master10.rowposition, "ACCH_AM", varSum);	//Master에 금액 표기
}



/***********************************************************************************************
 * 15.07. [계정코드 변경시]  datastore ds_acomMa 조회
 ***********************************************************************************************/ 
this.fn_dsAcomMa = function(acomCd, fnGu, bCheckBgcm)
{
	//acomCd : 계정코드
	//1. ds_acomMa 조회
	this.ds_Input.clearData();
	this.ds_Detail11.clearData();
	
	//trace("fn_dsAcomMa acomCd = " + acomCd);
	if(this.gfn_IsNull(acomCd)){
		
		return;
	}
	
	
	this.ds_Input.addRow();
	this.ds_Input.setColumn(0, "ACOM_CD", acomCd);
	
	//예산편성계정이면
	if (bCheckBgcm) {
		var sDEPM_CD = this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "BUDP_CD");//부서코드
		var sBUDG_MM = this.gfn_Nvl(this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "BUDG_MM"), "");//편성년월
		
		if (!this.gfn_IsNull(sBUDG_MM)) {
			sBUDG_MM = sBUDG_MM.substr(0,6);
		}
		
		this.ds_Input.setColumn(0, "BUGS_YM", sBUDG_MM);
		this.ds_Input.setColumn(0, "DEPM_CD", sDEPM_CD);
	}
	
	//[공통]서비스정보 초기화
	this.gfn_InitComService(this);
		
	//[공통]서비스정보 추가
	var svcAddObj = new Object();//[공통] 서비스 추가 파라메타 정보 Object
	svcAddObj.sSelectSql = "fa:M_FA_1000_D_SL11";
	this.gfn_AddComSearchService(this, svcAddObj);
	
	var sOutDatset = "";//출력 데이터셋
	
	//예산편성계정이면
	if (bCheckBgcm) {	
		//[공통]서비스정보 추가 - 예산통제 정보 조회
		svcAddObj = new Object();//[공통] 서비스 추가 파라메타 정보 Object
		svcAddObj.sSelectSql = "fa:M_FA_1000_D_SL12";
		this.gfn_AddComSearchService(this, svcAddObj);			
		
		sOutDatset = "ds_AcomMa=ds_AcomMa ds_Detail11=ds_Detail11";//출력 데이터셋
		
	} else {
		sOutDatset = "ds_AcomMa=ds_AcomMa";//출력 데이터셋
	}
	
	//[공통]서비스 호출 변수
	var svcCallObj = new Object();//[공통] 서비스 파라메타 정보 Object
		
	if (fnGu =="SET"){
		//계정코드 입력
		svcCallObj.sTrid = "ACOM_MA_SET";//Transaction ID 등 callback에서 넘겨 받을 String을 지정
	}else{
		//rowsfocuschange
		svcCallObj.sTrid = "ACOM_MA";//Transaction ID 등 callback에서 넘겨 받을 String을 지정
	}
	svcCallObj.sActionName = this.G_SV_FA;//서버에서 호출할 Action - 모듈별로 호출되는 기본 Actio이 다름 : 공통 서비스 Action 업무구분  변수 참조
	svcCallObj.sInputDaset = "ds_Input=ds_Input" //입력 데이터셋
	svcCallObj.sOutDatset = sOutDatset;//출력 데이터셋
	svcCallObj.sOtherArg = "";//서버로 전송할 기타 Argument 정보 문자열, 예) key=value key2=value2
	svcCallObj.sCallBackFnc = "fn_Callback";//서버에서 처리가 완료된 후 Callback 받을 Function 명
	svcCallObj.isSync = true;
	//반제전표찾기시 동기식으로 설정
	//if (this.fvDetailGu == true) {
		//svcCallObj.isSync = true;
	//}
			
	//[공통]서비스 호출
	this.gfn_CallComService(this, svcCallObj);
	
	
	/*
 	//1. callback  에서 관리항목변경 및 입력된 데이타 입력
	*/
	
}


/***********************************************************************************************
 * 15.07. [계정코드 변경시]  datastore ds_acomMa 조회 후 MA_CD, 
 ***********************************************************************************************/ 
this.fn_SetMaNm = function(aRow)
{
	/*
	1. aRow = ds_Detail row 
	*/
	
	//this.ds_Detail10.setColumn(aRow, )
	var maNum;  //관리항목번호
	var maNm;   //관리항목명
	var maCd;   //관리항목코드
	var maYn;   // 관리항목 필수체크
	var Num;
	var reprYn;  //대표관리항목
	var dsAcomMaRowCnt = 0; //계정관리항목 개수
	

	for (var iLoop=0; iLoop < 8; iLoop++) {
		Num = "0"+ (iLoop+1);
		this.ds_Detail10.setColumn(aRow, "MA"+Num+"_NM", "");
		this.ds_Detail10.setColumn(aRow, "MA"+Num+"_CD", "");
		this.ds_Detail10.setColumn(aRow, "MA"+Num+"_YN", "");
		this.ds_Detail10.setColumn(aRow, "DE"+Num+"_CD", "");
		this.ds_Detail10.setColumn(aRow, "VDE"+Num+"_CD", "");
		this.ds_Detail10.setColumn(aRow, "DE"+Num+"_NM", "");
		
		if(iLoop < this.ds_AcomMa.getRowCount()){
			//관리항목 컬럼 위치
			maNum =  this.ds_AcomMa.getColumn(iLoop, "MA_NUM");
			//관리항목명
			maNm = this.ds_AcomMa.getColumn(iLoop, "MA_NM");
			maCd = this.ds_AcomMa.getColumn(iLoop, "MA_CD");
			reprYn = this.ds_AcomMa.getColumn(iLoop, "REPR_YN"); //대표관리항목체크
			
			
			this.ds_Detail10.setColumn(aRow, "MA"+maNum+"_NM", maNm);
			this.ds_Detail10.setColumn(aRow, "MA"+maNum+"_CD", maCd);
			
			if (maCd == "Y"){
				//환율 관리항목이 있을 경우 환율은 0으로 한다.
				this.ds_Detail10.setColumn(aRow, "EXCH_RT", 0);
			}
			//this.ds_Detail10.setColumn(aRow, "EXCH_RT", 1);
// 			//관리항목개수
// 			dsAcomMaRowCnt = nexacro.toNumber(this.ds_AcomMa.getRowCount());
// 			
// 			
// 			//trace("dsAcomMaRowCnt = " + (dsAcomMaRowCnt - 1)  );
// 			//trace("iLoop = " + iLoop + "  ds_AcomMa =  " + (dsAcomMaRowCnt - 1));
// 			//trace("iLoop EXCH_RT == " + this.ds_Detail10.getColumn(aRow, "EXCH_RT"));
// 			if((iLoop == (dsAcomMaRowCnt -1 ) ) && this.gfn_IsNull(this.ds_Detail10.getColumn(aRow, "EXCH_RT")) ){
// 				this.ds_Detail10.setColumn(aRow, "EXCH_RT", 1);
// 			}
			
			
			
			if(reprYn=="1"){
				this.ds_Detail10.setColumn(aRow, "MANA_NM", maNm);
				this.ds_Detail10.setColumn(aRow, "MANA_CD", maCd);
			}
			/*
		    //default 값 자동입력
			 1) row = ds_Detail.rowposition
			 2) maCd = ds_Detail의 관리항목컬럼
			 3) maCdValue = 관리항목코드
			 4) deCd = 관리항목 상세컬럼
			 5) deNm = 관리항목명 상세컬럼
			*/
			this.fn_ItemAutoInput(aRow, "MA"+maNum+"_CD", maCd, "DE"+maNum+"_CD", "DE"+maNum+"_NM");
			
			
			//관리항목필수체크
			maYn = this.ds_AcomMa.getColumn(iLoop, "MA_YN")
			this.ds_Detail10.setColumn(aRow, "MA"+maNum+"_YN", maYn);
		}
	}
			
}


/***********************************************************************************************
 * 15.08 [div taborder ] 공통함수
 ***********************************************************************************************/ 
this.fn_enterkeyTabOrder = function(obj, e)
{
	if(e.keycode == "13"){
		var curObj = this.getFocus();
		//trace("curObj = " + curObj);
		//  component = TextArea 인경우 엔터키 제외 시킨다. (예 비고)
		if (curObj != "[object TextArea]"){
			var objCom = curObj.parent.parent.form.getNextComponent(this.getFocus(),true);
					
			if(objCom.enable == false){
				objCom = curObj.parent.parent.form.getNextComponent(objCom.getFocus(),true);
			}
			
			if (objCom == "[object Combo]"){
			
			}
			objCom.setFocus();
		}
	}
}

/***********************************************************************************************
 * 15.09 [fn_MakeMaData ] 관리항목 컴포넌트 동적 생성
 ***********************************************************************************************/ 
this.fn_MakeMaData = function() {
		//생성된 컴포넌트 삭제
		
	var sSlipYn = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "SLIP_YN");	
	
	if (this.gfn_IsNull(sSlipYn)){
		sSlipYn = "0";
	}
	
		
	var arrComList = this.div_DetailInput.form.div_detailRight.form.div_Item.form.components;//Div 생성된 전체 컴폰넌트

	if (!this.gfn_IsNull(arrComList)) {

		for (var iLoop = arrComList.length-1; iLoop >= 0; iLoop--) {
			if (arrComList[iLoop].id != "sta_DetailRightBottom") {
				var rObj = this.div_DetailInput.form.div_detailRight.form.div_Item.removeChild(arrComList[iLoop].id);
				rObj.destroy();
				rObj = null;
			}
		}

	}

	if (this.ds_AcomMa.getRowCount() > 0) {
	
		// div height 관리항목 개수에 맞게 조정 
		this.div_DetailInput.form.div_detailRight.form.div_Item.set_height(this.ds_AcomMa.getRowCount() * 30 + 30);
		// div 예산 top은 관리항목 div 밑으로 
		this.div_DetailInput.form.div_detailRight.form.div_Budget.set_top("div_Item:0");
		
	
		var iCompTop = 30;//컴포넌트Top
		var staBack;//Back Static
		var staLabel;//Label Static
		var sItemGu = "";//컴포넌트구분
		var VedtCd;//Edit Code입력
		var edtCd;//Edit Code입력
		var edtNm;//Edit CodeName입력
		var btnPopup;//Popup 버튼
		var calCd;//Calendar 입력
		var calCd1;//Calendar 입력
		var calNm;//Calendar 입력
		var calText;//Calendar calText
		var maeCd;//MaskEdit 입력
		var cboCd;//Combo 입력
		var sMaYn = "";//필수입력여부
		var sLengCt = 0;//자릿수
		var sGRCM_CD = "";//그룹코드
		var sDETA_CD = "";//함수명
		var sCD01_NM = "";//코드컬럼명
		var sCD02_NM = "";//코드명컬럼명
		var sFUNC_NM = "";//코드명함수명
		var sMA_NUM  = "";//관리항목순서
		var sACOM_CD = "";//계정코드
		var sDecrGu  = "";//차대구분
		var sAcchDecrGu  = "";//계정차대구분
		var sMaCd    = ""; //관리항목코드
		var sMaNm   ="";  //관리항목명
		var iFvFindRow;
		var sBilmGu  = "";
		
		//관리항목 컴포넌트정보 데이터셋 초기화
		this.ds_CmMaInfo.clearData();
		this.ds_CmMaInfo.addRow();
		
		//바인딩
		var objBindItem = new BindItem();
		
		for (var iLoop=1; iLoop < 9; iLoop++) {
		
		
			
			//관리항목번호를 가져온다.
			sMA_NUM = this.fn_GetMakeMaData(iLoop, "MA_NUM");//관리항목순서
			//trace("sMA_NUM = " +sMA_NUM);
			if (sMA_NUM ==""){
				break;
			}
			//Back Static - 생성
			staBack = new Static("sta_Back" + iLoop, 0, iCompTop , null, 30, 0, null);
			staBack.set_cssclass("sta_WF_DBg");		
			this.div_DetailInput.form.div_detailRight.form.div_Item.addChild(staBack.name, staBack);		
			staBack.show();
			
			//Label Static - 생성
			staLabel = new Static("sta_Ma" + sMA_NUM, 0, iCompTop, 93, 30, null, null);
			staLabel.set_cssclass("sta_WF_DLabel");		
			staLabel.set_text(this.fn_GetMakeMaData(iLoop, "MA_NM"));//라벨명
			this.div_DetailInput.form.div_detailRight.form.div_Item.addChild(staLabel.name, staLabel);		
			staLabel.show();
			
// 			if(iLoop == 8 ){
// 				alert(this.div_DetailInput.form.div_detailRight.form.div_Item.form.sta_Ma08.text);
// 			}
			
			//입력컴포넌트 생성
			sItemGu = this.fn_GetMakeMaData(iLoop, "ITEM_GU");//컴포넌트구분
			sMaYn = this.fn_GetMakeMaData(iLoop, "MA_YN");//필수입력여부
			sLengCt = this.fn_GetMakeMaData(iLoop, "LENG_CT");//자릿수
			sGRCM_CD = this.fn_GetMakeMaData(iLoop, "CODM_CD");//그룹코드
			sDETA_CD = this.fn_GetMakeMaData(iLoop, "DETA_CD");//함수명
			sCD01_NM = this.fn_GetMakeMaData(iLoop, "CD01_NM");//코드컬럼명
			sCD02_NM = this.fn_GetMakeMaData(iLoop, "CD02_NM");//코드명컬럼명
			sFUNC_NM = this.fn_GetMakeMaData(iLoop, "FUNC_NM");//코드명함수명
			sACOM_CD = this.fn_GetMakeMaData(iLoop, "ACOM_CD");//계정코드
			sACOM_GU = this.fn_GetMakeMaData(iLoop, "ACOM_GU");//계정코드
			sDecrGu  = this.fn_GetMakeMaData(iLoop, "DECR_GU");//계정차대구분
			sMaCd    = this.fn_GetMakeMaData(iLoop, "MA_CD");  //관리항목코드
			sMaNm    = this.fn_GetMakeMaData(iLoop, "MA_NM");  //관리항목명
			sReprYn  = this.fn_GetMakeMaData(iLoop, "REPR_YN");//대표관리항목YN
			sAcchDecrGu = this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "DECR_GU");
			
			
			if(sSlipYn != "1" && this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "MA" + sMA_NUM+"_CD") != sMaCd){
				this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "MA" + sMA_NUM+"_CD", sMaCd);
				this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "MA" + sMA_NUM+"_NM", sMaNm);
			}
			

			/*
				1. 받을어음, 지급어음의 계정차대구분과 전표등록 차대구분이 같을경우 TEXT로 변경한다.
			*/
			if((sACOM_GU =="0020" || sACOM_GU =="0030") && sItemGu == "0020" && sMaCd == "6"){
				//받을어음, 지급어음의 계정차대구분과 전표등록 차대구분이 같을경우 TEXT로 변경한다.
				if(sDecrGu == sAcchDecrGu){
					sItemGu = "0010";
					// 코드값은 삭제한다.
					//this.ds_CmMaInfo.setColumn(0, "DE"+sMA_NUM+"_CD", "");
				}
			}
			

				
			
			//컴포넌트 바인딩 정보 삭제
			if (this.fn_FindBindItem("this.itemMa" + sMA_NUM + "Cd")) {
				var rtnobj = this.removeChild("this.itemMa" + sMA_NUM + "Cd");
				rtnobj.destroy();
			}
			if (this.fn_FindBindItem("this.itemMa" + sMA_NUM + "Nm")) {
				var rtnobj = this.removeChild("this.itemMa" + sMA_NUM + "Nm");
				rtnobj.destroy();
			}		
			if (this.fn_FindBindItem("this.itemMaV" + sMA_NUM + "Cd")) {
				var rtnobj = this.removeChild("this.itemMaV" + sMA_NUM + "Cd");
				rtnobj.destroy();
			}				
						
			//TEXT
			if (sItemGu == "0010") {
				//Edit Code - 생성
				edtCd = new Edit("edt_De" + sMA_NUM + "Cd", 96, iCompTop+3, null, 24, 3, null);
	
				
				//필수입력일때 - CSS변경
				if (sMaYn == "1") {
					edtCd.set_cssclass("essential");	
				}							
				
				//trace("TEXT= 4192====1");
				//Max Length 설정
				edtCd.set_maxlength(sLengCt);
				this.div_DetailInput.form.div_detailRight.form.div_Item.addChild(edtCd.name, edtCd);		
				edtCd.show();		
				
				//바인딩설정
				objBindItem = new BindItem();
				objBindItem.init("this.itemMa" + sMA_NUM + "Cd", "div_DetailInput.form.div_detailRight.form.div_Item.form." + "edt_De" + sMA_NUM + "Cd", "value", "ds_CmMaInfo", "DE" + sMA_NUM + "_NM");
				this.addChild("this.itemMa" + sMA_NUM + "Cd", objBindItem); 
				objBindItem.bind();
		
			//POPUP
			} else if (sItemGu == "0020") {
				
				//Edit Code - 생성
				edtCd = new Edit("edt_De" + sMA_NUM + "Cd", 96, iCompTop+3, 103, 24, null, null);
				//edtCd = new Edit("edt_De" + sMA_NUM + "Cd", 60, iCompTop+3, 103, 24, null, null);
	
				//필수입력일때 - CSS변경
				if (sMaYn == "1") {
					edtCd.set_cssclass("essential");	
				}
				 
				//edtCd.set_visible(false);
				
				//Max Length 설정
				edtCd.set_maxlength(sLengCt);
				this.div_DetailInput.form.div_detailRight.form.div_Item.addChild(edtCd.name, edtCd);		
				edtCd.FUNC_NM = sFUNC_NM;
				edtCd.ColCd  = "this.div_DetailInput.form.div_detailRight.form.div_Item.form." + "edt_De" + sMA_NUM + "Cd";//관리항목-코드컴포넌트
				edtCd.VColCd = "this.div_DetailInput.form.div_detailRight.form.div_Item.form." + "edt_VDe" + sMA_NUM + "Cd";//관리항목-코드컴포넌트
				edtCd.ColNm  = "this.div_DetailInput.form.div_detailRight.form.div_Item.form." + "edt_De" + sMA_NUM + "Nm";//관리항목-코드명컴포넌트				
				edtCd.GRCM_CD = sGRCM_CD;  // 공통그룹코드
				edtCd.sCD01_NM = sCD01_NM;//관리항목-코드컬럼명
				edtCd.sCD02_NM = sCD02_NM;//관리항목-코드명컬럼명
				
				
				edtCd.ACOM_GU = sACOM_GU;  // 계정자료구분
				edtCd.MaSeq = sMA_NUM;//관리항목-순번
				edtCd.DETA_CD = sDETA_CD;//관리항목-함수명
				edtCd.DecrGu = sDecrGu;   //차대구분
				edtCd.MaCd = sMaCd; //관리항목코드
				edtCd.ReprYn = sReprYn;//대표관리항목
				edtCd.AcchDecrGu = sAcchDecrGu;  //전표등록의 차대구분
				
				
				edtCd.addEventHandler("onchanged", this.fn_ComMaEditChangedEvent, this);//Edit 변경이벤트
				//trace("POPUP 4235=====1");
				edtCd.show();		
				
				
				

				//Edit Code - 생성
				VedtCd = new Edit("edt_VDe" + sMA_NUM + "Cd", 96, iCompTop+3, 103, 24, null, null);
	
				//필수입력일때 - CSS변경
				if (sMaYn == "1") {
					VedtCd.set_cssclass("essential");	
				}
				
				//Max Length 설정
				VedtCd.set_maxlength(sLengCt);
				this.div_DetailInput.form.div_detailRight.form.div_Item.addChild(VedtCd.name, VedtCd);		
				VedtCd.FUNC_NM = sFUNC_NM;
				VedtCd.ColCd = "this.div_DetailInput.form.div_detailRight.form.div_Item.form." + "edt_De" + sMA_NUM + "Cd";//관리항목-코드컴포넌트
				VedtCd.VColCd = "this.div_DetailInput.form.div_detailRight.form.div_Item.form." + "edt_VDe" + sMA_NUM + "Cd";//관리항목-코드컴포넌트
				VedtCd.ColNm = "this.div_DetailInput.form.div_detailRight.form.div_Item.form." + "edt_De" + sMA_NUM + "Nm";//관리항목-코드명컴포넌트				
				VedtCd.GRCM_CD = sGRCM_CD;  // 공통그룹코드
				VedtCd.sCD01_NM = sCD01_NM;//관리항목-코드컬럼명
				VedtCd.sCD02_NM = sCD02_NM;//관리항목-코드명컬럼명
				
				
				VedtCd.ACOM_GU = sACOM_GU;  // 계정자료구분
				VedtCd.MaSeq = sMA_NUM;//관리항목-순번
				VedtCd.DETA_CD = sDETA_CD;//관리항목-함수명
				VedtCd.DecrGu = sDecrGu;   //차대구분
				VedtCd.MaCd = sMaCd; //관리항목코드
				VedtCd.ReprYn = sReprYn;//대표관리항목
				VedtCd.AcchDecrGu = sAcchDecrGu;  //전표등록의 차대구분
				
				
				VedtCd.addEventHandler("onchanged", this.fn_ComMaEditChangedEvent, this);//Edit 변경이벤트
				//trace("POPUP 4235=====1");
				VedtCd.show();		
				
				
				
				//Edit CodeName - 생성
				edtNm = new Edit("edt_De" + sMA_NUM + "Nm", 202, iCompTop+3, null, 24, 30, null);
				this.div_DetailInput.form.div_detailRight.form.div_Item.addChild(edtNm.name, edtNm);		
				edtNm.set_readonly(true);
				edtNm.show();				
				
				btnPopup;//Popup 버튼
				btnPopup = new Button("btn_Ma" + sMA_NUM, null, iCompTop+3, 24, 24, 3, null);
				btnPopup.set_cssclass("btn_WF_SmallSearch");
				btnPopup.set_cursor("pointer");
				this.div_DetailInput.form.div_detailRight.form.div_Item.addChild(btnPopup.name, btnPopup);			
				btnPopup.addEventHandler("onclick", this.fn_ComMaPopupBtnEvent, this);
				btnPopup.MaSeq = sMA_NUM;//관리항목-순번
				btnPopup.DETA_CD = sDETA_CD;//관리항목-함수명
				btnPopup.ColCd = sCD01_NM;//관리항목-코드컬럼명
				btnPopup.VColCd = sCD01_NM;//관리항목-코드컬럼명
				btnPopup.ColNm = sCD02_NM;//관리항목-코드명컬럼명
				btnPopup.GrcmCd = sGRCM_CD;  //그룹코드
				btnPopup.AcomCd = sACOM_CD;  //계정코드
				btnPopup.AcomGu = sACOM_GU;  //계정구분
				btnPopup.DecrGu = sDecrGu;   //차대구분
				btnPopup.show();	
				
				//바인딩설정
				objBindItem = new BindItem();
				objBindItem.init("this.itemMa" + sMA_NUM + "Cd", "div_DetailInput.form.div_detailRight.form.div_Item.form." + "edt_De" + sMA_NUM + "Cd", "value", "ds_CmMaInfo", "DE" + sMA_NUM + "_CD");
				this.addChild("this.itemMa" + sMA_NUM + "Cd", objBindItem); 
				objBindItem.bind();
				
				//바인딩설정
				objBindItem = new BindItem();
				objBindItem.init("this.itemMaV" + sMA_NUM + "Cd", "div_DetailInput.form.div_detailRight.form.div_Item.form." + "edt_VDe" + sMA_NUM + "Cd", "value", "ds_CmMaInfo", "VDE" + sMA_NUM + "_CD");
				this.addChild("this.itemMaV" + sMA_NUM + "Cd", objBindItem); 
				objBindItem.bind();
				
				
				//바인딩설정
				objBindItem = new BindItem();
				objBindItem.init("this.itemMa" + sMA_NUM + "Nm", "div_DetailInput.form.div_detailRight.form.div_Item.form." + "edt_De" + sMA_NUM + "Nm", "value", "ds_CmMaInfo", "DE" + sMA_NUM + "_NM");
				this.addChild("this.itemMa" + sMA_NUM + "Nm", objBindItem); 
				objBindItem.bind();

			//Number(형식없음)
			} else if (sItemGu == "0030") {
				//Edit Code - 생성
				maeCd = new MaskEdit("mae_De" + sMA_NUM + "Cd", 96, iCompTop+3, null, 24, 3, null);
	
				//필수입력일때 - CSS변경
				if (sMaYn == "1") {
					maeCd.set_cssclass("essential");	
				}
				
				//Mask 설정
				maeCd.set_format("##0");
				maeCd.set_type("number");
				
				this.div_DetailInput.form.div_detailRight.form.div_Item.addChild(maeCd.name, maeCd);		
				maeCd.show();	
				
				//바인딩설정
				objBindItem = new BindItem();
				objBindItem.init("this.itemMa" + sMA_NUM + "Cd", "div_DetailInput.form.div_detailRight.form.div_Item.form." + "mae_De" + sMA_NUM + "Cd", "value", "ds_CmMaInfo", "DE" + sMA_NUM + "_NM");
				this.addChild("this.itemMa" + sMA_NUM + "Cd", objBindItem); 
				objBindItem.bind();

			//Number(천단위)
			} else if (sItemGu == "0040") {
				//Edit Code - 생성
				maeCd = new MaskEdit("mae_De" + sMA_NUM + "Cd", 96, iCompTop+3, null, 24, 3, null);
	
				//필수입력일때 - CSS변경
				if (sMaYn == "1") {
					maeCd.set_cssclass("essential");	
				}
				
				//Mask 설정
				maeCd.set_format("###,###,###,##0");
				maeCd.set_type("number");
				this.div_DetailInput.form.div_detailRight.form.div_Item.addChild(maeCd.name, maeCd);		
				maeCd.show();		
				
				//바인딩설정
				objBindItem = new BindItem();
				objBindItem.init("this.itemMa" + sMA_NUM + "Cd", "div_DetailInput.form.div_detailRight.form.div_Item.form." + "mae_De" + sMA_NUM + "Cd", "value", "ds_CmMaInfo", "DE" + sMA_NUM + "_NM");
				this.addChild("this.itemMa" + sMA_NUM + "Cd", objBindItem); 
				objBindItem.bind();				

			//Number(소숫점2자리)
			} else if (sItemGu == "0050") {
				//Edit Code - 생성
				
				//trace("Number(소숫점2자리) = " + sMaCd);
				maeCd = new MaskEdit("mae_De0" + iLoop + "Cd", 96, iCompTop+3, null, 24, 3, null);
	
				//필수입력일때 - CSS변경
				if (sMaYn == "1") {
					maeCd.set_cssclass("essential");	
				}
				
				//Mask 설정
				maeCd.set_format("###,###,###,##0.##");
				maeCd.set_type("number");
				maeCd.set_limitbymask("both");
				this.div_DetailInput.form.div_detailRight.form.div_Item.addChild(maeCd.name, maeCd);		
				maeCd.show();		
				
				
				maeCd.MaCd = sMaCd; //관리항목코드
				maeCd.ReprYn = sReprYn;//대표관리항목
				maeCd.DecrGu = sDecrGu;   //차대구분
				maeCd.AcchDecrGu = sAcchDecrGu;  //전표등록의 차대구분
				
				maeCd.addEventHandler("onchanged", this.fn_ComMaEditChangedEvent, this);//Edit 변경이벤트
				//trace("Number 4342=====1 maeCd = " + maeCd);
				maeCd.show();
				
				
				//바인딩설정
				objBindItem = new BindItem();
				objBindItem.init("this.itemMa" + sMA_NUM + "Cd", "div_DetailInput.form.div_detailRight.form.div_Item.form." + "mae_De" + sMA_NUM + "Cd", "value", "ds_CmMaInfo", "DE0" + iLoop + "_NM");
				this.addChild("this.itemMa" + sMA_NUM + "Cd", objBindItem); 
				objBindItem.bind();

			//Number(소숫점4자리)
			} else if (sItemGu == "0055") {
				
				//trace("Number(소숫점4자리 = " + sMaCd);
				//Edit Code - 생성
				maeCd = new MaskEdit("mae_De" + sMA_NUM + "Cd", 96, iCompTop+3, null, 24, 3, null);
	
				//필수입력일때 - CSS변경
				if (sMaYn == "1") {
					maeCd.set_cssclass("essential");	
				}
				
				//Mask 설정
				maeCd.set_format("###,###,###,##0.####");
				maeCd.set_type("number");
				maeCd.set_limitbymask("both");
				this.div_DetailInput.form.div_detailRight.form.div_Item.addChild(maeCd.name, maeCd);		
				maeCd.show();			
				
				
				
				maeCd.MaCd = sMaCd; //관리항목코드
				maeCd.ReprYn = sReprYn;//대표관리항목
				maeCd.DecrGu = sDecrGu;   //차대구분
				maeCd.AcchDecrGu = sAcchDecrGu;  //전표등록의 차대구분
				//trace("Number 소숫점4자리  4377=====1");
				maeCd.addEventHandler("onchanged", this.fn_ComMaEditChangedEvent, this);//Edit 변경이벤트
				maeCd.show();
				
				
				//바인딩설정
				objBindItem = new BindItem();
				objBindItem.init("this.itemMa" + sMA_NUM + "Cd", "div_DetailInput.form.div_detailRight.form.div_Item.form." + "mae_De" + sMA_NUM + "Cd", "value", "ds_CmMaInfo", "DE" + sMA_NUM + "_NM");
				this.addChild("this.itemMa" + sMA_NUM + "Cd", objBindItem); 
				objBindItem.bind();

			//DATE(YYYY/MM/DD)	
			} else if (sItemGu == "0060") {
				//Edit Code - 생성
				calCd = new Calendar("cal_De" + sMA_NUM + "Cd", 96, iCompTop+3, 113, 24, null, null);
	
				//필수입력일때 - CSS변경
				if (sMaYn == "1") {
					calCd.set_cssclass("essential");	
				}
				calCd.set_dateformat("yyyy-MM-dd");
				this.div_DetailInput.form.div_detailRight.form.div_Item.addChild(calCd.name, calCd);		
				calCd.show();			
				
				//바인딩설정
				objBindItem = new BindItem();
				objBindItem.init("this.itemMa" + sMA_NUM + "Cd", "div_DetailInput.form.div_detailRight.form.div_Item.form." + "cal_De" + sMA_NUM + "Cd", "value", "ds_CmMaInfo", "DE" + sMA_NUM + "_NM");
				this.addChild("this.itemMa" + sMA_NUM + "Cd", objBindItem); 
				objBindItem.bind();				

			//DATE(YYYY/MM/DD) ~ DATE(YYYY/MM/DD)
			} else if (sItemGu == "0065") {
			
				//Edit Code - 생성
				calCd = new Calendar("cal_De" + sMA_NUM + "Cd", 96, iCompTop+3, 113, 24, null, null);
				calText = new Static("sta_Ca" + sMA_NUM, 213, iCompTop , 22, 30, null, null);
				calNm = new Calendar("cal_De" + sMA_NUM + "Nm", 238, iCompTop+3, 113, 24, null, null);
	
				//필수입력일때 - CSS변경
				if (sMaYn == "1") {
					calCd.set_cssclass("essential");	
					calNm.set_cssclass("essential");	
				}
				calCd.set_dateformat("yyyy-MM-dd");
				this.div_DetailInput.form.div_detailRight.form.div_Item.addChild(calCd.name, calCd);		
				calCd.show();			


				calText.set_cssclass("sta_WF_DLabel");		
				calText.set_text("~");//~
				this.div_DetailInput.form.div_detailRight.form.div_Item.addChild(calText.name, calText);
				calText.show();
				
				
				calNm.set_dateformat("yyyy-MM-dd");
				this.div_DetailInput.form.div_detailRight.form.div_Item.addChild(calNm.name, calNm);		
				calNm.show();			

				//바인딩설정
				objBindItem = new BindItem();
				objBindItem.init("this.itemMa" + sMA_NUM + "Cd", "div_DetailInput.form.div_detailRight.form.div_Item.form." + "cal_De" + sMA_NUM + "Cd", "value", "ds_CmMaInfo", "DE" + sMA_NUM + "_CD");
				this.addChild("this.itemMa" + sMA_NUM + "Cd", objBindItem); 
				objBindItem.bind();	
				
				objBindItem = new BindItem();
				objBindItem.init("this.itemMa" + sMA_NUM + "Nm", "div_DetailInput.form.div_detailRight.form.div_Item.form." + "cal_De" + sMA_NUM + "Nm", "value", "ds_CmMaInfo", "DE" + sMA_NUM + "_NM");
				this.addChild("this.itemMa" + sMA_NUM + "Nm", objBindItem); 
				objBindItem.bind();	

			 //DATE(YYYY/MM)   
			 } else if (sItemGu == "0070") {
				//Edit Code - 생성
				calCd = new Calendar("cal_De" + sMA_NUM + "Cd", 96, iCompTop+3, 113, 24, null, null);
	
				//필수입력일때 - CSS변경
				if (sMaYn == "1") {
					calCd.set_cssclass("essential");	
				}
				
				calCd.set_dateformat("yyyy-MM");
				calCd.set_editformat("yyyy-MM");
				calCd.Id = "cal_De" + sMA_NUM + "Cd";
				calCd.popuptype = "none";
				calCd.addEventHandler("ondropdown", this.cal_ondropdown , this, this);
				this.div_DetailInput.form.div_detailRight.form.div_Item.addChild(calCd.name, calCd);		
				calCd.show();			
				
				//바인딩설정
				objBindItem = new BindItem();
				objBindItem.init("this.itemMa" + sMA_NUM + "Cd", "div_DetailInput.form.div_detailRight.form.div_Item.form." + "cal_De" + sMA_NUM + "Cd", "value", "ds_CmMaInfo", "DE" + sMA_NUM + "_NM");
				this.addChild("this.itemMa" + sMA_NUM + "Cd", objBindItem); 
				objBindItem.bind();				


				//콤보입력
			} else if (sItemGu == "0090") {
				//콤보관련 데이터셋 생성
				this.fn_MakeMaDataSet(sGRCM_CD);
				
				//Edit Code - 생성
				cboCd = new Combo("cbo_De" + sMA_NUM + "Cd", 96, iCompTop+3, null, 24, 3, null);

				//필수입력일때 - CSS변경
				if (sMaYn == "1") {
					cboCd.set_cssclass("essential");	
				}
				
				//콤보 설정
				cboCd.set_codecolumn("CODM_CD");
				cboCd.set_datacolumn("CODM_NM");
				cboCd.set_innerdataset("ds_ComMa" + sGRCM_CD);
				cboCd.CD_NM = "DE" + sMA_NUM + "_NM";//[콤보]관리항목-코드명컬럼명
				cboCd.VCD_CD = "VDE" + sMA_NUM + "_CD";//[콤보]관리항목-코드명컬럼명

				this.div_DetailInput.form.div_detailRight.form.div_Item.addChild(cboCd.name, cboCd);	
				
				cboCd.addEventHandler("onitemchanged", this.fn_ComMaComboChangedEvent, this);//[콤보] 변경이벤트
				cboCd.show();
				
				

				
				
				//바인딩설정
				objBindItem = new BindItem();
				objBindItem.init("this.itemMa" +sMA_NUM + "Cd", "div_DetailInput.form.div_detailRight.form.div_Item.form." + "cbo_De" + sMA_NUM + "Cd", "value", "ds_CmMaInfo", "DE" + sMA_NUM + "_CD");
				this.addChild("this.itemMa" + sMA_NUM + "Cd", objBindItem); 
				objBindItem.bind();						

				}
			
			iCompTop = iCompTop + 29;		
		}
		
		//ds_Detail10 데이터를 관리항목 데이터셋에 복사
		var iPos = this.ds_Detail10.rowposition;
		
		var fromDd;
		var toDd;
		for (var iLoop=1; iLoop < 9; iLoop++) {
			
			if(this.ds_Detail10.getColumn(iPos, "MA0" + iLoop + "_CD") == "f"){
				//기간인경우 DEXX_NM을 '-' 잘라서 넣는다.
				
				if(!this.gfn_IsNull(this.ds_Detail10.getColumn(iPos, "DE0" + iLoop + "_NM"))){
					fromDd = this.ds_Detail10.getColumn(iPos, "DE0" + iLoop + "_NM").substring(0,8);
					this.ds_CmMaInfo.setColumn(0, "DE0" + iLoop + "_CD", fromDd);
					//this.ds_CmMaInfo.setColumn(0, "VDE0" + iLoop + "_CD", fromDd);
				}
				
				if(!this.gfn_IsNull(this.ds_Detail10.getColumn(iPos, "DE0" + iLoop + "_NM"))){
					toDd   = this.ds_Detail10.getColumn(iPos, "DE0" + iLoop + "_NM").substring(9,17);
					this.ds_CmMaInfo.setColumn(0, "DE0" + iLoop + "_NM", toDd);
					//this.ds_CmMaInfo.setColumn(0, "VDE0" + iLoop + "_NM", toDd);
				}
	
			} else if(this.ds_Detail10.getColumn(iPos, "MA0" + iLoop + "_CD") == "q"){
				//관리년월은 6자리만 입력한다.
				
				if(!this.gfn_IsNull(this.ds_Detail10.getColumn(iPos, "DE0" + iLoop + "_NM"))){
					fromDd = this.ds_Detail10.getColumn(iPos, "DE0" + iLoop + "_NM");
					this.ds_CmMaInfo.setColumn(0, "DE0" + iLoop + "_NM", fromDd);
					//this.ds_CmMaInfo.setColumn(0, "VDE0" + iLoop + "_CD", fromDd);
				}
				
	
			}else{
			
				  
			
				this.ds_CmMaInfo.setColumn(0, "DE0" + iLoop + "_CD", this.ds_Detail10.getColumn(iPos, "DE0" + iLoop + "_CD"));
				this.ds_CmMaInfo.setColumn(0, "VDE0" + iLoop + "_CD", this.ds_Detail10.getColumn(iPos, "VDE0" + iLoop + "_CD"));
				this.ds_CmMaInfo.setColumn(0, "DE0" + iLoop + "_NM", this.ds_Detail10.getColumn(iPos, "DE0" + iLoop + "_NM"));
				//this.ds_CmMaInfo.setColumn(0, "VDE0" + iLoop + "_NM", this.ds_Detail10.getColumn(iPos, "VDE0" + iLoop + "_NM"));
			}
		
		}
	}else{
	
	
		this.div_DetailInput.form.div_detailRight.form.div_Item.set_height(60);
		this.div_DetailInput.form.div_detailRight.form.div_Budget.set_top("div_Item:0");
	}
	
}
 
/***********************************************************************************************
 * 15.10 [fn_GetMakeMaData ] 관리항목 컴포넌트 정보찾기
 ***********************************************************************************************/ 
this.fn_GetMakeMaData = function(iRow, sCol) {

	trace("fn_GetMakeMaData  === ");
	var rtnValue = "";
	if (this.ds_AcomMa.getRowCount() > 0) {
		if (iRow <= this.ds_AcomMa.getRowCount()) {
			rtnValue = this.ds_AcomMa.getColumn(iRow-1, sCol);
		}
	}
	
	return rtnValue;
}

/***********************************************************************************************
 * 15.11 [fn_MakeMaDataSet ] 관리항목 컴포넌트 데이터셋 생성 및 데이터조회
 ***********************************************************************************************/ 
this.fn_MakeMaDataSet = function(sGRCM_CD) {
	
	var dsCodm = "ds_ComMa" + sGRCM_CD;
	
	//관리항목 관련 데이터셋 정보가 없으면 - 생성
	if (this.gfn_IsNull(this.objects[dsCodm])) {
		var dsObj = new Dataset;
		dsObj.set_name(dsCodm);//데이터셋명 설정
		this.addChild(dsObj.name, dsObj);//해당 화면에 데이터셋 등록
		
		//컬럼정보 생성
		dsObj.addColumn("CODM_CD", "string");
		dsObj.addColumn("CODM_NM", "string");
	} else {
		eval("this." + dsCodm).clearData();
	}
	
	//[공통] 공통코드 설정 : 공통코드|데이터셋명|초기항목추가여부(Y/N)|추가항목
	var objCondList = [sGRCM_CD + "|" + dsCodm];
	//공통코드 설정함수 호출				   
	this.gfn_GetCommCode(this, objCondList, "");	
	
}

/***********************************************************************************************
 * 15.12 [fn_ComMaPopupBtnEvent ] 관리항목 팝업관련 이벤트
 ***********************************************************************************************/ 
this.fn_ComMaPopupBtnEvent = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{ 


	//trace("===============fn_ComMaPopupBtnEvent============");
	//관리항목 순번정보가 있으면
	if (!this.gfn_IsNull(obj.MaSeq)) {		
		
		var sMaSeq = obj.MaSeq;//관리항목-순번
		var sDETA_CD = obj.DETA_CD;//관리항목-팝업함수
		var sColCd = obj.ColCd;//관리항목-코드컬럼
		var sVColCd = obj.VColCd;//VIEW 관리항목-코드컬럼
		var sColNm = obj.ColNm;//관리항목-코드명컬럼
		var sCodmCd = obj.GrcmCd;  // 공통코드
		var sPopuCd = obj.PopuCd;  // 팝업사용구분(FA033) 양쪽사용(0010), 차변만(0020), 대변만(0030)
		var sAcomCd = obj.AcomCd;  // 계정코드
		var sAcomGu = obj.AcomGu;  // 계정구분
		var sDecrGu = obj.DecrGu;  //  차대구분
		
		var sColCdValue ="" ; // 관리항목 코드 데이타
		var sColNmValue = "" ; // 관리항목 명 데이타
		
		var sAcchDecrGu = this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "DECR_GU");  // 차대구분
		
		
		
		//관리항목 순번
		if (sMaSeq == "01") {
			this.fvCmMaPopupId01 = "MA01_" + sDETA_CD;//팝업ID
			this.fvCmMaRtnColCd01 = sColCd;
			this.fvCmMaRtnColNm01 = sColNm;
			sColCdValue = this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_VDe01Cd.value;
			sColNmValue = this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De01Nm.value;
		} else if (sMaSeq == "02") {
			//trace("sDETA_CD = " + sDETA_CD+ "-======= sMaSeq=" + sMaSeq);
			this.fvCmMaPopupId02 = "MA02_" + sDETA_CD;//팝업ID
			this.fvCmMaRtnColCd02 = sColCd;
			this.fvCmMaRtnColNm02 = sColNm;
			sColCdValue = this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_VDe02Cd.value;
			sColNmValue = this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De02Nm.value;
		} else if (sMaSeq == "03") {
			this.fvCmMaPopupId03 = "MA03_" + sDETA_CD;//팝업ID
			this.fvCmMaRtnColCd03 = sColCd;
			this.fvCmMaRtnColNm03 = sColNm;
			sColCdValue = this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_VDe03Cd.value;
			sColNmValue = this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De03Nm.value;
		} else if (sMaSeq == "04") {
			this.fvCmMaPopupId04 = "MA04_" + sDETA_CD;//팝업ID
			this.fvCmMaRtnColCd04 = sColCd;
			this.fvCmMaRtnColNm04 = sColNm;
			sColCdValue = this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_VDe04Cd.value;
			sColNmValue = this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De04Nm.value;
		} else if (sMaSeq == "05") {
			this.fvCmMaPopupId05 = "MA05_" + sDETA_CD;//팝업ID
			this.fvCmMaRtnColCd05 = sColCd;
			this.fvCmMaRtnColNm05 = sColNm;
			sColCdValue = this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_VDe05Cd.value;
			sColNmValue = this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De05Nm.value;
		} else if (sMaSeq == "06") {
			this.fvCmMaPopupId06 = "MA06_" + sDETA_CD;//팝업ID
			this.fvCmMaRtnColCd06 = sColCd;
			this.fvCmMaRtnColNm06 = sColNm;
			sColCdValue = this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_VDe06Cd.value;
			sColNmValue = this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De06Nm.value;
		} else if (sMaSeq == "07") {
			this.fvCmMaPopupId07 = "MA07_" + sDETA_CD;//팝업ID
			this.fvCmMaRtnColCd07 = sColCd;
			this.fvCmMaRtnColNm07 = sColNm;
			sColCdValue = this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_VDe07Cd.value;
			sColNmValue = this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De07Nm.value;
		} else if (sMaSeq == "08") {
			this.fvCmMaPopupId08 = "MA08_" + sDETA_CD;//팝업ID
			this.fvCmMaRtnColCd08 = sColCd;
			this.fvCmMaRtnColNm08 = sColNm;		
			sColCdValue = this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_VDe08Cd.value;
			sColNmValue = this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De08Nm.value;	
		}
		
		//trace("sColCdValue = " + sColCdValue+ " sColNmValue = "+sColNmValue);
		//var sPopuCd = obj.PopuCd; //팝업사용구분(FA033) 양쪽사용(0010), 차변만(0020), 대변만(0030)
		var sPopupId = "MA" + sMaSeq + "_" + sDETA_CD;//팝업ID
		
		//trace("sDETA_CD =" + sDETA_CD+"==");
		//팝업함수명-계약번호
		if (sDETA_CD == "gfn_ContPop") {
			var oArg = { CnthNo:sColCdValue, PrgmId:this.fvComPrgmId};//Argument처리
			this.gfn_ContPop(sPopupId, oArg, "fn_ComMaPopupCallback");	
		//팝업함수명-거래처
		} else if (sDETA_CD == "gfn_CusmPop") {
			var oArg = { CusmNm:sColNmValue};//Argument처리
			this.gfn_CusmPop(sPopupId, oArg, "fn_ComMaPopupCallback");	
		//팝업함수명-사원
		} else if (sDETA_CD == "gfn_UserPop") {
			var oArg = { EmpmNm:sColNmValue};//Argument처리
			this.gfn_UserPop(sPopupId, oArg, "fn_ComMaPopupCallback");	
		//팝업함수명-부서
		} else if (sDETA_CD == "gfn_DeptPop") {
			//var oArg = { DepmNm:this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De01Nm.value};//Argument처리
			var oArg = { DepmNm:sColNmValue};//Argument처리
			this.gfn_DeptPop(sPopupId, oArg, "fn_ComMaPopupCallback");		
		//팝업함수명-은행
		} else if (sDETA_CD == "gfn_BanmPop") {
			var oArg = { BanmNm:sColCdValue};//Argument처리
			this.gfn_BanmPop(sPopupId, oArg, "fn_ComMaPopupCallback");			
		//팝업함수명-품목코드
		} else if (sDETA_CD == "gfn_ItemPop") {
			var oArg = { ItemCd:sColCdValue};//Argument처리
			this.gfn_ItemPop(sPopupId, oArg, "fn_ComMaPopupCallback");					
		//팝업함수명-공통코드
		} else if (sDETA_CD == "gfn_CodmPop") {
			var oArg = { GrcmCd:sCodmCd, CodmCd:sColCdValue};//Argument처리
			this.gfn_CodmPop(sPopupId, oArg, "fn_ComMaPopupCallback");					
		//팝업함수명-사업장
		} else if (sDETA_CD == "gfn_SaumPop") {
			var oArg = { SaumNm:sColCdValue};//Argument처리
			this.gfn_SaumPop(sPopupId, oArg, "fn_ComMaPopupCallback");					
		} else if (sDETA_CD == "gfn_DebmPop") {				
		//팝업함수명-차입금
			var oArg = { DebmNm:sColCdValue};//Argument처리
			this.gfn_DebmPop(sPopupId, oArg, "fn_ComMaPopupCallback");					
		} else if (sDETA_CD == "gfn_BilmPop") {				
		//팝업함수명-어음
			var oArg = { BilmNo:sColCdValue , BilmGu:sAcomGu};//Argument처리
			this.gfn_BilmPop(sPopupId, oArg, "fn_ComMaPopupCallback");					
		} else if (sDETA_CD == "gfn_BilpPop") {				
		//팝업함수명-지급어음
			var oArg = { BilmNo:sColCdValue};//Argument처리
			this.gfn_BilpPop(sPopupId, oArg, "fn_ComMaPopupCallback");					
		} else if (sDETA_CD == "gfn_BilrPop") {				
		//팝업함수명-받을어음
			//var oArg = { ItemCd:this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De01Cd.value};//Argument처리
			//trace("sCodmCd = "+sCodmCd)
			var oArg = { BilmNo:sColCdValue};//Argument처리
			this.gfn_BilrPop(sPopupId, oArg, "fn_ComMaPopupCallback");					
		} else if (sDETA_CD == "gfn_AcnmPop") {				
		//팝업함수명-계좌번호
			var oArg = { AcnmNo:sColCdValue, AcomCd:sAcomCd};//Argument처리
			this.gfn_AcnmPop(sPopupId, oArg, "fn_ComMaPopupCallback");					
		} else if (sDETA_CD == "gfn_LoamPop") {				
		//팝업함수명-대여금
			var oArg = { LoamNm:sColCdValue};//Argument처리
			this.gfn_LoamPop(sPopupId, oArg, "fn_ComMaPopupCallback");					
		} else if (sDETA_CD == "gfn_CremPop") {				
		//팝업함수명-법인카드번호
			var oArg = { CremNo:sColCdValue};//Argument처리
			this.gfn_CremPop(sPopupId, oArg, "fn_ComMaPopupCallback");					
		} else if (sDETA_CD == "gfn_SecmPop") {				
		//팝업함수명-유가증권번호
			var oArg = { SecmNm:sColCdValue};//Argument처리
			this.gfn_SecmPop(sPopupId, oArg, "fn_ComMaPopupCallback");					
		} else if (sDETA_CD == "gfn_FiamPop") {				
		//팝업함수명-고정자산번호
			var oArg = { FiamNm:sColCdValue};//Argument처리
			this.gfn_FiamPop(sPopupId, oArg, "fn_ComMaPopupCallback");					
		} else if (sDETA_CD == "gfn_SerhPop") {				
		//팝업함수명-CS접수번호
			var oArg = { SerhNo:sColCdValue};//Argument처리
			this.gfn_SerhPop(sPopupId, oArg, "fn_ComMaPopupCallback");				
		} else if (sDETA_CD == "gfn_CbahPop") {				
		//팝업함수명-거래처계좌번호
			var oArg = { CusmNm:sColCdValue};//Argument처리
			this.gfn_CbahPop(sPopupId, oArg, "fn_ComMaPopupCallback");			
		} else if (sDETA_CD == "gfn_RpjhPop") {				
		//팝업함수명-연구개발코드
			var oArg = { RpjhNo:sColCdValue, PrgmId:this.fvComPrgmId};//Argument처리
			//trace("sPopupId = " + sPopupId);
			this.gfn_RpjhPop(sPopupId, oArg, "fn_ComMaPopupCallback");					
		} else if (sDETA_CD == "gfn_VatmPop") {				
		//팝업함수명-부가세코드

			var sVatmGu="";
			if(sAcomGu == "0010" && sDecrGu=="D"){
				//부가가치대급금
				sVatmGu = "0";  // 매입
			}else{
				sVatmGu = "1"; // 매출
			}
			
			var oArg = {VatmGu:sVatmGu, VatmNm:sColCdValue};//Argument처리
			this.gfn_VatmPop(sPopupId, oArg, "fn_ComMaPopupCallback");					
		}
		
	}
}   

/***********************************************************************************************
 * 15.13 [fn_ComMaPopupCallback ] 관리항목 팝업관련 콜백함수
 ***********************************************************************************************/ 
this.fn_ComMaPopupCallback = function(strId, rtnValue)
{
	// pop창 콜백 id
	
	
	
	
	trace("fn_ComMaPopupCallback start 1 ==== " + strId);
	trace("fn_ComMaPopupCallback start 2 ==== " + this.fvCmMaPopupId01);
	trace("fn_ComMaPopupCallback start 3 ==== " + rtnValue);
	
	
	if (strId == this.fvCmMaPopupId01) {
		if (!this.gfn_IsNull(rtnValue)) { 
			var arrRtnVal = eval(rtnValue);
			//trace("fn_ComMaPopupCallback start 2= " + strId);
			
			//거래처 사업자번호 없으면 거래처코드로 변경
			if (strId.substring(5, strId.length)=="gfn_CusmPop"){
				if(this.gfn_IsNull(eval("arrRtnVal." + this.fvCmMaRtnColCd01))){
					this.fvCmMaRtnColCd01 = "CUSM_CD";
				}
			}
			
			
			if (!this.gfn_IsNull(eval("arrRtnVal." + this.fvCmMaRtnColCd01))) {
				//trace("fn_ComMaPopupCallback start 3= " + strId);
				this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_VDe01Cd.set_value(eval("arrRtnVal." + this.fvCmMaRtnColCd01));
				if (strId.substring(5, strId.length)=="gfn_UserPop"){
					//trace("fn_ComMaPopupCallback start 4= " + strId);
					this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De01Cd.set_value(eval("arrRtnVal." + "SYST_ID"));
				}else{
					//trace("fn_ComMaPopupCallback start 5= " + strId);
					//trace("this.fvCmMaRtnColCd01= " + this.fvCmMaRtnColCd01);
					this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De01Cd.set_value(eval("arrRtnVal." + this.fvCmMaRtnColCd01));
				}
				//trace("fn_ComMaPopupCallback start 6= " + strId);
				this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De01Nm.set_value(eval("arrRtnVal." + this.fvCmMaRtnColNm01));
			}
		}	
	} else if (strId == this.fvCmMaPopupId02) {
		//trace("strId = " + strId + "  arrRtnVal. = " + this.fvCmMaRtnColCd02);
		
		
		
		if (!this.gfn_IsNull(rtnValue)) {
			var arrRtnVal = eval(rtnValue);
			
			//trace("strId = " + strId + " arrRtnVal. = " + this.fvCmMaRtnColCd02);
			//trace("strId = " + strId + " arrRtnVal. = " + this.fvCmMaRtnColNm02);
			
			//거래처 사업자번호 없으면 거래처코드로 변경
			if (strId.substring(5, strId.length)=="gfn_CusmPop"){
				if(this.gfn_IsNull(eval("arrRtnVal." + this.fvCmMaRtnColCd02))){
					this.fvCmMaRtnColCd02 = "CUSM_CD";
				}
			}
			
			
			if (!this.gfn_IsNull(eval("arrRtnVal." + this.fvCmMaRtnColCd02))) {
				this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_VDe02Cd.set_value(eval("arrRtnVal." + this.fvCmMaRtnColCd02));
				
				if (strId.substring(5, strId.length)=="gfn_UserPop"){
					this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De02Cd.set_value(eval("arrRtnVal." + "SYST_ID"));
				}else{
					this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De02Cd.set_value(eval("arrRtnVal." + this.fvCmMaRtnColCd02));
				}
				
				this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De02Nm.set_value(eval("arrRtnVal." + this.fvCmMaRtnColNm02));
			}
		}	
	} else if (strId == this.fvCmMaPopupId03) {
		if (!this.gfn_IsNull(rtnValue)) {
			var arrRtnVal = eval(rtnValue);
			
			//거래처 사업자번호 없으면 거래처코드로 변경
			if (strId.substring(5, strId.length)=="gfn_CusmPop"){
				if(this.gfn_IsNull(eval("arrRtnVal." + this.fvCmMaRtnColCd03))){
					this.fvCmMaRtnColCd03 = "CUSM_CD";
				}
			}
			
			
			
			if (!this.gfn_IsNull(eval("arrRtnVal." + this.fvCmMaRtnColCd03))) {
				this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_VDe03Cd.set_value(eval("arrRtnVal." + this.fvCmMaRtnColCd03));
				
				if (strId.substring(5, strId.length)=="gfn_UserPop"){
					this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De03Cd.set_value(eval("arrRtnVal." + "SYST_ID"));
				}else{
					this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De03Cd.set_value(eval("arrRtnVal." + this.fvCmMaRtnColCd03));
				}
				this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De03Nm.set_value(eval("arrRtnVal." + this.fvCmMaRtnColNm03));
			}
		}
	} else if (strId == this.fvCmMaPopupId04) {
		if (!this.gfn_IsNull(rtnValue)) {
			var arrRtnVal = eval(rtnValue);
			
			//거래처 사업자번호 없으면 거래처코드로 변경
			if (strId.substring(5, strId.length)=="gfn_CusmPop"){
				if(this.gfn_IsNull(eval("arrRtnVal." + this.fvCmMaRtnColCd04))){
					this.fvCmMaRtnColCd04 = "CUSM_CD";
				}
			}
			//trace("strId = " + strId + " arrRtnVal. = " + this.fvCmMaRtnColCd04);
			//trace("strId = " + strId + " arrRtnVal. = " + this.fvCmMaRtnColNm04);
			
			if (!this.gfn_IsNull(eval("arrRtnVal." + this.fvCmMaRtnColCd04))) {
				//trace("strId = " + strId + " arrRtnVal. = " + eval("arrRtnVal." + this.fvCmMaRtnColCd04));
				//trace("strId = " + strId + " arrRtnVal. = " + eval("arrRtnVal." + this.fvCmMaRtnColNm04));
				this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_VDe04Cd.set_value(eval("arrRtnVal." + this.fvCmMaRtnColCd04));
				
				//trace("this.fvCmMaRtnColCd04 = " + strId.substring(5, strId.length));
				if (strId.substring(5, strId.length)=="gfn_UserPop"){
					this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De04Cd.set_value(eval("arrRtnVal." + "SYST_ID"));
				}else{
					this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De04Cd.set_value(eval("arrRtnVal." + this.fvCmMaRtnColCd04));
				}
				this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De04Nm.set_value(eval("arrRtnVal." + this.fvCmMaRtnColNm04));
			}
		}		
	} else if (strId == this.fvCmMaPopupId05) {
		
		if (!this.gfn_IsNull(rtnValue)) {
			var arrRtnVal = eval(rtnValue);
			
			
			//거래처 사업자번호 없으면 거래처코드로 변경
			if (strId.substring(5, strId.length)=="gfn_CusmPop"){
				if(this.gfn_IsNull(eval("arrRtnVal." + this.fvCmMaRtnColCd05))){
					this.fvCmMaRtnColCd05 = "CUSM_CD";
				}
			}
			
			
			if (!this.gfn_IsNull(eval("arrRtnVal." + this.fvCmMaRtnColCd05))) {
				//trace("strId = " + strId + " arrRtnVal. = " + eval("arrRtnVal." + this.fvCmMaRtnColCd05));
				//trace("strId = " + strId + " arrRtnVal. = " + eval("arrRtnVal." + this.fvCmMaRtnColNm05));
				
				this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_VDe05Cd.set_value(eval("arrRtnVal." + this.fvCmMaRtnColCd05));
				
				if (strId.substring(5, strId.length)=="gfn_UserPop"){
					this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De05Cd.set_value(eval("arrRtnVal." + "SYST_ID"));
				}else{
					this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De05Cd.set_value(eval("arrRtnVal." + this.fvCmMaRtnColCd05));
				}
				
				this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De05Nm.set_value(eval("arrRtnVal." + this.fvCmMaRtnColNm05));
			}
		}
	} else if (strId == this.fvCmMaPopupId06) {
		if (!this.gfn_IsNull(rtnValue)) {
			var arrRtnVal = eval(rtnValue);
			
			
			//거래처 사업자번호 없으면 거래처코드로 변경
			if (strId.substring(5, strId.length)=="gfn_CusmPop"){
				if(this.gfn_IsNull(eval("arrRtnVal." + this.fvCmMaRtnColCd06))){
					this.fvCmMaRtnColCd06 = "CUSM_CD";
				}
			}
			
			
			if (!this.gfn_IsNull(eval("arrRtnVal." + this.fvCmMaRtnColCd06))) {
				//trace("strId = " + strId + " arrRtnVal. = " + eval("arrRtnVal." + this.fvCmMaRtnColCd06));
				//trace("strId = " + strId + " arrRtnVal. = " + eval("arrRtnVal." + this.fvCmMaRtnColNm06));
				this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_VDe06Cd.set_value(eval("arrRtnVal." + this.fvCmMaRtnColCd06));
				
				
				if (strId.substring(5, strId.length)=="gfn_UserPop"){
					this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De06Cd.set_value(eval("arrRtnVal." + "SYST_ID"));
				}else{
					this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De06Cd.set_value(eval("arrRtnVal." + this.fvCmMaRtnColCd06));
				}
				
				this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De06Nm.set_value(eval("arrRtnVal." + this.fvCmMaRtnColNm06));
			}
		}
	} else if (strId == this.fvCmMaPopupId07) {
		if (!this.gfn_IsNull(rtnValue)) {
			var arrRtnVal = eval(rtnValue);
			
			//거래처 사업자번호 없으면 거래처코드로 변경
			if (strId.substring(5, strId.length)=="gfn_CusmPop"){
				if(this.gfn_IsNull(eval("arrRtnVal." + this.fvCmMaRtnColCd07))){
					this.fvCmMaRtnColCd07 = "CUSM_CD";
				}
			}
			
			
			if (!this.gfn_IsNull(eval("arrRtnVal." + this.fvCmMaRtnColCd07))) {
				this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_VDe07Cd.set_value(eval("arrRtnVal." + this.fvCmMaRtnColCd07));
				
				if (strId.substring(5, strId.length)=="gfn_UserPop"){
					this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De07Cd.set_value(eval("arrRtnVal." + "SYST_ID"));
				}else{
					this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De07Cd.set_value(eval("arrRtnVal." + this.fvCmMaRtnColCd07));
				}
				this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De07Nm.set_value(eval("arrRtnVal." + this.fvCmMaRtnColNm07));
			}
		}
	} else if (strId == this.fvCmMaPopupId08) {
		if (!this.gfn_IsNull(rtnValue)) {
			var arrRtnVal = eval(rtnValue);
			
			//거래처 사업자번호 없으면 거래처코드로 변경
			if (strId.substring(5, strId.length)=="gfn_CusmPop"){
				if(this.gfn_IsNull(eval("arrRtnVal." + this.fvCmMaRtnColCd08))){
					this.fvCmMaRtnColCd08 = "CUSM_CD";
				}
			}
			
			
			if (!this.gfn_IsNull(eval("arrRtnVal." + this.fvCmMaRtnColCd08))) {
				this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_VDe08Cd.set_value(eval("arrRtnVal." + this.fvCmMaRtnColCd08));
				if (strId.substring(5, strId.length)=="gfn_UserPop"){
					this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De08Cd.set_value(eval("arrRtnVal." + "SYST_ID"));
				}else{
					this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De08Cd.set_value(eval("arrRtnVal." + this.fvCmMaRtnColCd08));
				}
				this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De08Nm.set_value(eval("arrRtnVal." + this.fvCmMaRtnColNm08));
				
			}
		}		
	}
	
	//다른정보 입력
	
	var iFvFindRow;
	var iFvFindRowMaNum;
	if(strId.substring(5, strId.length)=="gfn_BilmPop" && !this.gfn_IsNull(rtnValue)){
		//받을어음, 지급어음
		
		
		if (!this.gfn_IsNull(rtnValue)) {
		
			//1.계약번호(0)
			iFvFindRow = this.ds_AcomMa.findRowExpr("MA_CD=='0'");
			if(iFvFindRow > -1){
				iFvFindRowMaNum = this.ds_AcomMa.getColumn(iFvFindRow, "MA_NUM");
				this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_CD",  nexacro.isUpper(arrRtnVal.CNTH_NO));
				this.ds_CmMaInfo.setColumn(0, "VDE"+iFvFindRowMaNum+"_CD", nexacro.isUpper(arrRtnVal.CNTH_NO));
				this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_NM", arrRtnVal.CNTH_NM);
			}
			//2.거래처(2)
			iFvFindRow = this.ds_AcomMa.findRowExpr("MA_CD=='2'");
			if(iFvFindRow > -1){
				iFvFindRowMaNum = this.ds_AcomMa.getColumn(iFvFindRow, "MA_NUM"); 
				this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_CD", arrRtnVal.CUSM_CD);
				this.ds_CmMaInfo.setColumn(0, "VDE"+iFvFindRowMaNum+"_CD", arrRtnVal.CUSM_CD);
				this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_NM", arrRtnVal.CUSM_NM);
			}
			//3. 발행일자(T)
			iFvFindRow = this.ds_AcomMa.findRowExpr("MA_CD=='T'");
			if(iFvFindRow > -1){
				iFvFindRowMaNum = this.ds_AcomMa.getColumn(iFvFindRow, "MA_NUM"); 
				this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_NM", arrRtnVal.FROM_DD);
			}
			//4. 만기일자(U)
			iFvFindRow = this.ds_AcomMa.findRowExpr("MA_CD=='U'");
			if(iFvFindRow > -1){
				iFvFindRowMaNum = this.ds_AcomMa.getColumn(iFvFindRow, "MA_NUM"); 
				this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_NM", arrRtnVal.EXPI_DD);
			}
			//5. 은행(지점)(8)
			iFvFindRow = this.ds_AcomMa.findRowExpr("MA_CD=='8'");
			if(iFvFindRow > -1){
				iFvFindRowMaNum = this.ds_AcomMa.getColumn(iFvFindRow, "MA_NUM"); 
				this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_CD", arrRtnVal.ISBK_CD);
				this.ds_CmMaInfo.setColumn(0, "VDE"+iFvFindRowMaNum+"_CD", arrRtnVal.ISBK_CD);
				this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_NM", arrRtnVal.BANM_NM);
			}
			//6. 사번(3)
			iFvFindRow = this.ds_AcomMa.findRowExpr("MA_CD=='3'");
			if(iFvFindRow > -1){
				iFvFindRowMaNum = this.ds_AcomMa.getColumn(iFvFindRow, "MA_NUM"); 
				this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_CD", arrRtnVal.SYST_ID);
				this.ds_CmMaInfo.setColumn(0, "VDE"+iFvFindRowMaNum+"_CD", arrRtnVal.EMPM_CD);
				this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_NM", arrRtnVal.EMPM_NM);
			}
		}
		//6. 지출증빙서류
	}else if(strId.substring(5, strId.length)=="gfn_SerhPop"){
		//CS접수번호
		
		
	}else if(strId.substring(5, strId.length)=="gfn_ContPop"){
		//계약번호 
		
		//거래처관리항목 자동입력
		//1, 2번계정만 
		var vAcomCd = this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "ACOM_CD");
	
		
		if( vAcomCd.substring(0,1) =="1" ||vAcomCd.substring(0,1) =="2"){
		
			iFvFindRow = this.ds_AcomMa.findRowExpr("MA_CD=='2'");
			
			

			if (!this.gfn_IsNull(rtnValue)) {
				if(iFvFindRow > -1){
					iFvFindRowMaNum = this.ds_AcomMa.getColumn(iFvFindRow, "MA_NUM"); 
					this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_CD", arrRtnVal.SAUM_NO);
					this.ds_CmMaInfo.setColumn(0, "VDE"+iFvFindRowMaNum+"_CD", arrRtnVal.SAUM_NO);
					this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_NM", arrRtnVal.CUSM_NM);
				}
			}
		}
		
	}else if(strId.substring(5, strId.length)=="gfn_CbahPop"){
		//거래처계좌번호 
		
		
		//trace("gfn_CbahPop");
		
		if (!this.gfn_IsNull(rtnValue)) {
			//계좌번호 자동입력
			iFvFindRow = this.ds_AcomMa.findRowExpr("MA_CD=='A7'");
			if(iFvFindRow > -1){
				iFvFindRowMaNum = this.ds_AcomMa.getColumn(iFvFindRow, "MA_NUM"); 
				this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_CD", arrRtnVal.ACNO_GU);
				this.ds_CmMaInfo.setColumn(0, "VDE"+iFvFindRowMaNum+"_CD", arrRtnVal.ACNO_GU);
				this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_NM", arrRtnVal.ACNO_NM);
			}
			//거래처은행 자동입력
			iFvFindRow = this.ds_AcomMa.findRowExpr("MA_CD=='A8'");
			if(iFvFindRow > -1){
				iFvFindRowMaNum = this.ds_AcomMa.getColumn(iFvFindRow, "MA_NUM"); 
				this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_CD", arrRtnVal.BANM_CD);
				this.ds_CmMaInfo.setColumn(0, "VDE"+iFvFindRowMaNum+"_CD", arrRtnVal.BANM_CD);
				this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_NM", arrRtnVal.BANM_NM);
			}
			//거래처계좌번호 자동입력
			iFvFindRow = this.ds_AcomMa.findRowExpr("MA_CD=='A9'");
			if(iFvFindRow > -1){
				iFvFindRowMaNum = this.ds_AcomMa.getColumn(iFvFindRow, "MA_NUM"); 
				this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_CD", arrRtnVal.ACNM_NO);
				this.ds_CmMaInfo.setColumn(0, "VDE"+iFvFindRowMaNum+"_CD", arrRtnVal.ACNM_NO);
				this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_NM", arrRtnVal.ACEM_NM); //예금주
			}
			
			
			//거래처
			iFvFindRow = this.ds_AcomMa.findRowExpr("MA_CD=='2'");
			if(iFvFindRow > -1){
				iFvFindRowMaNum = this.ds_AcomMa.getColumn(iFvFindRow, "MA_NUM"); 
				this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_CD", arrRtnVal.SAUM_NO);
				this.ds_CmMaInfo.setColumn(0, "VDE"+iFvFindRowMaNum+"_CD", arrRtnVal.SAUM_NO);
				this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_NM", arrRtnVal.CUSM_NM); //예금주
			}
		}
	}else if(strId.substring(5, strId.length)=="gfn_CodmPop"){
		//코드popup
		
		//통화
		iFvFindRow = this.ds_AcomMa.findRowExpr("MA_CD=='X'");
		if(iFvFindRow > -1 && !this.gfn_IsNull(rtnValue)){
			//통화관리항목(SM020)
			if(arrRtnVal.GRCM_CD == "SM020"){
				//전표상에 통화에 코드값을 넣어준다.
				this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "CURR_CD", arrRtnVal.CODM_CD);
			}
		}
	}else if(strId.substring(5, strId.length)=="gfn_CusmPop"){
		

		if (!this.gfn_IsNull(rtnValue)) {
			//계좌번호 자동입력
			iFvFindRow = this.ds_AcomMa.findRowExpr("MA_CD=='A7'");
			if(iFvFindRow > -1){
				iFvFindRowMaNum = this.ds_AcomMa.getColumn(iFvFindRow, "MA_NUM"); 
				this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_CD", arrRtnVal.ACNO_GU);
				this.ds_CmMaInfo.setColumn(0, "VDE"+iFvFindRowMaNum+"_CD", arrRtnVal.ACNO_GU);
				this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_NM", arrRtnVal.ACNO_GU_NM);
			}
			//거래처은행 자동입력
			iFvFindRow = this.ds_AcomMa.findRowExpr("MA_CD=='A8'");
			if(iFvFindRow > -1){
				iFvFindRowMaNum = this.ds_AcomMa.getColumn(iFvFindRow, "MA_NUM"); 
				this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_CD", arrRtnVal.BANM_CD);
				this.ds_CmMaInfo.setColumn(0, "VDE"+iFvFindRowMaNum+"_CD", arrRtnVal.BANM_CD);
				this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_NM", arrRtnVal.BANM_NM);
			}
			//거래처계좌번호 자동입력
			iFvFindRow = this.ds_AcomMa.findRowExpr("MA_CD=='A9'");
			if(iFvFindRow > -1){
				iFvFindRowMaNum = this.ds_AcomMa.getColumn(iFvFindRow, "MA_NUM"); 
				this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_CD", arrRtnVal.ACNM_NO);
				this.ds_CmMaInfo.setColumn(0, "VDE"+iFvFindRowMaNum+"_CD", arrRtnVal.ACNM_NO);
				this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_NM", arrRtnVal.ACEM_NM); //예금주
			}
		}
		
	}
	
	
	//trace("fn_ComMaPopupCallback end");
	
}

/***********************************************************************************************
 * 15.14 [fn_FindBindItem ] 바인딩 Item 찾기 함수
 ***********************************************************************************************/ 
this.fn_FindBindItem  = function(id)
{
	var rtn;
	for(var iLoop=0; iLoop<this.binds.length ; iLoop++)
	{
		if( this.binds[iLoop].name == id ){
			rtn = true;
			return rtn;
		} else {
			rtn = false;
		}	
	}	
	return rtn;
}

/***********************************************************************************************
 * 15.15 [ds_CmMaInfo_oncolumnchanged ] 관리항목 데이터셋 데이터 변경 이벤트
 ***********************************************************************************************/ 
this.ds_CmMaInfo_oncolumnchanged = function(obj:nexacro.NormalDataset,e:nexacro.DSColChangeEventInfo)
{
	
	//trace("ds_CmMaInfo_oncolumnchanged start");


	var iRow = this.ds_Detail10.rowposition;
	var code;
	var Vcode;
	var name;
	var macd;
	

	
	if(this.ds_Detail10.getColumn(iRow, "MA" + e.columnid.substr(2, 2) + "_CD") =="f"){
		//기간인경우 상세명에 만 입력한다.
		
		macd = this.ds_Detail10.getColumn(iRow, "MA"+e.columnid.substr(2, 2)+"_CD");  //관리항목코드
		
		//trace("macd0"+ e.columnid.substr(2, 2) +" = " + macd);
		
		code = this.ds_CmMaInfo.getColumn(0, "DE"+e.columnid.substr(2, 2)+"_CD");
		//Vcode = this.ds_CmMaInfo.getColumn(0, "VDE"+e.columnid.substr(2, 2)+"_CD");
		name = this.ds_CmMaInfo.getColumn(0, "DE"+e.columnid.substr(2, 2)+"_NM");
		
	
		if(this.gfn_IsNull(code)){
			code = "";
		}else{
		
			if(this.gfn_IsNull(name)){
				name = "";
			}else{
				name = "-" + name;
				this.ds_Detail10.setColumn(iRow, "DE"+e.columnid.substr(2, 2)+"_NM", code + name);
				
				//대표관리항목 입력
// 				if(macd ==  this.ds_Detail10.getColumn(iRow, "MANA_CD") ){
// 					this.ds_Detail10.setColumn(iRow, "DETA_NM", code + name);
// 				}
				
			}
		}
	} else if(this.ds_Detail10.getColumn(iRow, "MA" + e.columnid.substr(2, 2) + "_CD") =="q") {
		//관리년월
		
		macd = this.ds_Detail10.getColumn(iRow, "MA"+e.columnid.substr(2, 2)+"_CD");  //관리항목코드
		

		name = this.ds_CmMaInfo.getColumn(0, "DE"+e.columnid.substr(2, 2)+"_NM");
		
		if(!this.gfn_IsNull(name)){
			this.ds_Detail10.setColumn(iRow, "DE"+e.columnid.substr(2, 2)+"_NM", name.substr(0,6));
			this.ds_CmMaInfo.setColumn(0, "DE"+e.columnid.substr(2, 2)+"_NM", name.substr(0,6));
		}
	
	}else{
		
		
		macd = this.ds_Detail10.getColumn(iRow, "MA"+e.columnid.substr(2, 2)+"_CD");
		code = this.ds_CmMaInfo.getColumn(0, "DE"+e.columnid.substr(2, 2)+"_CD");
		Vcode = this.ds_CmMaInfo.getColumn(0, "VDE"+e.columnid.substr(2, 2)+"_CD");
		
		if(this.ds_Detail10.getColumn(iRow, "MA" + e.columnid.substr(2, 2) + "_CD") !="3") {
			code = Vcode
		}
		
		name = this.ds_CmMaInfo.getColumn(0, "DE"+e.columnid.substr(2, 2)+"_NM");
		
		
		

		//trace("macd00"+ e.columnid.substr(2, 2) +" = " + macd);
		
		this.ds_Detail10.setColumn(iRow, e.columnid, this.ds_CmMaInfo.getColumn(0, e.columnid));
// 		if(macd ==  this.ds_Detail10.getColumn(iRow, "MANA_CD") ){
// 			this.ds_Detail10.setColumn(iRow, "DETA_CD", code);
// 			this.ds_Detail10.setColumn(iRow, "DETA_NM", name);
// 		}
		

		/**
		관리항목이 외화금액, 통화, 환율인경우
		body에 화폐, 환율, 외화_차변, 외화_대변에 값을 자동으로 넣어준다.
		**/
/*
		var wofhSt  = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "WOFH_ST");
		//저장상태인것만.
		if (wofhSt == "0010" ){

			//대표관리항목 입력
			if(macd ==  this.ds_Detail10.getColumn(iRow, "MANA_CD") ){
				//trace("code = " + code + " == " + this.ds_Detail10.getColumn(iRow, "DETA_CD"));
				//trace("name = " + name + " == " + this.ds_Detail10.getColumn(iRow, "DETA_NM"));
				if (this.ds_Detail10.getColumn(iRow, "DETA_CD") != code){
					this.ds_Detail10.setColumn(iRow, "DETA_CD", code);
				}
				if (this.ds_Detail10.getColumn(iRow, "DETA_NM") != code){
					this.ds_Detail10.setColumn(iRow, "DETA_NM", name);
				}
			}
		
			if(this.ds_Detail10.getColumn(iRow, "MA" + e.columnid.substr(2, 2) + "_CD") =="V"){
// 				//trace("외화금액");
// 				//trace("code = " + code + " == " + e.columnid.substr(2, 2));
// 				//trace("name = " + name + " == " + e.columnid.substr(2, 2));
// 				//trace("macd = " + macd + " == " + e.columnid.substr(2, 2));
// 				//trace("FRDB_AM = " + iRow + " == "+this.ds_Detail10.getColumn(iRow, "FRDB_AM"));
// 				//trace("FRCR_AM = " + iRow + " == " + this.ds_Detail10.getColumn(iRow, "FRCR_AM"));
				
				if(!this.gfn_IsNull(name)){
					//외화금액
					if(this.ds_Detail10.getColumn(iRow, "DECR_GU") =="D"){
						//차변
						if (this.ds_Detail10.getColumn(iRow, "FRDB_AM") != name){
							//trace("차변외화 = " + this.ds_Detail10.getColumn(iRow, "FRDB_AM") +" == " + name);
							this.ds_Detail10.setColumn(iRow, "FRDB_AM", name);
						}
					}else{
						//대변
						if (this.ds_Detail10.getColumn(iRow, "FRCR_AM") != name){
							//trace("대변외화" + this.ds_Detail10.getColumn(iRow, "FRCR_AM") +" == " + name);
							this.ds_Detail10.setColumn(iRow, "FRCR_AM", name);
						}
					}
				}
			} else if(this.ds_Detail10.getColumn(iRow, "MA" + e.columnid.substr(2, 2) + "_CD") =="X"){
				//통화
				//
				if(!this.gfn_IsNull(code)){
					if (this.ds_Detail10.getColumn(iRow, "CURR_CD") != code){
						//trace("통화" + this.ds_Detail10.getColumn(iRow, "CURR_CD") +" == " + code);
						this.ds_Detail10.setColumn(iRow, "CURR_CD", code);
					}
				}
			} else if(this.ds_Detail10.getColumn(iRow, "MA" + e.columnid.substr(2, 2) + "_CD") =="Y"){
				//환율
				//
				if(!this.gfn_IsNull(name)){
					if (this.ds_Detail10.getColumn(iRow, "EXCH_RT") != name){
						//trace("환율 = " + this.ds_Detail10.getColumn(iRow, "EXCH_RT") +" == " + name);
						this.ds_Detail10.setColumn(iRow, "EXCH_RT", name);
					}
				}
			}
		}
		
*/		
	}
	
	//trace("ds_CmMaInfo_oncolumnchanged end");
	
	
};

/***********************************************************************************************
 * 15.16 [fn_ComMaEditChangedEvent ] 관리항목 Edit변경 관련 이벤트
 ***********************************************************************************************/ 
this.fn_ComMaEditChangedEvent = function(obj:nexacro.Edit,e:nexacro.ChangeEventInfo)
{ 

	trace("fn_ComMaEditChangedEvent start");
	//관리항목코드명함수 정보가 있으면
	
	
	var sDecrGu  = obj.DecrGu;       //차대구분
	var sMacd    = obj.MaCd;         //관리항목코드
	var sReprYn  = obj.ReprYn;       //대표관리항목여부
	var sAcchDecrGu = obj.AcchDecrGu; // 전표등록의 차대구분
	var sItemGu = obj.ItemGu;
    var slocal = "";
		
	//trace("sMacd = " + sMacd);
	//trace("sReprYn = " + sReprYn);
	//trace("sAcchDecrGu = " + sAcchDecrGu);
	//trace("sItemGu = " + sItemGu);
	//trace("obj.FUNC_NM = " + obj.FUNC_NM);
	//trace("obj.sCD01_NM = " + obj.sCD01_NM);
	//trace("obj.sCD02_NM = " + obj.sCD02_NM);
	//trace("obj.sCD02_NM = " + obj.sMaSeq);
	
	 
	if (!this.gfn_IsNull(obj.FUNC_NM)) {		

		var sFUNC_NM = obj.FUNC_NM;      //관리항목-코드명함수
		var oColCd   = eval(obj.ColCd);  //관리항목-코드컬럼
		var oVColCd   = eval(obj.VColCd);  //관리항목-코드컬럼
		var oColNm   = eval(obj.ColNm);  //관리항목-코드명컬럼
		var oGrcmCd  = obj.GRCM_CD;      //관리항목-그룹코드명컬럼
		var oAcomGu  = obj.ACOM_GU;      //계정구분
		var sMaSeq   = obj.MaSeq;        //관리항목-순번
		var sDETA_CD = obj.DETA_CD;      //관리항목-팝업함수
		
		
		var sPopupId = "MA" + sMaSeq + "_" + sDETA_CD;//팝업ID
		//trace("sPopupId ============================== " + sPopupId);
		
		
		//trace("obj.ColCd = " + obj.ColCd);
		//trace("oColCd = " + oColCd.value);
		//trace("oVColCd = " + oVColCd.value);
		//trace("oColNm = " + oColNm.value);
		//trace("oGrcmCd = " + oGrcmCd);
		//trace("sPopupId = " + sPopupId);
 		//trace("sMaSeq = " + sMaSeq);

		
		
		
		
		if(sMaSeq=="01"){
			this.fvCmMaRtnColCd01 = obj.sCD01_NM;
			this.fvCmMaRtnColNm01 = obj.sCD02_NM;
			this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De01Cd.set_value(oVColCd.value);
			slocal = "this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De01Cd";
			this.fvCmMaPopupId01 = "MA"+sMaSeq+"_" + sDETA_CD;//팝업ID
		}else if(sMaSeq=="02"){
			this.fvCmMaRtnColCd02 = obj.sCD01_NM;
			this.fvCmMaRtnColNm02 = obj.sCD02_NM;
			
			//trace("oVColCd.value ========= " + oVColCd.value);
			//trace("oColCd.value ========= " + oColCd.value);
			//trace("oColCd.value ========= " + sDETA_CD);
			
			this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De02Cd.set_value(oVColCd.value);
			slocal = "this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De02Cd";
			this.fvCmMaPopupId02 = "MA"+sMaSeq+"_" + sDETA_CD;//팝업ID
		}else if(sMaSeq=="03"){
			this.fvCmMaRtnColCd03 = obj.sCD01_NM;
			this.fvCmMaRtnColNm03 = obj.sCD02_NM;
			this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De03Cd.set_value(oVColCd.value);
			slocal = "this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De03Cd";
			this.fvCmMaPopupId03 = "MA"+sMaSeq+"_" + sDETA_CD;//팝업ID
		}else if(sMaSeq=="04"){
			this.fvCmMaRtnColCd04 = obj.sCD01_NM;
			this.fvCmMaRtnColNm04 = obj.sCD02_NM;
			this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De04Cd.set_value(oVColCd.value);
			slocal = "this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De04Cd";
			this.fvCmMaPopupId04 = "MA"+sMaSeq+"_" + sDETA_CD;//팝업ID
		}else if(sMaSeq=="05"){
			this.fvCmMaRtnColCd05 = obj.sCD01_NM;
			this.fvCmMaRtnColNm05 = obj.sCD02_NM;
			this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De05Cd.set_value(oVColCd.value);
			slocal = "this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De05Cd";
			this.fvCmMaPopupId05 = "MA"+sMaSeq+"_" + sDETA_CD;//팝업ID
		}else if(sMaSeq=="06"){
			this.fvCmMaRtnColCd06 = obj.sCD01_NM;
			this.fvCmMaRtnColNm06 = obj.sCD02_NM;
			this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De06Cd.set_value(oVColCd.value);
			slocal = "this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De06Cd";
			this.fvCmMaPopupId06 = "MA"+sMaSeq+"_" + sDETA_CD;//팝업ID
		}else if(sMaSeq=="07"){
			this.fvCmMaRtnColCd07 = obj.sCD01_NM;
			this.fvCmMaRtnColNm07 = obj.sCD02_NM;
			this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De07Cd.set_value(oVColCd.value);
			slocal = "this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De07Cd";
			this.fvCmMaPopupId07 = "MA"+sMaSeq+"_" + sDETA_CD;//팝업ID
		}else if(sMaSeq=="08"){
			this.fvCmMaRtnColCd08 = obj.sCD01_NM;
			this.fvCmMaRtnColNm08 = obj.sCD02_NM;
			this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De08Cd.set_value(oVColCd.value);
			slocal = "this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De08Cd";
			this.fvCmMaPopupId08 = "MA"+sMaSeq+"_" + sDETA_CD;//팝업ID
		}
		
	
		//trace("sFUNC_NM ============" + sFUNC_NM);
		//trace("obj.ColCd = " + obj.ColCd);
		if (sFUNC_NM == "gfn_GetCommAcnm") {
			//계좌번호-완료
			// 계좌번호 일부 넣었을경우 일부만 입력되는 문제 수정
			
			//trace("===============  obj.ColCd = " + obj.ColCd);
			var args = [ "ACNM_NO^"+obj.ColCd];
			this.gfn_GetCommAcnm(oVColCd, oColNm, args, sPopupId, "fn_ComMaPopupCallback");//코드로 검색
		} else if (sFUNC_NM == "gfn_GetCommBanm") {
			//은행(지점)-완료
			this.gfn_GetCommBanm(oVColCd, oColNm, sPopupId, "fn_ComMaPopupCallback");//코드로 검색
		} else if (sFUNC_NM == "gfn_GetCommBilm") {
			//어음번호-완료
			this.gfn_GetCommBilm(oAcomGu, oVColCd, oColNm, "", sPopupId, "fn_ComMaPopupCallback");//코드로 검색
		} else if (sFUNC_NM == "gfn_GetCommCnth") {
			//계약번호-완료
			oColCd.set_value(oVColCd.value.toUpperCase());//계약번호는 대문자로
			var custArr = [ "SAUM_NO^this.div_Search.form.edt_CusmCd", "CUSM_NM^this.div_Search.form.edt_CusmNm"];
			this.gfn_GetCommCnth(oVColCd, oColNm, this.fvComPrgmId, sPopupId, "fn_ComMaPopupCallback", custArr);//코드로 검색
			
			
			if (!this.gfn_IsNull(this.div_Search.form.edt_CusmCd.value)){
				
				
				var vAcomCd = this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "ACOM_CD");
			
				if( vAcomCd.substring(0,1) =="1" ||vAcomCd.substring(0,1) =="2"){
				
					iFvFindRow = this.ds_AcomMa.findRowExpr("MA_CD=='2'");
				
					//if (!this.gfn_IsNull(rtnValue)) {
						if(iFvFindRow > -1){
							iFvFindRowMaNum = this.ds_AcomMa.getColumn(iFvFindRow, "MA_NUM"); 
							this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_CD", this.div_Search.form.edt_CusmCd.value);
							this.ds_CmMaInfo.setColumn(0, "VDE"+iFvFindRowMaNum+"_CD", this.div_Search.form.edt_CusmCd.value);
							this.ds_CmMaInfo.setColumn(0, "DE"+iFvFindRowMaNum+"_NM", this.div_Search.form.edt_CusmNm.value);
						}
					//}
				}
				
				
				
			}
			
			
			
			
		} else if (sFUNC_NM == "gfn_GetCommCodm") {
			//공통코드-완료
			this.gfn_GetCommCodm(oGrcmCd, oVColCd, oColNm, sPopupId, "fn_ComMaPopupCallback");//코드로 검색	
		} else if (sFUNC_NM == "gfn_GetCommCrem") {
			//법인카드번호-완료
			//trace("===============  obj.ColCd = " + obj.ColCd);
			var args = [ "CREM_NO^"+obj.ColCd];
			this.gfn_GetCommCrem(oVColCd, oColNm, args, sPopupId, "fn_ComMaPopupCallback");//코드로 검색
		} else if (sFUNC_NM == "gfn_GetCommCusm") {
			//거래처-완료
			//this.gfn_GetCommCusm("C", oColCd, oColNm, sPopupId, "fn_ComMaPopupCallback");//코드로 검색

			var arrArgs = ["SAUM_NO^"+obj.ColCd];
			  
			this.gfn_GetCommCusmS("CS", oVColCd, oColNm, sPopupId, "fn_ComMaPopupCallback", arrArgs);//코드로 검색
		} else if (sFUNC_NM == "gfn_GetCommDebm") {
			//차입금코드-완료
			this.gfn_GetCommDebm(oVColCd, oColNm, "", sPopupId, "fn_ComMaPopupCallback");//코드로 검색
		} else if (sFUNC_NM == "gfn_GetCommDepm") {
			//부서-완료
			this.gfn_GetCommDepm("C", oVColCd, oColNm, sPopupId, "fn_ComMaPopupCallback");//코드로 검색	
		}  else if (sFUNC_NM == "gfn_GetCommEmpm") {
			//사원-완료
			//this.gfn_GetCommEmpm("C", oVColCd, oColNm, this.div_Search.form.edt_SystId, "Empm", sPopupId, "fn_ComMaPopupCallback");//코드로 검색
			this.gfn_GetCommEmpm("C", oVColCd, oColNm, oColCd, sPopupId, "", "fn_ComMaPopupCallback");//코드로 검색
		} else if (sFUNC_NM == "gfn_GetCommFiam") {
			//고정자산번호-완료
			this.gfn_GetCommFiam(oVColCd, oColNm, "", sPopupId, "fn_ComMaPopupCallback");//코드로 검색
		} else if (sFUNC_NM == "gfn_GetCommItem") {
			//품목-완료
			this.gfn_GetCommItem(oVColCd, oColNm, "", sPopupId, "fn_ComMaPopupCallback");//코드로 검색		
		} else if (sFUNC_NM == "gfn_GetCommLoam") {
			//대여금코드-완료
			this.gfn_GetCommLoam(oVColCd, oColNm, "", sPopupId, "fn_ComMaPopupCallback");//코드로 검색
		} else if (sFUNC_NM == "gfn_GetCommSaum") {
			//사업장--완료
			this.gfn_GetCommSaum(oVColCd, oColNm, sPopupId, "fn_ComMaPopupCallback");//코드로 검색		
		} else if (sFUNC_NM == "gfn_GetCommSecm") {
			//유가증권번호-완료
			this.gfn_GetCommSecm(oVColCd, oColNm, "", sPopupId, "fn_ComMaPopupCallback");//코드로 검색
		} else if (sFUNC_NM == "gfn_GetCommSerh") {
			//CS접수번호
			this.gfn_GetCommSerh(oVColCd, oColNm, "", sPopupId, "fn_ComMaPopupCallback");//코드로 검색
		} else if (sFUNC_NM == "gfn_GetCommCbah") {
			//거래처계좌번호

			this.gfn_GetCommCbah(oVColCd, oColNm, "ACNO_GU^ACNO_NM", sPopupId, "fn_ComMaPopupCallback");//코드로 검색
		} else if (sFUNC_NM == "gfn_GetCommRpjh") {
			//연구개발코드
			this.gfn_GetCommRpjh(oVColCd, oColNm, sPopupId, "fn_ComMaPopupCallback");//코드로 검색
		} else if (sFUNC_NM == "gfn_GetCommVatm") {
			//부가세코드
			
			var sVatmGu="";
			if(oAcomGu == "0010" && sDecrGu=="D"){
				//부가가치대급금
				sVatmGu = "0";  // 매입
			}else{
				sVatmGu = "1"; // 매출
			}
			this.gfn_GetCommVatm(oVColCd, oColNm, "", sVatmGu, sPopupId, "fn_ComMaPopupCallback");//코드로 검색
		} 



	}
	
	
	/**
	관리항목의 통화, 환율, 외화금액은
	전표상세의 화폐, 환율, 외화차변, 외화대변 금액에 값을 넣는다.
	
	*/
	//trace("sMacd = " + sMacd);
	var vFrAm;
	var vExchRt;
	var vMaExchRt;
	var vWonAm;
	
	//통화
	if(sMacd == "X"){
		this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "CURR_CD", e.postvalue);
	}else if(sMacd == "Y"){
		//환율
		this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "EXCH_RT", e.postvalue);
		
		//외화, 환율 입력시 원화금액 자동 입력
		vExchRt = nexacro.toNumber(e.postvalue);
		if(this.gfn_IsNull(vExchRt)){
			vExchRt = 0;
		}
		
		//trace("DECR_GU = " + this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "DECR_GU"));
		
		if(this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "DECR_GU") =="D"){
			vFrAm = nexacro.toNumber(this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "FRDB_AM"));
			
			
			//trace("======1===== vExchRt=" + vExchRt );
			//trace("======1===== vFrAm=" + vFrAm );
			if(this.gfn_IsNull(vFrAm)){
				vFrAm = 0;
			}

		
			if(vFrAm != 0 && vExchRt !=0 ){
				//trace("======1======" + nexacro.round(vExchRt * vFrAm));
				if(vFrAm < 0 ){
					vWonAm = nexacro.round(vExchRt * vFrAm * -1, 0);
					vWonAm = vWonAm * -1;
				}else{
					vWonAm = nexacro.round(vExchRt * vFrAm, 0);
				}


				//vWonAm = nexacro.floor(vExchRt * vFrAm).toFixed(0);
				//trace("======11======" + nexacro.round(vExchRt * vFrAm));
				//this.fvDsRowPosChangeDetail = false;
				this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "DEBI_AM", vWonAm);
				//this.fvDsRowPosChangeDetail = true;
				//trace("======12======" + nexacro.round(vExchRt * vFrAm));
			}
			

			
			
		}else{
			vFrAm = nexacro.toNumber(this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "FRCR_AM"));

			//trace("======2===== vExchRt=" + vExchRt );
			//trace("======2===== vFrAm=" + vFrAm );
			
			if(this.gfn_IsNull(vFrAm)){
				vFrAm = 0;
			}


			if(vFrAm != 0 && vExchRt !=0 ){
				//trace("======2======" + nexacro.round(vExchRt * vFrAm));
				
				
				//vWonAm = nexacro.round(vExchRt * vFrAm, 0);
				
				if(vFrAm < 0 ){
					vWonAm = nexacro.round(vExchRt * vFrAm * -1, 0);
					vWonAm = vWonAm * -1;
				}else{
					vWonAm = nexacro.round(vExchRt * vFrAm, 0);
				}


				//vWonAm = nexacro.floor(vExchRt * vFrAm).toFixed(0);
				//trace("======21======" + nexacro.round(vExchRt * vFrAm));
				
				//이벤트 안타고 값만 넣는다.
				//this.fvDsRowPosChangeDetail = false;
				this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "CRED_AM", vWonAm);
				//this.fvDsRowPosChangeDetail = true;
				//trace("======22======" + nexacro.round(vExchRt * vFrAm));
			}
	
			
		}
		
		
		
	}else if(sMacd == "V"){
		//외화금액
		
		//외화, 환율 입력시 원화금액 자동 입력
		vExchRt = nexacro.toNumber(this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "EXCH_RT"));
		vFrAm = nexacro.toNumber(e.postvalue);
		
		if(this.gfn_IsNull(vFrAm)){
			vFrAm = 0;
		}
		if(this.gfn_IsNull(vExchRt)){
			vExchRt = 0;
		}
		
		// 외화관리항목 입력값 찾기
		
			
		//trace("DECR_GU = " + this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "DECR_GU"));
		
		//trace("======3===== vExchRt=" + vExchRt );
		//trace("======3===== vFrAm=" + vFrAm );
			
		if(this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "DECR_GU") =="D"){
			//차변
			this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "FRCR_AM", 0);
			this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "FRDB_AM", e.postvalue);
			//원화금액 자동입력
			
			if(vFrAm != 0  && (vExchRt != 0 &&  vExchRt != 1 )){
			
				if(vFrAm < 0 ){
					vWonAm = nexacro.round(vExchRt * vFrAm * -1, 0);
					//trace("======31======vWonAm  " + vWonAm);
					vWonAm = vWonAm * -1;
				}else{
					vWonAm = nexacro.round(vExchRt * vFrAm, 0);
					//trace("======32======vWonAm  " + vWonAm);
				}
				
				//vWonAm = nexacro.floor(vExchRt * vFrAm).toFixed(0);
				
// 				//trace(""======3======  " + nexacro.round(vExchRt * vFrAm));
// 				//trace(""======3======  " + nexacro.round(vExchRt * vFrAm * -1));
// 				//trace(""======3======vWonAm  " + vWonAm);
				this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "DEBI_AM", vWonAm);
				//trace("======31======" + nexacro.round(vExchRt * vFrAm));
			}
		}else{
			//대변
			this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "FRDB_AM", 0);
			this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "FRCR_AM", e.postvalue);
			
			//trace("======4===== vExchRt=" + vExchRt );
			//trace("======4===== vFrAm=" + vFrAm );
			
			//원화금액 자동입력
			if(vFrAm != 0  && (vExchRt != 0  && vExchRt != 1 )){
				if(vFrAm < 0 ){
					vWonAm = nexacro.round(vExchRt * vFrAm * -1, 0);
					//trace("======41======vWonAm  " + vWonAm);
					vWonAm = vWonAm * -1;
				}else{
					vWonAm = nexacro.round(vExchRt * vFrAm, 0);
					//trace("======42======vWonAm  " + vWonAm);
				}
				
				//vWonAm = nexacro.floor(vExchRt * vFrAm).toFixed(0);
				
// 				//trace(""======4======  " + nexacro.round(vExchRt * vFrAm));
// 				//trace(""======4======  " + nexacro.round(vExchRt * vFrAm * -1));
// 				//trace(""======4======vWonAm  " + vWonAm);
// 				
				//trace("======4======" + nexacro.round(vExchRt * vFrAm));
				this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "CRED_AM", vWonAm);
				//trace("======41======" + nexacro.round(vExchRt * vFrAm));
			}
		}
		
		
	}
	

	
	
	//trace("fn_ComMaEditChangedEvent end");
}

/***********************************************************************************************
 * 15.18 [fn_ComMaComboChangedEvent ] [콤보] 관리항목 콤보변경 관련 이벤트
 ***********************************************************************************************/ 
this.fn_ComMaComboChangedEvent = function(obj:nexacro.Edit,e:nexacro.ChangeEventInfo)
{ 
	
	//코드명 정보가 있으면
	if (!this.gfn_IsNull(obj.CD_NM)) {
		this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, obj.CD_NM,  obj.text);
		this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, obj.VCD_CD,  obj.value);
	}
}


/***********************************************************************************************
 * 15.18 [사용금액 및 가용금액 계산] 
 ***********************************************************************************************/ 
this.fn_CalAvailAm = function()
{ 
	//trace("================10");
	//trace("fn_CalAvailAm start");
	//trace("dRecAm 편성금액0-1 = " + this.div_DetailInput.form.div_detailRight.form.div_Budget.form.mae_RecAm.value);
	//반제금액 체크
	var sAntiAm = 0;
	var sAm = 0;
	var sWofhSt = "";
	sWofhSt = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "WOFH_ST")
	if(this.gfn_IsNull(sWofhSt)){
		sWofhSt = "0000";
	}
	//등록상태일 때만 메세지 나오게 한다.
	
	//trace("sWofhSt = " + sWofhSt);
	
	if(!this.gfn_IsNull(this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "ANTI_NO"))  && sWofhSt == "0010"){
	
// 		this.fvBCalAvailAmt = true;//가용금액계산여부
// 		this.ds_Detail10.set_enableevent(false);
		
		
		sAm = this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "CRED_AM")
		    + this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "DEBI_AM");
		//sAntiAm = nexacro.toNumber(this.ds_Detail11.getColumn(0, "ANTI_AM"))
		sAntiAm = this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "ANTI_AM");
		
		//trace("sAm = " + sAm + " sAntiAm = " + sAntiAm);
		
		if(sAm > sAntiAm){
			var arrMsgArg = [this.gfn_AppendComma(sAntiAm, 0)];
			this.gfn_Alert("FA019", arrMsgArg);  //반제전표 잔액 [ &ITM0 ] 을 초과 할 수 없습니다.
			//자동 취소 처리한다.
			this.ds_Detail10.set_enableevent(false);
			//this.gfn_UndoColumn(this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10)
			if(this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "DECR_GU") =="D"){
				this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "DEBI_AM", this.fvOrgDebiAmt);
			}else{
				this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "CRED_AM", this.fvOrgCredAmt);
			}
			this.ds_Detail10.set_enableevent(true);
		} 
		
// 		this.fvBCalAvailAmt = false;//가용금액계산여부
// 		this.ds_Detail10.set_enableevent(true);
	}
	
	//예산통제하는 계정인경우
	if (this.div_DetailInput.form.div_detailRight.form.div_Budget.form.chk_BgcmYn.value == "1") {
		
		//trace("dRecAm 편성금액1 = " + this.div_DetailInput.form.div_detailRight.form.div_Budget.form.mae_RecAm.value);
		//trace("fn_CalAvailAm start 1");
		this.fvBCalAvailAmt = true;//가용금액계산여부
		this.ds_Detail10.set_enableevent(false);

		var iRow = this.ds_Detail10.rowposition;
		var sDECR_GU = this.ds_Detail10.getColumn(iRow, "DECR_GU");//차대구분
		var sACOM_CD = this.ds_Detail10.getColumn(iRow, "ACOM_CD");//계정코드
		var sBUDG_MM = this.ds_Detail10.getColumn(iRow, "BUDG_MM");//편성년월	
		var sBUDP_CD = this.ds_Detail10.getColumn(iRow, "BUDP_CD");//예산부서
		
		var oDECR_GU = this.ds_Detail10.getOrgColumn(iRow, "DECR_GU");//차대구분
		var oACOM_CD = this.ds_Detail10.getOrgColumn(iRow, "ACOM_CD");//계정코드
		var oBUDG_MM = this.ds_Detail10.getOrgColumn(iRow, "BUDG_MM");//편성년월	
		var oBUDP_CD = this.ds_Detail10.getOrgColumn(iRow, "BUDP_CD");//예산부서
		
		if (this.gfn_IsNull(sBUDG_MM)) {
			sBUDG_MM = "";
		} else {
			sBUDG_MM = sBUDG_MM.substr(0,6);
		}

		//편성금액
		var dRecAm = nexacro.toNumber(this.div_DetailInput.form.div_detailRight.form.div_Budget.form.mae_RecAm.value);//편성금액
		//trace("dRecAm 편성금액 = " + this.div_DetailInput.form.div_detailRight.form.div_Budget.form.mae_RecAm.value);
		
		
		//var dUseAm = this.ds_Detail11.getColumn(0, "USED_AM");
		// 조회된 기 사용금액 
		if (!this.gfn_IsNull(this.ds_Detail11.getColumn(0, "USED_AM"))) {
			//기사용금액
			dUseAm = nexacro.toNumber(this.ds_Detail11.getColumn(0, "USED_AM"));//DB조회 사용금액 = 집행금액_발의 + 집행금액_결의
		}else{
			dUseAm = 0;
		}
		
		
// 		if(this.gfn_IsNull(dUseAm)){
// 			dUseAm = 0;
// 		}
		
		
		
		
		
		//var dUseAmPre = nexacro.toNumber(this.ds_Detail11.getColumn(0, "USED_AM"));//DB조회 사용금액 = 집행금액_발의 + 집행금액_결의
		var dUseAmPre = nexacro.toNumber(dUseAm);//DB조회 사용금액 = 집행금액_발의 //+ 집행금액_결의
		
		//trace("dUseAmPre 조회된 기사용금액 = " + dUseAmPre);
		
		var iOrgSumAmt = 0;//변경전 금액 합계
		var iChangeSumAmt = 0;//변경 금액 합계
		var dPreUseAm = 0;//기사용금액

		//var dUseAm2 = nexacro.toNumber(this.div_DetailInput.form.div_detailRight.form.div_Budget.form.mae_RegAm.value);//사용금액2
		//var dUseAm = 0;//사용금액
		var sSumCol = "";//합계할 컬럼명
		
		//차대구분-대변
		if (sDECR_GU == "C") {
			//dUseAm = this.ds_Detail10.getColumn(iRow, "CRED_AM");//사용금액-현재Row
			sSumCol = "CRED_AM";//합계할 컬럼명
		} else {
			//dUseAm = this.ds_Detail10.getColumn(iRow, "DEBI_AM");//사용금액-현재Row
			sSumCol = "DEBI_AM";//합계할 컬럼명
		}		
		
		var sDECR_GU_Chk = "";//차대구분-체크대상
		var sACOM_CD_Chk = "";//계정코드-체크대상
		var sBUDG_MM_Chk = "";//편성년월-체크대상
		var sBUDP_CD_Chk = 0;//예산부서-체크대상
		
		var oDECR_GU_Chk = "";//차대구분-체크대상
		var oACOM_CD_Chk = "";//계정코드-체크대상
		var oBUDG_MM_Chk = "";//편성년월-체크대상
		var oBUDP_CD_Chk = 0;//예산부서-체크대상
		
		var sCrudType = "";//CRUD Type
		var dOrgAm = 0;//변경전 금액
		var dChgOrgAm = 0;//변경전 금액
		var dNowAm = 0;//현재 금액
			
		
		for (var iLoop=0; iLoop<this.ds_Detail10.getRowCount(); iLoop++) {
			sDECR_GU_Chk = this.ds_Detail10.getColumn(iLoop, "DECR_GU");//차대구분-체크대상
			sACOM_CD_Chk = this.ds_Detail10.getColumn(iLoop, "ACOM_CD");//계정코드-체크대상
			sBUDG_MM_Chk = this.ds_Detail10.getColumn(iLoop, "BUDG_MM");//편성년월-체크대상
			sBUDP_CD_Chk = this.ds_Detail10.getColumn(iLoop, "BUDP_CD");//예산부서-체크대상
			
			
			oDECR_GU_Chk = this.ds_Detail10.getOrgColumn(iLoop, "DECR_GU");//차대구분-체크대상
			oACOM_CD_Chk = this.ds_Detail10.getOrgColumn(iLoop, "ACOM_CD");//계정코드-체크대상
			oBUDG_MM_Chk = this.ds_Detail10.getOrgColumn(iLoop, "BUDG_MM");//편성년월-체크대상
			oBUDP_CD_Chk = this.ds_Detail10.getOrgColumn(iLoop, "BUDP_CD");//예산부서-체크대상
			
			
			sCrudType = this.ds_Detail10.getColumn(iLoop, "crudType");//CRUD Type
			
			dNowAm = this.ds_Detail10.getColumn(iLoop, sSumCol);//현재 금액
			dOrgAm = this.ds_Detail10.getOrgColumn(iLoop, sSumCol);//변경전 금액
			
			if(sDECR_GU == oDECR_GU_Chk && sACOM_CD == oACOM_CD_Chk && sBUDG_MM == oBUDG_MM_Chk && sBUDP_CD == oBUDP_CD_Chk && sCrudType !="I"){
				iOrgSumAmt = iOrgSumAmt + dOrgAm;
			}
			/*
			// 예산 키 변경시
			if(oDECR_GU != sDECR_GU_Chk || oACOM_CD != sACOM_CD_Chk || oBUDG_MM != sBUDG_MM_Chk || oBUDP_CD != sBUDP_CD_Chk){
				dOrgAm = 0;//변경전 금액
			}
			
			if (sDECR_GU == sDECR_GU_Chk && sACOM_CD == sACOM_CD_Chk && sBUDG_MM == sBUDG_MM_Chk && sBUDP_CD == sBUDP_CD_Chk) {

				//trace(" sDECR_GU == sDECR_GU_Chk  ");
				if (sCrudType != "I") {
					//trace(" iOrgSumAmt = iOrgSumAmt + dOrgAm ==   " + dOrgAm);
					//trace(" iOrgSumAmt = iOrgSumAmt + iOrgSumAmt ==   " + iOrgSumAmt);
					iOrgSumAmt = iOrgSumAmt + dOrgAm ;//변경전 금액 합계					
				}
			}
			
			
			



			if (sDECR_GU == sDECR_GU_Chk && sACOM_CD == sACOM_CD_Chk && sBUDG_MM == sBUDG_MM_Chk && sBUDP_CD == sBUDP_CD_Chk) {

// 				if (sCrudType == "U") {
// 			
// 					iChangeSumAmt = iChangeSumAmt + (dNowAm - dOrgAm);//변경 금액 합계
// 				}
				//trace(" sDECR_GU == sDECR_GU_Chk  ");
				if (sCrudType != "I") {
					//trace(" iOrgSumAmt = iOrgSumAmt + dOrgAm ==   " + dOrgAm);
					//trace(" iOrgSumAmt = iOrgSumAmt + iOrgSumAmt ==   " + iOrgSumAmt);
					iOrgSumAmt = iOrgSumAmt + dOrgAm ;//변경전 금액 합계					
				}
			}
			if(this.gfn_IsNull(sCrudType)){
				sCrudType = "";
			}
			// 예산 키 변경시 
// 			//trace(" oACOM_CD == sACOM_CD_Chk =  " + iLoop + " = " + oACOM_CD + " = "  +  sACOM_CD_Chk);
			if (sCrudType != "" && sDECR_GU == oDECR_GU_Chk && sACOM_CD == oACOM_CD_Chk && sBUDG_MM == oBUDG_MM_Chk && sBUDP_CD == oBUDP_CD_Chk) {
			
				//trace(" oDECR_GU == sDECR_GU_Chk  ");
				//trace(" dChgOrgAm1 ========= " + dChgOrgAm);
				if (sCrudType != "I") {
					dChgOrgAm = dChgOrgAm + this.ds_Detail10.getOrgColumn(iLoop, sSumCol);
					//trace(" dChgOrgAm2 ========= " + dChgOrgAm);
					//iOrgSumAmt = iOrgSumAmt  - dChgOrgAm;//변경전 금액 합계					
				}
			}
			
			
			*/
		}
					
		//사용금액 합
		var dUseAmSum = this.ds_Detail10.getCaseSum("DECR_GU == '" + sDECR_GU + "' && ACOM_CD == '" + sACOM_CD + "' && BUDG_MM == '" + sBUDG_MM + "' && BUDP_CD == '" + sBUDP_CD + "'", sSumCol);//사용금액합		
		
		
		// 예산 키 변경시
// 		if(oDECR_GU != sDECR_GU || oACOM_CD != sACOM_CD || oBUDG_MM != sBUDG_MM || sBUDP_CD != oBUDP_CD){
// 			dChgOrgAm = this.ds_Detail10.getOrgColumn(iRow, sSumCol);
// 		}else{
// 			dChgOrgAm = 0;
// 		}
			
			
		//기사용금액 = 조회된 기사용금액 - 변경전 사용금액 
		dPreUseAm = dUseAmPre - iOrgSumAmt;// - dChgOrgAm;//기사용금액	
		
		
		/*
		if (iChangeSumAmt == 0) {
			dPreUseAm = dUseAmPre - iOrgSumAmt;//기사용금액		
		} else {
			dPreUseAm = dUseAmPre - (iOrgSumAmt - (iChangeSumAmt-iOrgSumAmt));//기사용금액
		}
		*/
// 		//trace("dChgOrgAm = " + dChgOrgAm);
// 		//trace("dUseAmPre = " + dUseAmPre);
// 		//trace("iOrgSumAmt = " + iOrgSumAmt);
// 		//trace("dPreUseAm = " + dPreUseAm);
		
		this.div_DetailInput.form.div_detailRight.form.div_Budget.form.mae_UsedAm.set_value(dPreUseAm);//기사용금액 = DB조회 사용금액 - 현재계정의 변경전 금액
		this.div_DetailInput.form.div_detailRight.form.div_Budget.form.mae_RegAm.set_value(dUseAmSum);//사용금액-해당 계정건

		var dAvailAm = dRecAm - (dPreUseAm + dUseAmSum);//가용잔액 = 편성금액 - ( 기사용금액 + 사용금액)
	    var dGetOrgAm;
		var dGetGetAm;

		if (isNaN(dAvailAm)) {
			this.div_DetailInput.form.div_detailRight.form.div_Budget.form.mae_AvailAm.set_value(0);//가용잔액
		} else {
			if (dAvailAm < 0    && sWofhSt == "0010") {
				
				this.gfn_Alert("CA012");//가용잔액이 부족합니다.
				

				if (sDECR_GU == "C") {
					
					dGetOrgAm = nexacro.toNumber(this.ds_Detail10.getOrgColumn(iRow, "CRED_AM"));
					dGetGetAm = nexacro.toNumber(this.ds_Detail10.getColumn(iRow, "CRED_AM"));

					if(dGetOrgAm != dGetGetAm){
						this.ds_Detail10.setColumn(iRow, "CRED_AM", this.ds_Detail10.getOrgColumn(iRow, "CRED_AM"));
					}else{
						this.ds_Detail10.setColumn(iRow, "CRED_AM", 0);
					}
					
					this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10.setCellPos(10);
				} else {
					//this.ds_Detail10.setColumn(iRow, "DEBI_AM", this.ds_Detail10.getOrgColumn(iRow, "DEBI_AM"));
					
					dGetOrgAm = nexacro.toNumber(this.ds_Detail10.getOrgColumn(iRow, "DEBI_AM"));
					dGetGetAm = nexacro.toNumber(this.ds_Detail10.getColumn(iRow, "DEBI_AM"));

					if(dGetOrgAm != dGetGetAm){
						this.ds_Detail10.setColumn(iRow, "DEBI_AM", this.ds_Detail10.getOrgColumn(iRow, "DEBI_AM"));
					}else{
						this.ds_Detail10.setColumn(iRow, "DEBI_AM", 0);
					}
					
					this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10.setCellPos(9);
				}
				this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10.showEditor(true);
				this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10.setFocus();
				//this.div_DetailInput.form.div_detailRight.form.div_Budget.form.mae_UsedAm.set_value(0);

				dUseAmSum = this.ds_Detail10.getCaseSum("DECR_GU == '" + sDECR_GU + "' && ACOM_CD == '" + sACOM_CD + "' && BUDG_MM == '" + sBUDG_MM + "'", sSumCol);//사용금액합
				dAvailAm = dRecAm - (dPreUseAm + dUseAmSum);//가용잔액 = 편성금액 - ( 사용금액1합 + 사용금액2)
				this.div_DetailInput.form.div_detailRight.form.div_Budget.form.mae_RegAm.set_value(dUseAmSum);//사용금액-해당 계정건
				this.div_DetailInput.form.div_detailRight.form.div_Budget.form.mae_AvailAm.set_value(dAvailAm);//가용잔액
				this.fvBCalAvailAmt = false;//가용금액계산여부
				this.ds_Detail10.set_enableevent(true);
				return;
			} else {		
				this.div_DetailInput.form.div_detailRight.form.div_Budget.form.mae_AvailAm.set_value(dAvailAm);//가용잔액
			}
		}

		if (!this.gfn_IsNull(sACOM_CD) && !this.gfn_IsNull(sBUDG_MM)) {
		
			if (this.div_DetailInput.form.div_detailRight.form.div_Budget.form.chk_BgcmYn.value) {
				//예산편성금액 설정
				//편성금액체크
				if (isNaN(dRecAm) || (dRecAm == 0)) {

					if (this.ds_Detail10.getColumn(iRow, "crudType") == "I" || this.ds_Detail10.getColumn(iRow, "crudType") == "U") {
						//trace("해당월의 예산편성금액이 없습니다. 1")
						//this.gfn_Alert("CA011");//해당월의 예산편성금액이 없습니다.
					}
				}		
				
				if (isNaN(dRecAm)) {
					this.ds_Detail10.setColumn(iRow, "BGCM_AM", "0");//예산편성금액
				} else {
					this.ds_Detail10.setColumn(iRow, "BGCM_AM", dRecAm);//예산편성금액
				}			
		
			}
		}

		this.fvBCalAvailAmt = false;//가용금액계산여부
		this.ds_Detail10.set_enableevent(true);
	} else {	
		this.div_DetailInput.form.div_detailRight.form.div_Budget.form.mae_AvailAm.set_value(0);//가용잔액
	}
	
	//trace("fn_CalAvailAm end");
	//trace("================12");
}

/***********************************************************************************************
 * 15.19. [예산통제정보 조회] - 예산부서, 편성년월 변경시
 ***********************************************************************************************/ 
this.fn_GetBudg = function()
{
	//trace("===========6")
	//this.setTimer(100, 200);

	//trace("fn_GetBudg start ds_Detail10.rowposition = " + this.ds_Detail10.rowposition);
	
	
	if(!this.GetBudgYn){
		return;
	}


	
	this.ds_Input.clearData();
	this.ds_Detail11.clearData();
	
	
	
	
	this.ds_Input.addRow();
	
	var sDEPM_CD = this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "BUDP_CD");//부서코드
	var sBUDG_MM = this.gfn_Nvl(this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "BUDG_MM"), "");//편성년월
	var sACOM_CD = this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "ACOM_CD");//계정코드
	var sCtrlCd = this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "CTRL_CD");//회계기준코드
	
	
	if (this.gfn_IsNull(sDEPM_CD) || this.gfn_IsNull(sBUDG_MM) || this.gfn_IsNull(sACOM_CD)) {
		return;
	}
	
	if (!this.gfn_IsNull(sBUDG_MM)) {
		sBUDG_MM = sBUDG_MM.substr(0,6);
	}
	
	
	//회계기준코드변경
	//예산부서의 회계기준코드를 가져온다.
	
	var iFindRow = this.ds_EmPalm.findRowExpr("DEPM_CD == '"+sDEPM_CD+"'");
	
	//trace("iFindRow = " + iFindRow);
	
	var palmCd = this.ds_EmPalm.getColumn(iFindRow, "PALM_CD");
	var palmNm = this.ds_EmPalm.getColumn(iFindRow, "PALM_NM");
	
	
	if(!this.gfn_IsNull(palmCd) && !this.gfn_IsNull(sCtrlCd)){
		//trace(""palmCd 5 = " );
		this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "PALM_CD", this.ds_EmPalm.getColumn(iFindRow, "PALM_CD"));
		this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "PALM_NM", this.ds_EmPalm.getColumn(iFindRow, "PALM_NM"));
	}
	
	
	
	this.ds_Input.setColumn(0, "BUGS_YM", sBUDG_MM);
	this.ds_Input.setColumn(0, "DEPM_CD", sDEPM_CD);
	this.ds_Input.setColumn(0, "ACOM_CD", sACOM_CD);
	
	//[공통]서비스정보 초기화
	this.gfn_InitComService(this);
		
	//[공통]서비스정보 추가
	var svcAddObj = new Object();//[공통] 서비스 추가 파라메타 정보 Object
	svcAddObj.sSelectSql = "fa:M_FA_1000_D_SL12";
	this.gfn_AddComSearchService(this, svcAddObj);			

	//[공통]서비스 호출 변수
	var svcCallObj = new Object();//[공통] 서비스 파라메타 정보 Object
		
	svcCallObj.sTrid = "GET_BUDG";//Transaction ID 등 callback에서 넘겨 받을 String을 지정

	svcCallObj.sActionName = this.G_SV_FA;//서버에서 호출할 Action - 모듈별로 호출되는 기본 Actio이 다름 : 공통 서비스 Action 업무구분  변수 참조
	svcCallObj.sInputDaset = "ds_Input=ds_Input" //입력 데이터셋
	svcCallObj.sOutDatset = "ds_Detail11=ds_Detail11";//출력 데이터셋
	svcCallObj.sOtherArg = "";//서버로 전송할 기타 Argument 정보 문자열, 예) key=value key2=value2
	svcCallObj.sCallBackFnc = "fn_Callback";//서버에서 처리가 완료된 후 Callback 받을 Function 명
	svcCallObj.isSync = true;//동기식으로 설정할지 여부
	//[공통]서비스 호출
	this.gfn_CallComService(this, svcCallObj);
	
	if (!this.fvBCalAvailAmt) {
		
		//trace("===========fn_Callback GET_BUDG fvBCalAvailAmt start ")
		this.fn_CalAvailAm();//가용금액 계산
		//trace("===========fn_Callback GET_BUDG fvBCalAvailAmt end ")
	}	
	//trace("fn_GetBudg end");
	//trace("===========7")
}
  
/***********************************************************************************************
 * 15.20. [계정명조회 그리드] - 콜백함수
 ***********************************************************************************************/ 
this.fn_CommAcomCallbackFunc = function()
{  
	//trace("fn_CommAcomCallbackFunc========");
	this.setTimer(100, 200);
}

/***********************************************************************************************
 * 15.21. [계정명조회 그리드] - 콜백함수-실행함수
   dsAcomMaSetYn = this.fn_dsAcomMa() SET 여부 
       SET : 관리항목세팅
	   ""  : 기존 관리항목값 그대로 가져온다.
 ***********************************************************************************************/ 
this.fn_CommAcomCallbackRunFunc = function(dsAcomMaSetYn)
{  
	

	var iRow = this.ds_Detail10.rowposition;
	var sACOM_CD = this.ds_Detail10.getColumn(iRow, "ACOM_CD");//계정코드
	var sBUDG_MM = this.gfn_Nvl(this.ds_Detail10.getColumn(iRow, "BUDG_MM"), "");//편성년월
	var sBUDP_CD = this.gfn_Nvl(this.ds_Detail10.getColumn(iRow, "BUDP_CD"), "");//편성부서
	var sSystId = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "SYST_ID"); 
	var sCtrlCd = this.ds_Detail10.getColumn(iRow, "CTRL_CD");//회계기준코드
	var sDECR_GU = this.ds_Detail10.getColumn(iRow, "DECR_GU");//차대구분
	var sDECR_GU_CHK = this.ds_Detail10.getColumn(iRow, "DECR_GU_CHK");//차대구분-계정
	var sAntiYn =  this.ds_Detail10.getColumn(iRow, "ANTI_YN");//반제전표계정YN
	var bCheckBgcm = "";
	var bCheckBugs = "";
	//차대금액 둘다 0 이면
	//차대구분은 계정의 차대구분을 넣는다.
	
	if(this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "DEBI_AM")==0 && this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "CRED_AM")==0){
		this.ds_Detail10.set_enableevent(false);
		
		if(this.gfn_IsNull(sDECR_GU_CHK) || sDECR_GU_CHK==""){
			this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "DECR_GU", "D");
		}else{
			this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "DECR_GU", sDECR_GU_CHK);
		}
		

		
		this.ds_Detail10.set_enableevent(true);
	}
				
				
// 	this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "CURR_CD", "0090");
// 	this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "EXCH_RT", 1);
// 	this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "FRDB_AM", 0);
// 	this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "FRCR_AM", 0);
	
	
	/*
		반제계정인경우 
		반제계정의 차대구분과 전표의 차대구분이 일치해야 함
		불일치시 등록 못함
	*/
	//trace("sAntiYn = " + sAntiYn);
	/*
	if(sAntiYn == "1"){
		if(sDECR_GU != sDECR_GU_CHK){
			//trace("sDECR_GU_CHK = " + sDECR_GU_CHK);
			//trace("sDECR_GU = " + sDECR_GU);
			var sDEcrGuNm = "";
			if(sDECR_GU == "D"){
				sDEcrGuNm = "대변";
			}else{
				sDEcrGuNm = "차변";
			}
			
			//trace("sDEcrGuNm = " + sDEcrGuNm);
			var arrMsgArg = [sDEcrGuNm];
			this.gfn_Alert("FA020", arrMsgArg); //반제계정은 [ &ITM0 ] 만 가능합니다. 
			
			this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "ACOM_CD", "");
			this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "ACOM_NM", "");
			this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "DECR_GU_CHK", "");//차대구분					
			this.ds_Detail10.setColumn(this.ds_Detail10.rowposition, "CTRL_CD", "");//전표손익제어
			
			return;
		}
	}
	*/
	
	
	
	//발의자의 손익코드
	//var iFindRow = this.ds_EmPalm.findRowExpr("SYST_ID == '"+sSystId+"'");
	var iFindRow = this.ds_EmPalm.findRowExpr("DEPM_CD == '"+this.ds_Master10.getColumn(this.ds_Master10.rowposition, "DEPM_CD")+"'");
	
	var palmCd = this.ds_EmPalm.getColumn(iFindRow, "PALM_CD");
	var palmNm = this.ds_EmPalm.getColumn(iFindRow, "PALM_NM");
	
	//회계기준코드 자동입력
	//계정의 전표손익제어 의 값이 있는경우만 자동으로 가져온다.
	if(!this.gfn_IsNull(palmCd) && !this.gfn_IsNull(sCtrlCd)){
		//trace("sCtrlCd = " + sCtrlCd);
		//trace(""palmCd 6 = " );
		
		this.ds_Detail10.setColumn(iRow, "PALM_CD", palmCd);
		this.ds_Detail10.setColumn(iRow, "PALM_NM", palmNm);
	}
	//trace(""palmCd 61 = " );

	if (!this.gfn_IsNull(sACOM_CD) && !this.gfn_IsNull(sBUDG_MM)) {
		//[예산통제 계정] 체크
		var paramObj= new Object();//[공통] 예산통제체크 파라메타 정보 Object
		paramObj.BGCM_YY = sBUDG_MM.substr(0, 4);//편성년도
		paramObj.ACOM_CD = sACOM_CD;//계정코드
	
		bCheckBgcm = this.gfn_CheckBgcm(paramObj);//예산편성계정여부 체크

		//trace(""palmCd 611 = " );
		paramObj.BUGS_YM = sBUDG_MM;//편성년도
		paramObj.BUDP_CD = sBUDP_CD;//편성부서
		
		bCheckBugs = this.gfn_CheckBugs(paramObj);//예산편성계정여부 체크
		
		//trace(""palmCd 612 = " );
		//예산 업데이트 여부
		if(bCheckBugs){
			this.ds_Detail10.setColumn(iRow, "BUGS_YN", "Y");//예산통제여부
		}else{
			this.ds_Detail10.setColumn(iRow, "BUGS_YN", "N");//예산통제여부
		}
		
		//trace(""palmCd 613 = " );
		//예산통제계정
		if (bCheckBgcm) {
		
			//마감여부 체크
			var paramObj= new Object();//[공통] 예산통제체크 파라메타 정보 Object
			var mgasDst  = "C";//[필수] 마감구분 - C: 마감여부, A: 회계마감여부  
			paramObj.MGAS_MM = sBUDG_MM;//마감년월
			paramObj.MODM_CD = "CC";//[필수] 모듈구분(공통코드-CA910(마감구분) 참조) : CC - 예산편성확정 마감여부, CB - 예산마감 여부
			paramObj.ACUM_CD = "";//[선택] 회계단위
			paramObj.BUSM_CD  = "";//[선택] 사업부문
			paramObj.SAUM_CD  = "";//[선택] 사업장코드
			paramObj.DEPM_CD  = "";//[선택] 부서코드
			paramObj.MODD_CD  = "";//[선택] 모듈상세구분(CA900)
			paramObj.BFPR_YN  = "Y";//[선택] 마감전 프로세스여부
			
			var bCheck = this.gfn_CheckMgas(paramObj, mgasDst);

			//예산편성확정 되었을경우
			if (!bCheck) {
				
				var arrMsgArg = [this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "ACOM_NM")];
				this.gfn_Alert("CA017", arrMsgArg);//해당월의 예산편성확정 정보가 없습니다.	
				//this.ds_Detail10.deleteRow(this.ds_Detail10.rowposition);// 줄삭제
				
				//this.ds_Detail10.setColumn(iRow, "ACOM_NM", "");//계정코드명				
				//this.ds_Detail10.setColumn(iRow, "ACOM_CD", "");//계정코드
				//this.ds_Detail10.setColumn(iRow, "DECR_GU_CHK", "");//차대구분-체크	
				
				
				 this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10.setCellPos(this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10.getBindCellIndex("body",'ACOM_CD'));
				 this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10.setFocus();				
			
				//return;  
				
				
			}
			//trace(""palmCd 614 = " );
			sDECR_GU = this.ds_Detail10.getColumn(iRow, "DECR_GU");//차대구분
			sDECR_GU_CHK = this.ds_Detail10.getColumn(iRow, "DECR_GU_CHK");//차대구분-계정

			//선택한것과 계정코드의 차대구분이 같을 경우
			if ((sDECR_GU == "D" && sDECR_GU_CHK == "D") || (sDECR_GU == "C" && sDECR_GU_CHK == "C")) {
				this.div_DetailInput.form.div_detailRight.form.div_Budget.form.chk_BgcmYn.set_value("1");
				this.ds_Detail10.setColumn(iRow, "BGCM_YN", "Y");//예산통제여부
			} else {
				this.div_DetailInput.form.div_detailRight.form.div_Budget.form.chk_BgcmYn.set_value("0");
				this.ds_Detail10.setColumn(iRow, "BGCM_YN", "N");//예산통제여부
				bCheckBgcm = false;
			}
			//trace(""palmCd 615 = " );
		} else {
			this.div_DetailInput.form.div_detailRight.form.div_Budget.form.chk_BgcmYn.set_value("0");
			this.ds_Detail10.setColumn(iRow, "BGCM_YN", "N");//예산통제여부
			//trace(""palmCd 616 = " );
		}
	}
	//trace(""palmCd 62 = " );
	//관리항목 조회	
	if(this.dsAcomMaSetYn == ""){
		// 행복사일 경우 기존 데이터를 가져온다.
		this.fn_dsAcomMa(this.ds_Detail10.getColumn(iRow, "ACOM_CD"), "", bCheckBgcm);	
		this.dsAcomMaSetYn = "SET";
	}else{
		//행복사 외 나머지
		this.fn_dsAcomMa(this.ds_Detail10.getColumn(iRow, "ACOM_CD"), "SET", bCheckBgcm);
	}
	//trace(""palmCd 63 = " );
	var ctrlCd = this.ds_Detail10.getColumn(iRow, "CTRL_CD");
	if(!this.gfn_IsNull(ctrlCd)){
		//전표손익제어
		if(ctrlCd == "0010" || ctrlCd == "0040" || ctrlCd == "0045" || ctrlCd == "0050"){
			//제조, 판매, 관리, 연구
			
			
		}
	}
	
	
}

/***********************************************************************************************
 * 15.22. [전표상세 저장시] - 집행금액 발의 계산
 ***********************************************************************************************/ 
this.fn_CalBgacAm = function(sDst)
{

	//trace("fn_CalBgacAm = " +sDst);
	/*
	 *	예산 계정, 금액, 부서, 편선년월 변경시 
	 *  이전 계정, 부서, 편성년월의 금액은 - 처리 
	 *  변경하면 계정, 부서, 편성년월은 추가

	 */

	
	var sBUGS_YM = "";//편성년월
	var sDEPM_CD = "";//부서코드
	var sACOM_CD = "";//계정코드
	var sDECR_GU = "";//
	var sDECR_GU_CHK = "";//차대구분
	var sNUMB_SE = "";//순번
	
	
	var oDEPM_CD = "";//부서코드
	var oACOM_CD = "";//계정코드
	var oDECR_GU = "";//차대구분
	
	
	var sBGCM_YN = "";//예산통제여부
	var sBUGS_YN = "";//예산통제여부
	var arrTarget = new Array();//집행금액 발의 계산 대상
	var arrTargetList = new Array();//집행금액 발의 계산 대상 리스트
	var sCrudType = "";//CRUD Type
	var sChkStr = "";
	var sCol = "";//컬럼명
	var dBGAC_AM = 0;//집행금액_발의
	var dBGAC_AM_I = 0;//집행금액_발의(신규)
	var dBGAC_AM_U = 0;//집행금액_발의(수정)
	var dBGAC_AM_U_ORG = 0;//집행금액_발의(수정)_원본
	var dBGAC_AM_D = 0;//집행금액_발의(삭제)
	var iFindRow = 0;
	var iAddRow = 0;
	var sOrgGu = "";
	var iAmt = 0;
	var oAmt = 0;
		
	this.ds_Detail13.clearData();
	for (var iLoop=0; iLoop<this.ds_Detail10.getRowCount(); iLoop++) {
	
		sBUGS_YN = this.ds_Detail10.getColumn(iLoop, "BUGS_YN");//예산통제여부에서 예산업데이트 BUGS 에서 여부 체크
		sBGCM_YN = this.ds_Detail10.getColumn(iLoop, "BGCM_YN");//예산통제여부에서 예산업데이트 BUGS 에서 여부 체크
		
		if (this.gfn_IsNull(sBUGS_YN)){
			sBUGS_YN = "N";
		}
		if (this.gfn_IsNull(sBGCM_YN)){
			sBGCM_YN = "N";
		}
		
		if (sBUGS_YN == "Y" || sBGCM_YN == "Y") {
			
			//전체삭제일경우
			
			if (sDst == "D") {
				sBUGS_YM = this.ds_Detail10.getColumn(iLoop, "BUDG_MM");//편성년월
				sDEPM_CD = this.ds_Detail10.getColumn(iLoop, "BUDP_CD");//부서코드
				sACOM_CD = this.ds_Detail10.getColumn(iLoop, "ACOM_CD");//계정코드
				sDECR_GU = this.ds_Detail10.getColumn(iLoop, "DECR_GU");//차대구분
				sNUMB_SE = this.ds_Detail10.getColumn(iLoop, "NUMB_SE");//차대구분
				if (sDECR_GU == "D") {
					sCol = "DEBI_AM";//컬럼명
				} else {
					sCol = "CRED_AM";//컬럼명
				}
							
				iAmt = this.ds_Detail10.getColumn(iLoop, sCol);	
				oAmt = this.ds_Detail10.getOrgColumn(iLoop, sCol); 		
							
				iAddRow = this.ds_Detail13.addRow();
				this.ds_Detail13.setColumn(iAddRow, "BUGS_YM", sBUGS_YM);//편성년월
				this.ds_Detail13.setColumn(iAddRow, "DEPM_CD", sDEPM_CD);//부서코드
				this.ds_Detail13.setColumn(iAddRow, "ACOM_CD", sACOM_CD);//계정코드
				
				this.ds_Detail13.setColumn(iAddRow, "BGAC_AM", oAmt);//집행금액_발의
				
				
				this.ds_Detail13.setColumn(iAddRow, "NUMB_SE", sNUMB_SE);//집행금액_발의순번
				this.ds_Detail13.setColumn(iAddRow, "crudType", "U");
				
				//sChkStr = sBUGS_YM + ";" + sDEPM_CD + ";" + sACOM_CD + ";" + sDECR_GU + ";" + sNUMB_SE;

				//arrTargetList.push(sChkStr);
		
			} else {
				sCrudType = this.ds_Detail10.getColumn(iLoop, "crudType");//CRUD Type
				
				
				
				
				if (sCrudType == "I" || sCrudType == "U" || sCrudType == "D") {
					sBUGS_YM = this.ds_Detail10.getColumn(iLoop, "BUDG_MM");//편성년월
					
					sDEPM_CD = this.ds_Detail10.getColumn(iLoop, "BUDP_CD");//부서코드
					sACOM_CD = this.ds_Detail10.getColumn(iLoop, "ACOM_CD");//계정코드
					sDECR_GU = this.ds_Detail10.getColumn(iLoop, "DECR_GU");//차대구분
					sDECR_GU_CHK = this.ds_Detail10.getColumn(iLoop, "DECR_GU_CHK");//차대구분
				
					
					oBUGS_YM = this.ds_Detail10.getColumn(iLoop, "BUDG_MM");//편성년월
					oDEPM_CD = this.ds_Detail10.getOrgColumn(iLoop, "BUDP_CD");//부서코드
					oACOM_CD = this.ds_Detail10.getOrgColumn(iLoop, "ACOM_CD");//계정코드
					oDECR_GU = this.ds_Detail10.getOrgColumn(iLoop, "DECR_GU");//차대구분
					
				    sNUMB_SE = this.ds_Detail10.getColumn(iLoop, "NUMB_SE");//차대구분
					
					if (sDECR_GU == "D") {
						sCol = "DEBI_AM";//컬럼명
					} else {
						sCol = "CRED_AM";//컬럼명
					}
					
							
					iAmt = this.ds_Detail10.getColumn(iLoop, sCol);
					oAmt = this.ds_Detail10.getOrgColumn(iLoop, sCol); 
					
					//trace("금액변경 예전금액 oAmt = " + oAmt)
					if(iAmt != oAmt){
						dBGAC_AM_U_ORG = this.ds_Detail10.getOrgColumn(iLoop, sCol);//집행금액_발의(수정)_원본
					}else{
						dBGAC_AM_U_ORG = 0;//집행금액_발의(수정)_원본
					}
					
					//trace("금액변경 예전금액 dBGAC_AM_U_ORG = " + dBGAC_AM_U_ORG)
						
					if(sCrudType == "U" ){
						if(sDEPM_CD != oDEPM_CD || sACOM_CD != oACOM_CD  || sDECR_GU != oDECR_GU ||  iAmt !=  oAmt){
							//sChkStr = sBUGS_YM + ";" + sDEPM_CD + ";" + sACOM_CD + ";" + sDECR_GU + ";" + sNUMB_SE+ ";ORG" ;
							//arrTargetList.push(sChkStr);
							//차변
							
							iAddRow = this.ds_Detail13.addRow();
							this.ds_Detail13.setColumn(iAddRow, "BUGS_YM", oBUGS_YM);//편성년월
							this.ds_Detail13.setColumn(iAddRow, "DEPM_CD", oDEPM_CD);//부서코드
							this.ds_Detail13.setColumn(iAddRow, "ACOM_CD", oACOM_CD);//계정코드
							this.ds_Detail13.setColumn(iAddRow, "BGAC_AM", oAmt * -1);//집행금액_발의
							
							this.ds_Detail13.setColumn(iAddRow, "NUMB_SE", sNUMB_SE);//집행금액_발의순번
							this.ds_Detail13.setColumn(iAddRow, "crudType", "U");
							
						}
						
						
						
						
					}
					
					
					
					if(sCrudType == "I" ){
						dBGAC_AM_I = this.ds_Detail10.getColumn(iLoop, sCol);
					}else{
						dBGAC_AM_I = 0;
					}
					if(sCrudType == "D" ){
						dBGAC_AM_D = this.ds_Detail10.getColumn(iLoop, sCol);
					}else{
						dBGAC_AM_D = 0;
					}
					if(sCrudType == "U" ){
						dBGAC_AM_U = this.ds_Detail10.getColumn(iLoop, sCol);
					}else{
						dBGAC_AM_U = 0;
					}
					
					iAddRow = this.ds_Detail13.addRow();
					this.ds_Detail13.setColumn(iAddRow, "BUGS_YM", sBUGS_YM);//편성년월
					this.ds_Detail13.setColumn(iAddRow, "DEPM_CD", sDEPM_CD);//부서코드
					this.ds_Detail13.setColumn(iAddRow, "ACOM_CD", sACOM_CD);//계정코드
	
	
					dBGAC_AM = dBGAC_AM_I + dBGAC_AM_U  - dBGAC_AM_D;//집행금액_발의
					
					
// 					//trace("저장 dBGAC_AM_I = " + dBGAC_AM_I);
// 					//trace("저장 dBGAC_AM_U = " + dBGAC_AM_U);
// 					//trace("저장 dBGAC_AM_U_ORG = " + dBGAC_AM_U_ORG);
// 					//trace("저장 dBGAC_AM_D = " + dBGAC_AM_D);
// 					//trace("저장 dBGAC_AM = " + dBGAC_AM);
					
				
					this.ds_Detail13.setColumn(iAddRow, "BGAC_AM", dBGAC_AM);//집행금액_발의
			
					this.ds_Detail13.setColumn(iAddRow, "NUMB_SE", sNUMB_SE);//집행금액_발의순번
					this.ds_Detail13.setColumn(iAddRow, "crudType", "U");
					
					//sChkStr = sBUGS_YM + ";" + sDEPM_CD + ";" + sACOM_CD + ";" + sDECR_GU + ";" + sNUMB_SE+ ";UPD";
					

					//	arrTargetList.push(sChkStr);
			
				}
			}
		}
	}
	
	/*
	//trace("arrTargetList = " + arrTargetList.length);
	if (arrTargetList.length > 0) {
		for (var iLoop=0; iLoop<arrTargetList.length; iLoop++) {
		
			//trace("arrTargetList iLoop = " + iLoop);
			
			
			arrTarget = arrTargetList[iLoop].split(";");
			sBUGS_YM = arrTarget[0];//편성년월
			sDEPM_CD = arrTarget[1];//부서코드
			sACOM_CD = arrTarget[2];//계정코드
			sDECR_GU = arrTarget[3];//차대구분
			sNUMB_SE = arrTarget[4];//차대구분
			sOrgGu = arrTarget[5];  // 예산 키 변경
			//차변
			if (sDECR_GU == "D") {
				sCol = "DEBI_AM";//컬럼명
			} else {
				sCol = "CRED_AM";//컬럼명
			}
			
			sChkStr = "BUDG_MM == '" + sBUGS_YM + "' && BUDP_CD == '" + sDEPM_CD + "' && ACOM_CD == '" + sACOM_CD + "' && DECR_GU == '" + sDECR_GU + "' && NUMB_SE == '" + sNUMB_SE + "'";
			
			//trace("arrTargetList sChkStr = " + sChkStr);
			
			//전체삭제일경우 
			if (sDst == "D") {

				iFindRow = this.ds_Detail10.findRowExpr(sChkStr);
				//trace("arrTargetList iFindRow = " + iFindRow);
			
				
				dBGAC_AM_U_ORG = this.ds_Detail10.getOrgColumn(iFindRow, sCol);//집행금액_발의(수정)_원본

				dBGAC_AM = dBGAC_AM_U_ORG;//집행금액_발의	
				
				
				
			} else {
				dBGAC_AM_I = this.ds_Detail10.getCaseSum(sChkStr + " && crudType == 'I'", sCol);//집행금액_발의(신규)
				dBGAC_AM_U = this.ds_Detail10.getCaseSum(sChkStr + " && crudType == 'U'", sCol);//집행금액_발의(수정)
				dBGAC_AM_D = this.ds_Detail10.getCaseSum(sChkStr + " && crudType == 'D'", sCol);//집행금액_발의(삭제)
				
				
				iFindRow = this.ds_Detail10.findRowExpr(sChkStr + " && crudType == 'U'");
				if (iFindRow > -1) {
					dBGAC_AM_U_ORG = this.ds_Detail10.getOrgColumn(iFindRow, sCol);//집행금액_발의(수정)_원본
				} else {
					dBGAC_AM_U_ORG = 0;
				}
				dBGAC_AM = dBGAC_AM_I + (dBGAC_AM_U-dBGAC_AM_U_ORG) - dBGAC_AM_D;//집행금액_발의
			}
			//trace(dBGAC_AM_I + "/" + dBGAC_AM_U + "/" + dBGAC_AM_D + "/" + dBGAC_AM_U_ORG);
			
			iAddRow = this.ds_Detail13.addRow();
			this.ds_Detail13.setColumn(iAddRow, "BUGS_YM", sBUGS_YM);//편성년월
			this.ds_Detail13.setColumn(iAddRow, "DEPM_CD", sDEPM_CD);//부서코드
			this.ds_Detail13.setColumn(iAddRow, "ACOM_CD", sACOM_CD);//계정코드
			this.ds_Detail13.setColumn(iAddRow, "BGAC_AM", dBGAC_AM);//집행금액_발의
			this.ds_Detail13.setColumn(iAddRow, "NUMB_SE", sNUMB_SE);//집행금액_발의순번
			this.ds_Detail13.setColumn(iAddRow, "crudType", "U");
			
		}
	}
	*/
	
}

/***********************************************************************************************
 * 15.23. 타이머 설정 - 비동기시 설정 때문에
 ***********************************************************************************************/ 
this.M_SM_0010_ontimer = function(obj:nexacro.Form,e:nexacro.TimerEventInfo)
{
	//계정코드 팝업콜백함수 인경우
	if (e.timerid == 100) {
		this.fn_CommAcomCallbackRunFunc();//계정팝업 후처리 함수
		this.killTimer(100);

	}
};



/***********************************************************************************************
 * 15.24. 관리항목 자동 입력 (사번, 부서, 예산부서)
 argument 
 1) row = ds_Detail.rowposition
 2) maCd = ds_Detail의 관리항목컬럼
 3) maCdValue = 관리항목코드
 4) deCd = 관리항목 상세코드
 5) deNm = 관리항목명
 ***********************************************************************************************/ 
this.fn_ItemAutoInput = function(row, maCd, maCdValue, deCd, deNm)
{

	if(maCdValue=="3"){
		//사원
		//this.ds_Detail10.setColumn(row, "SYST_ID", this.gfn_GetSessionValue("SYST_ID"));//발의자ID
		this.ds_Detail10.setColumn(row, "V"+deCd, this.gfn_GetSessionValue("USEM_ID"));//발의자사번	
		this.ds_Detail10.setColumn(row, deCd, this.gfn_GetSessionValue("SYST_ID"));//발의자사번	
		this.ds_Detail10.setColumn(row, deNm, this.gfn_GetSessionValue("USEM_NM"));//발의자명	
	}else if(maCdValue=="4" || maCdValue=="B5"){
		//부서(4), 계약부서(B5)
		this.ds_Detail10.setColumn(row, deCd, this.gfn_GetSessionValue("DEPM_CD"));//발의부서코드	
		this.ds_Detail10.setColumn(row, "V"+deCd, this.gfn_GetSessionValue("DEPM_CD"));//발의부서코드	
		this.ds_Detail10.setColumn(row, deNm, this.gfn_GetSessionValue("DEPM_NM"));//발의부서명	
	}else if(maCdValue=="B2"){
		this.ds_Detail10.setColumn(row, deNm, "0");//	법인세
	}
	
};


/***********************************************************************************************
 * 15.25. 차대구분에 따리 필수체크 표시한다.
 ***********************************************************************************************/ 
this.fn_DecrGuCssclass = function(decrGu){

	//차대구분에따라 차변금액, 대변금액 필수 체크 표시
	//무조건 차변,대변금액 필수체크로 변경
// 	if(decrGu =="D"){
// 		//차변
// 		this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10.setCellProperty("head", 9, "cssclass", "essential");
// 		this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10.setCellProperty("head", 10, "cssclass", "");
// 	}else{
// 		//대변
// 		this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10.setCellProperty("head", 9, "cssclass", "");
// 		this.div_DetailInput.form.tab_Detail.tpg_01.form.grd_Detail10.setCellProperty("head", 10, "cssclass", "essential");
// 	}
	
	
}

/***********************************************************************************************
 * 15.26. 반제전표찾기
 ***********************************************************************************************/ 
this.div_DetailInput_btn_banFind_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
   var sPopupId = "S_BANJE_CD_01";//팝업ID
   var oArg = {PrgmId:"M_FA_1000"
              , CusmCd:this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PacsCd.value
			  , CusmNm:this.div_MasterInput.form.tab_Master.tpg_01.form.edt_PacsNm.value
              , AcomCd:this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "ACOM_CD")
			  , AcomNm:this.ds_Detail10.getColumn(this.ds_Detail10.rowposition, "ACOM_NM")
			  };//Argument처리
   this.gfn_BanjePop(sPopupId, oArg);  	
  	
};


/***********************************************************************************************
 * 15.27. 관리항목 년월
 ***********************************************************************************************/ 

 this.cal_ondropdown = function(obj:nexacro.Calendar,e:nexacro.EventInfo)
{
	
	this.gfn_CallYmCalendar(this, "this.div_DetailInput.form.div_detailRight.form.div_Item.form."+obj.Id, "fn_YmCallBack");	
};

/***********************************************************************************************
 * 15.28. 증빙보기 버튼 클릭 이벤트
 ***********************************************************************************************/ 
this.div_MasterInput_btn_WfView_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	var sWofhNo = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "WOFH_NO");//결재번호

	if (!this.gfn_IsNull(sWofhNo)) {
		var sPopupId = "V_WF_M_FA_1000";//팝업ID - 계정코드
		var oArg = {paramTitle:"결재함", WofhNo:sWofhNo};//Argument처리
		this.gfn_WofhPop(sPopupId, oArg); 
	}
	
};



/***********************************************************************************************
 * 15.27. 복사 관리항목
 ***********************************************************************************************/ 

 this.f_ItemCopy = function(iLoop)
{

		
		var sMa01Cd = "";
		var sMa02Cd = "";
		var sMa08Cd = "";
		var sMa04Cd = "";
		var sMa05Cd = "";
		var sMa06Cd = "";
		var sMa07Cd = "";
		var sMa08Cd = "";
		var sItemRow = -1;
		var sCopyYn = "";
		var sCommCD = this.ds_Master10.getColumn(this.ds_Master10.rowposition, "COMM_CD");
		var sItemGu = "";
		
		
		var vFrAm;
		var vExchRt;
		var vWonAm;
	
	
		//for (var iLoop=0; iLoop<this.ds_Detail10.getRowCount(); iLoop++) {
	
				
	
	
			//관리항목 세팅
			this.ds_Detail10.set_rowposition(iLoop);
			//trace("iLoop = " + iLoop);
			this.fn_dsAcomMa(this.ds_Detail10.getColumn("ACOM_CD"), "", false);
			
			
            sMa01Cd = this.ds_Detail10.getColumn(iLoop, "MA01_CD");
            sMa02Cd = this.ds_Detail10.getColumn(iLoop, "MA02_CD");
            sMa03Cd = this.ds_Detail10.getColumn(iLoop, "MA03_CD");
            sMa04Cd = this.ds_Detail10.getColumn(iLoop, "MA04_CD");
            sMa05Cd = this.ds_Detail10.getColumn(iLoop, "MA05_CD");
            sMa06Cd = this.ds_Detail10.getColumn(iLoop, "MA06_CD");
            sMa07Cd = this.ds_Detail10.getColumn(iLoop, "MA07_CD");
            sMa08Cd = this.ds_Detail10.getColumn(iLoop, "MA08_CD");
			
			
			
			
			//관리항목 1
			if(!this.gfn_IsNull(sMa01Cd) && sMa01Cd !="" && sMa01Cd != "*"){ 
			
				sItemRow = this.ds_ItemList.findRowExpr("COMM_CD == '"+sCommCD+"' && ITEM_CD == '"+ sMa01Cd +"'");	
				//trace("관리항목 1 -"+iLoop+" sMa01Cd = "+sMa01Cd+ "  sItemRow = " + sItemRow);
				if(sItemRow > -1){
					sCopyYn = this.ds_ItemList.getColumn(sItemRow, "COPY_YN");
					//trace("관리항목 1 -"+iLoop+" sCopyYn = " + sCopyYn);
					if(sCopyYn == "0" || this.gfn_IsNull(sCopyYn)){
						//trace("관리항목 1 -"+iLoop+" sCopyYn = " + sCopyYn);
						this.ds_Detail10.setColumn(iLoop, "DE01_CD", "");
						this.ds_Detail10.setColumn(iLoop, "DE01_NM", "");
						this.ds_Detail10.setColumn(iLoop, "VDE01_CD", "");
						this.ds_Detail10.setColumn(iLoop, "VDE01_NM", "");
						
						this.ds_CmMaInfo.setColumn(0, "DE01_CD", "");
						this.ds_CmMaInfo.setColumn(0, "DE01_NM", "");
						this.ds_CmMaInfo.setColumn(0, "VDE01_CD", "");
						this.ds_CmMaInfo.setColumn(0, "VDE01_NM", "");
						
						
						if( sMa01Cd == "X" ){
							//통화
							this.ds_Detail10.setColumn(iLoop, "CURR_CD", "0090");
						}else if( sMa01Cd =="Y"){
							//환율 
							this.ds_Detail10.setColumn(iLoop, "EXCH_RT", "1");
						}else if( sMa01Cd =="V"){
							//외화금액
							this.ds_Detail10.setColumn(iLoop, "FRDB_AM", "0");
							this.ds_Detail10.setColumn(iLoop, "FRCR_AM", "0");
						}
						
					}else{
					
						//trace("sMa01Cd = " + sMa01Cd);
						if( sMa01Cd =="X" ){
							//통화
							this.ds_Detail10.setColumn(iLoop, "CURR_CD", this.ds_Detail10.getColumn(iLoop, "DE01_CD"));
						}else if(sMa01Cd =="Y"){
							//환율
							this.ds_Detail10.setColumn(iLoop, "EXCH_RT", this.ds_Detail10.getColumn(iLoop, "DE01_NM"));
						}else if(sMa01Cd =="V"){
							//외화금액
							if(this.ds_Detail10.getColumn(iLoop, "DECR_GU") == "D"){
								this.ds_Detail10.setColumn(iLoop, "FRDB_AM", this.ds_Detail10.getColumn(iLoop, "DE01_NM"));
								this.ds_Detail10.setColumn(iLoop, "FRCR_AM", 0);
							}else{
								this.ds_Detail10.setColumn(iLoop, "FRDB_AM", 0);
								this.ds_Detail10.setColumn(iLoop, "FRCR_AM", this.ds_Detail10.getColumn(iLoop, "DE01_NM"));
							}
						}
					}
					
					sItemGu = this.ds_ItemList.getColumn(sItemRow, "ITEM_GU");
					//trace("sItemGu 01 " + sItemGu);
					
					//관리항목이 combo, popup 이 아닌경우 dexx_cd, vdexx_cd  값은 지운다.
					if(sItemGu !="0020" && sItemGu !="0080" && sItemGu !="0090"){
						
						this.ds_Detail10.setColumn(iLoop, "DE01_CD", "");
						this.ds_Detail10.setColumn(iLoop, "VDE01_CD", "");
						
						this.ds_CmMaInfo.setColumn(0, "DE01_CD", "");
						this.ds_CmMaInfo.setColumn(0, "VDE01_CD", "");
					}
					
					
				}
			}
			//관리항목 2
			if(!this.gfn_IsNull(sMa02Cd) && sMa02Cd !="" && sMa02Cd != "*"){ 
				sItemRow = this.ds_ItemList.findRowExpr("COMM_CD == '"+sCommCD+"' && ITEM_CD == '"+ sMa02Cd +"'");
				//trace("관리항목 2 -"+iLoop+" sMa02Cd = "+sMa02Cd+ "  sItemRow = " + sItemRow);
				if(sItemRow > -1){
					sCopyYn = this.ds_ItemList.getColumn(sItemRow, "COPY_YN");
					//trace("관리항목 2 -"+iLoop+"sCopyYn = " + sCopyYn);
					if(sCopyYn == "0" || this.gfn_IsNull(sCopyYn)){
						//trace("관리항목 2 -"+iLoop+"sCopyYn = " + sCopyYn);
						this.ds_Detail10.setColumn(iLoop, "DE02_CD", "");
						this.ds_Detail10.setColumn(iLoop, "DE02_NM", "");
						this.ds_Detail10.setColumn(iLoop, "VDE02_CD", "");
						this.ds_Detail10.setColumn(iLoop, "VDE02_NM", "");
						
						this.ds_CmMaInfo.setColumn(0, "DE02_CD", "");
						this.ds_CmMaInfo.setColumn(0, "DE02_NM", "");
						this.ds_CmMaInfo.setColumn(0, "VDE02_CD", "");
						this.ds_CmMaInfo.setColumn(0, "VDE02_NM", "");
						
						if( sMa02Cd == "X" ){
							//통화
							this.ds_Detail10.setColumn(iLoop, "CURR_CD", "0090");
						}else if( sMa02Cd =="Y"){
							//환율 
							this.ds_Detail10.setColumn(iLoop, "EXCH_RT", "1");
						}else if( sMa02Cd =="V"){
							//외화금액
							this.ds_Detail10.setColumn(iLoop, "FRDB_AM", "0");
							this.ds_Detail10.setColumn(iLoop, "FRCR_AM", "0");
						}
						
					}else{
					
						//trace("sMa02Cd = " + sMa02Cd);
						if( sMa02Cd =="X" ){
							//통화
							this.ds_Detail10.setColumn(iLoop, "CURR_CD", this.ds_Detail10.getColumn(iLoop, "DE02_CD"));
						}else if(sMa02Cd =="Y"){
							//환율
							this.ds_Detail10.setColumn(iLoop, "EXCH_RT", this.ds_Detail10.getColumn(iLoop, "DE02_NM"));
						}else if(sMa02Cd =="V"){
							//외화금액
							//trace("DE02_NM = " +  this.ds_Detail10.getColumn(iLoop, "DE02_NM"));
							if(this.ds_Detail10.getColumn(iLoop, "DECR_GU") == "D"){
								this.ds_Detail10.setColumn(iLoop, "FRDB_AM", this.ds_Detail10.getColumn(iLoop, "DE02_NM"));
								this.ds_Detail10.setColumn(iLoop, "FRCR_AM", 0);
							}else{
								this.ds_Detail10.setColumn(iLoop, "FRCR_AM", this.ds_Detail10.getColumn(iLoop, "DE02_NM"));
								this.ds_Detail10.setColumn(iLoop, "FRDB_AM", 0);
							}
						}
					}
					
					sItemGu = this.ds_ItemList.getColumn(sItemRow, "ITEM_GU");
					//trace("sItemGu 02 " + sItemGu);
					
					//관리항목이 combo, popup 이 아닌경우 dexx_cd, vdexx_cd  값은 지운다.
					if(sItemGu !="0020" && sItemGu !="0080" && sItemGu !="0090"){
						
						this.ds_Detail10.setColumn(iLoop, "DE02_CD", "");
						this.ds_Detail10.setColumn(iLoop, "VDE02_CD", "");
						
						this.ds_CmMaInfo.setColumn(0, "DE02_CD", "");
						this.ds_CmMaInfo.setColumn(0, "VDE02_CD", "");
					}
				}
			}		
			//관리항목 3
			if(!this.gfn_IsNull(sMa03Cd) && sMa03Cd !="" && sMa03Cd != "*"){ 
				sItemRow = this.ds_ItemList.findRowExpr("COMM_CD == '"+sCommCD+"' && ITEM_CD == '"+ sMa03Cd +"'");
				//trace("관리항목 3 -"+iLoop+" sMa03Cd = "+sMa03Cd+ "  sItemRow = " + sItemRow);			
				if(sItemRow > -1){
					sCopyYn = this.ds_ItemList.getColumn(sItemRow, "COPY_YN");
					//trace("관리항목 3 -"+iLoop+"sCopyYn = " + sCopyYn);
					if(sCopyYn == "0" || this.gfn_IsNull(sCopyYn)){
						//trace("관리항목 3 -"+iLoop+"sCopyYn = " + sCopyYn);
						this.ds_Detail10.setColumn(iLoop, "DE03_CD", "");
						this.ds_Detail10.setColumn(iLoop, "DE03_NM", "");
						this.ds_Detail10.setColumn(iLoop, "VDE03_CD", "");
						this.ds_Detail10.setColumn(iLoop, "VDE03_NM", "");
						
						this.ds_CmMaInfo.setColumn(0, "DE03_CD", "");
						this.ds_CmMaInfo.setColumn(0, "DE03_NM", "");
						this.ds_CmMaInfo.setColumn(0, "VDE03_CD", "");
						this.ds_CmMaInfo.setColumn(0, "VDE03_NM", "");
						
						if( sMa03Cd == "X" ){
							//통화
							this.ds_Detail10.setColumn(iLoop, "CURR_CD", "0090");
						}else if( sMa03Cd =="Y"){
							//환율 
							this.ds_Detail10.setColumn(iLoop, "EXCH_RT", "1");
						}else if( sMa03Cd =="V"){
							//외화금액
							this.ds_Detail10.setColumn(iLoop, "FRDB_AM", "0");
							this.ds_Detail10.setColumn(iLoop, "FRCR_AM", "0");
						}
					}else{
					
						//trace("sMa03Cd = " + sMa03Cd);
						if( sMa03Cd =="X" ){
							//통화
							//trace("DE03_CD = " +  this.ds_Detail10.getColumn(iLoop, "DE03_CD"));
							this.ds_Detail10.setColumn(iLoop, "CURR_CD", this.ds_Detail10.getColumn(iLoop, "DE03_CD"));
						}else if(sMa03Cd =="Y"){
							//환율
							this.ds_Detail10.setColumn(iLoop, "EXCH_RT", this.ds_Detail10.getColumn(iLoop, "DE03_NM"));
						}else if(sMa03Cd =="V"){
							//외화금액
							if(this.ds_Detail10.getColumn(iLoop, "DECR_GU") == "D"){
								this.ds_Detail10.setColumn(iLoop, "FRDB_AM", this.ds_Detail10.getColumn(iLoop, "DE03_NM"));
								this.ds_Detail10.setColumn(iLoop, "FRCR_AM", 0);
							}else{
								this.ds_Detail10.setColumn(iLoop, "FRCR_AM", this.ds_Detail10.getColumn(iLoop, "DE03_NM"));
								this.ds_Detail10.setColumn(iLoop, "FRDB_AM", 0);
							}
						}
					}
					
					sItemGu = this.ds_ItemList.getColumn(sItemRow, "ITEM_GU");
					//trace("sItemGu 03 " + sItemGu);
					
					//관리항목이 combo, popup 이 아닌경우 dexx_cd, vdexx_cd  값은 지운다.
					if(sItemGu !="0020" && sItemGu !="0080" && sItemGu !="0090"){
						
						this.ds_Detail10.setColumn(iLoop, "DE03_CD", "");
						this.ds_Detail10.setColumn(iLoop, "VDE03_CD", "");
						
						this.ds_CmMaInfo.setColumn(0, "DE03_CD", "");
						this.ds_CmMaInfo.setColumn(0, "VDE03_CD", "");
					}
					
				}
			}	
			//관리항목 4
			if(!this.gfn_IsNull(sMa04Cd) && sMa04Cd !="" && sMa04Cd != "*"){ 
				sItemRow = this.ds_ItemList.findRowExpr("COMM_CD == '"+sCommCD+"' && ITEM_CD == '"+ sMa04Cd +"'");	
				//trace("관리항목 4 -"+iLoop+" sMa04Cd = "+sMa04Cd+ "  sItemRow = " + sItemRow);
				if(sItemRow > -1){
					sCopyYn = this.ds_ItemList.getColumn(sItemRow, "COPY_YN");
					//trace("관리항목 4 -"+iLoop+"sCopyYn = " + sCopyYn);
					if(sCopyYn == "0" || this.gfn_IsNull(sCopyYn)){
						//trace("관리항목 4 -"+iLoop+"sCopyYn = " + sCopyYn);
						this.ds_Detail10.setColumn(iLoop, "DE04_CD", "");
						this.ds_Detail10.setColumn(iLoop, "DE04_NM", "");
						this.ds_Detail10.setColumn(iLoop, "VDE04_CD", "");
						this.ds_Detail10.setColumn(iLoop, "VDE04_NM", "");
						
						this.ds_CmMaInfo.setColumn(0, "DE04_CD", "");
						this.ds_CmMaInfo.setColumn(0, "DE04_NM", "");
						this.ds_CmMaInfo.setColumn(0, "VDE04_CD", "");
						this.ds_CmMaInfo.setColumn(0, "VDE04_NM", "");
						
						if( sMa04Cd == "X" ){
							//통화
							this.ds_Detail10.setColumn(iLoop, "CURR_CD", "0090");
						}else if( sMa04Cd =="Y"){
							//환율 
							this.ds_Detail10.setColumn(iLoop, "EXCH_RT", "1");
						}else if( sMa04Cd =="V"){
							//외화금액
							this.ds_Detail10.setColumn(iLoop, "FRDB_AM", "0");
							this.ds_Detail10.setColumn(iLoop, "FRCR_AM", "0");
						}
						
						
						
						
						
					}else{
					
						//trace("sMa04Cd = " + sMa04Cd);
						if( sMa04Cd =="X" ){
							//통화
							this.ds_Detail10.setColumn(iLoop, "CURR_CD", this.ds_Detail10.getColumn(iLoop, "DE04_CD"));
						}else if(sMa04Cd =="Y"){
							//환율
							//trace("DE04_NM = " +  this.ds_Detail10.getColumn(iLoop, "DE04_NM"));
							this.ds_Detail10.setColumn(iLoop, "EXCH_RT", this.ds_Detail10.getColumn(iLoop, "DE04_NM"));
							//vExchRt = nexacro.toNumber(this.ds_Detail10.getColumn(iLoop, this.ds_Detail10.getColumn(iLoop, "DE04_NM")));
							
						}else if(sMa04Cd =="V"){
							//외화금액
							if(this.ds_Detail10.getColumn(iLoop, "DECR_GU") == "D"){
								this.ds_Detail10.setColumn(iLoop, "FRDB_AM", this.ds_Detail10.getColumn(iLoop, "DE04_NM"));
								this.ds_Detail10.setColumn(iLoop, "FRCR_AM", 0);
								//vFrAm = nexacro.toNumber(this.ds_Detail10.getColumn(iLoop, this.ds_Detail10.getColumn(iLoop, "DE04_NM")));
								
							}else{
								this.ds_Detail10.setColumn(iLoop, "FRCR_AM", this.ds_Detail10.getColumn(iLoop, "DE04_NM"));
								this.ds_Detail10.setColumn(iLoop, "FRDB_AM", 0);
								//vFrAm = nexacro.toNumber(this.ds_Detail10.getColumn(iLoop, this.ds_Detail10.getColumn(iLoop, "DE04_NM")));
							}
						}
						
						
						
						
						
						
						
					}
					
					sItemGu = this.ds_ItemList.getColumn(sItemRow, "ITEM_GU");
					//trace("sItemGu 04 " + sItemGu);
					
					//관리항목이 combo, popup 이 아닌경우 dexx_cd, vdexx_cd  값은 지운다.
					if(sItemGu !="0020" && sItemGu !="0080" && sItemGu !="0090"){
						
						this.ds_Detail10.setColumn(iLoop, "DE04_CD", "");
						this.ds_Detail10.setColumn(iLoop, "VDE04_CD", "");
						
						this.ds_CmMaInfo.setColumn(0, "DE04_CD", "");
						this.ds_CmMaInfo.setColumn(0, "VDE04_CD", "");
					}
					
				}
			}
			//관리항목 5
			if(!this.gfn_IsNull(sMa05Cd) && sMa05Cd !="" && sMa05Cd != "*"){ 
				sItemRow = this.ds_ItemList.findRowExpr("COMM_CD == '"+sCommCD+"' && ITEM_CD == '"+ sMa05Cd +"'");
				//trace("관리항목 5 -"+iLoop+" sMa05Cd = "+sMa05Cd+ "  sItemRow = " + sItemRow);
				if(sItemRow > -1){
					sCopyYn = this.ds_ItemList.getColumn(sItemRow, "COPY_YN");
					//trace("관리항목 5-"+iLoop+" sCopyYn = " + sCopyYn);
					if(sCopyYn == "0" || this.gfn_IsNull(sCopyYn)){
						//trace("관리항목 5 -"+iLoop+"sCopyYn = " + sCopyYn);
						this.ds_Detail10.setColumn(iLoop, "DE05_CD", "");
						this.ds_Detail10.setColumn(iLoop, "DE05_NM", "");
						this.ds_Detail10.setColumn(iLoop, "VDE05_CD", "");
						this.ds_Detail10.setColumn(iLoop, "VDE05_NM", "");
						
						this.ds_CmMaInfo.setColumn(0, "DE05_CD", "");
						this.ds_CmMaInfo.setColumn(0, "DE05_NM", "");
						this.ds_CmMaInfo.setColumn(0, "VDE05_CD", "");
						this.ds_CmMaInfo.setColumn(0, "VDE05_NM", "");
						
						
						if( sMa05Cd == "X" ){
							//통화
							this.ds_Detail10.setColumn(iLoop, "CURR_CD", "0090");
						}else if( sMa05Cd =="Y"){
							//환율 
							this.ds_Detail10.setColumn(iLoop, "EXCH_RT", "1");
						}else if( sMa05Cd =="V"){
							//외화금액
							this.ds_Detail10.setColumn(iLoop, "FRDB_AM", "0");
							this.ds_Detail10.setColumn(iLoop, "FRCR_AM", "0");
						}
					}else{
					
						if( sMa05Cd =="X" ){
							//통화
							this.ds_Detail10.setColumn(iLoop, "CURR_CD", this.ds_Detail10.getColumn(iLoop, "DE05_CD"));
						}else if(sMa05Cd =="Y"){
							//환율
							this.ds_Detail10.setColumn(iLoop, "EXCH_RT", this.ds_Detail10.getColumn(iLoop, "DE05_NM"));
						}else if(sMa05Cd =="V"){
							//외화금액
							if(this.ds_Detail10.getColumn(iLoop, "DECR_GU") == "D"){
								this.ds_Detail10.setColumn(iLoop, "FRDB_AM", this.ds_Detail10.getColumn(iLoop, "DE05_NM"));
								this.ds_Detail10.setColumn(iLoop, "FRCR_AM", 0);
							}else{
								this.ds_Detail10.setColumn(iLoop, "FRCR_AM", this.ds_Detail10.getColumn(iLoop, "DE05_NM"));
								this.ds_Detail10.setColumn(iLoop, "FRDB_AM", 0);
							}
						}
					}
					
					sItemGu = this.ds_ItemList.getColumn(sItemRow, "ITEM_GU");
					//trace("sItemGu 05 " + sItemGu);
					
					//관리항목이 combo, popup 이 아닌경우 dexx_cd, vdexx_cd  값은 지운다.
					if(sItemGu !="0020" && sItemGu !="0080" && sItemGu !="0090"){
						
						this.ds_Detail10.setColumn(iLoop, "DE05_CD", "");
						this.ds_Detail10.setColumn(iLoop, "VDE05_CD", "");
						
						this.ds_CmMaInfo.setColumn(0, "DE05_CD", "");
						this.ds_CmMaInfo.setColumn(0, "VDE05_CD", "");
					}
					
				}
			}
			//관리항목 6
			if(!this.gfn_IsNull(sMa06Cd) && sMa06Cd !="" && sMa06Cd != "*"){ 
				sItemRow = this.ds_ItemList.findRowExpr("COMM_CD == '"+sCommCD+"' && ITEM_CD == '"+ sMa06Cd +"'");		
				//trace("관리항목 6 -"+iLoop+" sMa06Cd = "+sMa06Cd+ "  sItemRow = " + sItemRow);
				if(sItemRow > -1){
					sCopyYn = this.ds_ItemList.getColumn(sItemRow, "COPY_YN");
					//trace("관리항목 6-"+iLoop+" sCopyYn = " + sCopyYn);
					if(sCopyYn == "0" || this.gfn_IsNull(sCopyYn)){
						//trace("관리항목 6 -"+iLoop+"sCopyYn = " + sCopyYn);
						this.ds_Detail10.setColumn(iLoop, "DE06_CD", "");
						this.ds_Detail10.setColumn(iLoop, "DE06_NM", "");
						this.ds_Detail10.setColumn(iLoop, "VDE06_CD", "");
						this.ds_Detail10.setColumn(iLoop, "VDE06_NM", "");
						
						this.ds_CmMaInfo.setColumn(0, "DE06_CD", "");
						this.ds_CmMaInfo.setColumn(0, "DE06_NM", "");
						this.ds_CmMaInfo.setColumn(0, "VDE06_CD", "");
						this.ds_CmMaInfo.setColumn(0, "VDE06_NM", "");
						
						if( sMa06Cd == "X" ){
							//통화
							this.ds_Detail10.setColumn(iLoop, "CURR_CD", "0090");
						}else if( sMa06Cd =="Y"){
							//환율 
							this.ds_Detail10.setColumn(iLoop, "EXCH_RT", "1");
						}else if( sMa06Cd =="V"){
							//외화금액
							this.ds_Detail10.setColumn(iLoop, "FRDB_AM", "0");
							this.ds_Detail10.setColumn(iLoop, "FRCR_AM", "0");
						}
					}else{
					
						if( sMa06Cd =="X" ){
							//통화
							this.ds_Detail10.setColumn(iLoop, "CURR_CD", this.ds_Detail10.getColumn(iLoop, "DE06_CD"));
						}else if(sMa06Cd =="Y"){
							//환율
							this.ds_Detail10.setColumn(iLoop, "EXCH_RT", this.ds_Detail10.getColumn(iLoop, "DE06_NM"));
						}else if(sMa06Cd =="V"){
							//외화금액
							if(this.ds_Detail10.getColumn(iLoop, "DECR_GU") == "D"){
								this.ds_Detail10.setColumn(iLoop, "FRDB_AM", this.ds_Detail10.getColumn(iLoop, "DE06_NM"));
								this.ds_Detail10.setColumn(iLoop, "FRCR_AM", 0);
							}else{
								this.ds_Detail10.setColumn(iLoop, "FRCR_AM", this.ds_Detail10.getColumn(iLoop, "DE06_NM"));
								this.ds_Detail10.setColumn(iLoop, "FRDB_AM", 0);
							}
						}
					}
					
					sItemGu = this.ds_ItemList.getColumn(sItemRow, "ITEM_GU");
					//trace("sItemGu 06 " + sItemGu);
					
					//관리항목이 combo, popup 이 아닌경우 dexx_cd, vdexx_cd  값은 지운다.
					if(sItemGu !="0020" && sItemGu !="0080" && sItemGu !="0090"){
						
						this.ds_Detail10.setColumn(iLoop, "DE06_CD", "");
						this.ds_Detail10.setColumn(iLoop, "VDE06_CD", "");
						
						this.ds_CmMaInfo.setColumn(0, "DE06_CD", "");
						this.ds_CmMaInfo.setColumn(0, "VDE06_CD", "");
					}
					
				}
			}
			//관리항목 7
			if(!this.gfn_IsNull(sMa07Cd) && sMa07Cd !="" && sMa07Cd != "*"){ 
				sItemRow = this.ds_ItemList.findRowExpr("COMM_CD == '"+sCommCD+"' && ITEM_CD == '"+ sMa07Cd +"'");	
				//trace("관리항목 7 -"+iLoop+" sMa07Cd = "+sMa07Cd+ "  sItemRow = " + sItemRow);
				if(sItemRow > -1){
					sCopyYn = this.ds_ItemList.getColumn(sItemRow, "COPY_YN");
					//trace("관리항목 7-"+iLoop+" sCopyYn = " + sCopyYn);
					if(sCopyYn == "0" || this.gfn_IsNull(sCopyYn)){
						//trace("관리항목 7 -"+iLoop+"sCopyYn = " + sCopyYn);
						this.ds_Detail10.setColumn(iLoop, "DE07_CD", "");
						this.ds_Detail10.setColumn(iLoop, "DE07_NM", "");
						this.ds_Detail10.setColumn(iLoop, "VDE07_CD", "");
						this.ds_Detail10.setColumn(iLoop, "VDE07_NM", "");
						
						this.ds_CmMaInfo.setColumn(0, "DE07_CD", "");
						this.ds_CmMaInfo.setColumn(0, "DE07_NM", "");
						this.ds_CmMaInfo.setColumn(0, "VDE07_CD", "");
						this.ds_CmMaInfo.setColumn(0, "VDE07_NM", "");
						
						if( sMa07Cd == "X" ){
							//통화
							this.ds_Detail10.setColumn(iLoop, "CURR_CD", "0090");
						}else if( sMa07Cd =="Y"){
							//환율 
							this.ds_Detail10.setColumn(iLoop, "EXCH_RT", "1");
						}else if( sMa07Cd =="V"){
							//외화금액
							this.ds_Detail10.setColumn(iLoop, "FRDB_AM", "0");
							this.ds_Detail10.setColumn(iLoop, "FRCR_AM", "0");
						}
					}else{
					
						if( sMa07Cd =="X" ){
							//통화
							this.ds_Detail10.setColumn(iLoop, "CURR_CD", this.ds_Detail10.getColumn(iLoop, "DE07_CD"));
						}else if(sMa07Cd =="Y"){
							//환율
							this.ds_Detail10.setColumn(iLoop, "EXCH_RT", this.ds_Detail10.getColumn(iLoop, "DE07_NM"));
						}else if(sMa07Cd =="V"){
							//외화금액
							if(this.ds_Detail10.getColumn(iLoop, "DECR_GU") == "D"){
								this.ds_Detail10.setColumn(iLoop, "FRDB_AM", this.ds_Detail10.getColumn(iLoop, "DE07_NM"));
								this.ds_Detail10.setColumn(iLoop, "FRCR_AM", 0);
							}else{
								this.ds_Detail10.setColumn(iLoop, "FRCR_AM", this.ds_Detail10.getColumn(iLoop, "DE07_NM"));
								this.ds_Detail10.setColumn(iLoop, "FRDB_AM", 0);
							}
						}
					}
					
					sItemGu = this.ds_ItemList.getColumn(sItemRow, "ITEM_GU");
					//trace("sItemGu 07 " + sItemGu);
					
					//관리항목이 combo, popup 이 아닌경우 dexx_cd, vdexx_cd  값은 지운다.
					if(sItemGu !="0020" && sItemGu !="0080" && sItemGu !="0090"){
						
						this.ds_Detail10.setColumn(iLoop, "DE07_CD", "");
						this.ds_Detail10.setColumn(iLoop, "VDE07_CD", "");
						
						this.ds_CmMaInfo.setColumn(0, "DE07_CD", "");
						this.ds_CmMaInfo.setColumn(0, "VDE07_CD", "");
					}
					
				}
			}  
			//관리항목 8
			if(!this.gfn_IsNull(sMa08Cd) && sMa08Cd !="" && sMa08Cd != "*"){ 
				sItemRow = this.ds_ItemList.findRowExpr("COMM_CD == '"+sCommCD+"' && ITEM_CD == '"+ sMa08Cd +"'");	
				//trace("관리항목 8 -"+iLoop+" sMa08Cd = "+sMa08Cd+ "  sItemRow = " + sItemRow);	
				if(sItemRow > -1){
					sCopyYn = this.ds_ItemList.getColumn(sItemRow, "COPY_YN");
					//trace("관리항목 8-"+iLoop+" sCopyYn = " + sCopyYn);
					if(sCopyYn == "0" || this.gfn_IsNull(sCopyYn)){
						//trace("관리항목 8 -"+iLoop+"sCopyYn = " + sCopyYn);
						this.ds_Detail10.setColumn(iLoop, "DE08_CD", "");
						this.ds_Detail10.setColumn(iLoop, "DE08_NM", "");
						this.ds_Detail10.setColumn(iLoop, "VDE08_CD", "");
						this.ds_Detail10.setColumn(iLoop, "VDE08_NM", "");
						
						this.ds_CmMaInfo.setColumn(0, "DE08_CD", "");
						this.ds_CmMaInfo.setColumn(0, "DE08_NM", "");
						this.ds_CmMaInfo.setColumn(0, "VDE08_CD", "");
						this.ds_CmMaInfo.setColumn(0, "VDE08_NM", "");
						
						
						if( sMa08Cd == "X" ){
							//통화
							this.ds_Detail10.setColumn(iLoop, "CURR_CD", "0090");
						}else if( sMa08Cd =="Y"){
							//환율 
							this.ds_Detail10.setColumn(iLoop, "EXCH_RT", "1");
						}else if( sMa08Cd =="V"){
							//외화금액
							this.ds_Detail10.setColumn(iLoop, "FRDB_AM", "0");
							this.ds_Detail10.setColumn(iLoop, "FRCR_AM", "0");
						}
						
						
					}else{
					
						if( sMa08Cd =="X" ){
							//통화
							this.ds_Detail10.setColumn(iLoop, "CURR_CD", this.ds_Detail10.getColumn(iLoop, "DE08_CD"));
						}else if(sMa08Cd =="Y"){
							//환율
							this.ds_Detail10.setColumn(iLoop, "EXCH_RT", this.ds_Detail10.getColumn(iLoop, "DE08_NM"));
						}else if(sMa08Cd =="V"){
							//외화금액
							if(this.ds_Detail10.getColumn(iLoop, "DECR_GU") == "D"){
								this.ds_Detail10.setColumn(iLoop, "FRDB_AM", this.ds_Detail10.getColumn(iLoop, "DE08_NM"));
								this.ds_Detail10.setColumn(iLoop, "FRCR_AM", 0);
							}else{
								this.ds_Detail10.setColumn(iLoop, "FRCR_AM", this.ds_Detail10.getColumn(iLoop, "DE08_NM"));
								this.ds_Detail10.setColumn(iLoop, "FRDB_AM", 0);
							}
						}
					}
					
					sItemGu = this.ds_ItemList.getColumn(sItemRow, "ITEM_GU");
					//trace("sItemGu 08 " + sItemGu);
					
					//관리항목이 combo, popup 이 아닌경우 dexx_cd, vdexx_cd  값은 지운다.
					if(sItemGu !="0020" && sItemGu !="0080" && sItemGu !="0090"){
						
						this.ds_Detail10.setColumn(iLoop, "DE08_CD", "");
						this.ds_Detail10.setColumn(iLoop, "VDE08_CD", "");
						
						this.ds_CmMaInfo.setColumn(0, "DE08_CD", "");
						this.ds_CmMaInfo.setColumn(0, "VDE08_CD", "");
					}
					
				}
			}
			
			
			//복사 외화 * 환율 원화금액 입력
			if (this.ds_Detail10.getColumn(iLoop, "DECR_GU") == "D"){
				vFrAm = nexacro.toNumber(this.ds_Detail10.getColumn(iLoop, "FRDB_AM"));
			}else{
				vFrAm = nexacro.toNumber(this.ds_Detail10.getColumn(iLoop, "FRCR_AM"));
			}
			
			vExchRt = nexacro.toNumber(this.ds_Detail10.getColumn(iLoop, "EXCH_RT"));
				
			//trace("COPY===="+ vFrAm);
			//trace("COPY===="+ vExchRt);	
				
			if(this.gfn_IsNull(vFrAm)){
				vFrAm = 0;
			}
			if(this.gfn_IsNull(vExchRt)){
				vExchRt = 0;
			}
			
			//trace("DECR_GU===="+ this.ds_Detail10.getColumn(iLoop, "DECR_GU"));	
			if(vFrAm > 0){
				vWonAm = nexacro.round(vFrAm * vExchRt);
			}else{
				vWonAm = nexacro.round(vFrAm * -1 * vExchRt);
				vWonAm = vWonAm * -1;
			}
			
			
			//trace("vWonAm===="+ vWonAm+"  iLoop = " + iLoop);
			
			if (this.ds_Detail10.getColumn(iLoop, "DECR_GU") == "D"){
				this.ds_Detail10.setColumn(iLoop, "DEBI_AM", vWonAm);
			}else{
				this.ds_Detail10.setColumn(iLoop, "CRED_AM", vWonAm);
			}
			
			
// 			val ColCd  = "this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De01Cd";//관리항목-코드컴포넌트
// 			val VColCd = "this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_VDe01Cd";//관리항목-코드컴포넌트
// 			val ColNm  = "this.div_DetailInput.form.div_detailRight.form.div_Item.form.edt_De01Nm";//관리항목-코드명컴포넌트				
				
			
			//거래처인경우 거래처명을 다시 가져온다

			if(sMa01Cd == "2"){
				this.fn_GetCusmNm( this.ds_Detail10.getColumn(iLoop, "DE01_CD"), iLoop , "01");
			}else if(sMa02Cd == "2"){
				this.fn_GetCusmNm( this.ds_Detail10.getColumn(iLoop, "DE02_CD"), iLoop , "02");
			}else if(sMa03Cd == "2"){
				this.fn_GetCusmNm( this.ds_Detail10.getColumn(iLoop, "DE03_CD"), iLoop , "03");
			}else if(sMa04Cd == "2"){
				this.fn_GetCusmNm( this.ds_Detail10.getColumn(iLoop, "DE04_CD"), iLoop , "04");
			}else if(sMa05Cd == "2"){
				this.fn_GetCusmNm( this.ds_Detail10.getColumn(iLoop, "DE05_CD"), iLoop , "05");
			}else if(sMa06Cd == "2"){
				this.fn_GetCusmNm( this.ds_Detail10.getColumn(iLoop, "DE06_CD"), iLoop , "06");
			}else if(sMa07Cd == "2"){
				this.fn_GetCusmNm( this.ds_Detail10.getColumn(iLoop, "DE07_CD"), iLoop , "07");
			}else if(sMa08Cd == "2"){
				this.fn_GetCusmNm( this.ds_Detail10.getColumn(iLoop, "DE08_CD"), iLoop , "08");
			}
};



/***********************************************************************************************
 * 15.27. 관리항목 자동입력
  1. 부가세금액
 ***********************************************************************************************/ 
this.fn_maAutoInput  = function(row, chgCol)
{
	var nRow = -1;
	var maNum = "";
	var deCrGu = "";
	var deCrGuChk = "";
	var vatAm = 0;
	
	
	// 차대변금액 변경시
	if(chgCol =="DEBI_AM" || chgCol=="CRED_AM"){
		
		//부가세금액
		deCrGu = this.ds_Detail10.getColumn(row, "DECR_GU");
		deCrGuChk = this.ds_Detail10.getColumn(row, "DECR_GU_CHK");
		if(deCrGu == deCrGuChk){
		
			//부가세금액 C3
			var nRow = this.ds_AcomMa.findRowExpr("MA_CD=='C3'");
			if(nRow > -1){
				maNum = this.ds_AcomMa.getColumn(nRow, "MA_NUM");
				
				if(chgCol == "DEBI_AM"){
					vatAm = this.ds_Detail10.getColumn(row, "DEBI_AM");
				}else{
					vatAm = this.ds_Detail10.getColumn(row, "CRED_AM");
				}
				
				//trace("vatAm===" + vatAm);
				
				if(this.gfn_IsNull(vatAm)){
					vatAm = 0;
				}
				
				this.ds_CmMaInfo.setColumn(0, "DE"+maNum+"_NM", vatAm);
				this.ds_Detail10.setColumn(row, "DE"+maNum+"_NM", vatAm);
				this.ds_CmMaInfo.setColumn(0, "VDE"+maNum+"_NM", vatAm);
				this.ds_Detail10.setColumn(row, "VDE"+maNum+"_NM", vatAm);
			}
			
		}
	}
}




/***********************************************************************************************
 * 15.28. 관리항목 거래처명 넣기
  1. 복사시 거래처명 다시 넣기
 ***********************************************************************************************/ 
this.fn_GetCusmNm = function(CustCd, row, maNum)
{


	
	this.ds_Input.clearData();
	this.ds_Input.addRow();

	this.ds_Input.setColumn(0, "CUSM_CD", CustCd);

	//[공통]서비스정보 초기화
	this.gfn_InitComService(this);
		
	//[공통]서비스정보 추가
	var svcAddObj = new Object();//[공통] 서비스 추가 파라메타 정보 Object
	svcAddObj.sSelectSql = "sd:M_SD_CUSM_M_SL11";
	this.gfn_AddComSearchService(this, svcAddObj);			

	//[공통]서비스 호출 변수
	var svcCallObj = new Object();//[공통] 서비스 파라메타 정보 Object
		
	svcCallObj.sTrid = "GET_CUSMNM";//Transaction ID 등 callback에서 넘겨 받을 String을 지정

	svcCallObj.sActionName = this.G_SV_FA;//서버에서 호출할 Action - 모듈별로 호출되는 기본 Actio이 다름 : 공통 서비스 Action 업무구분  변수 참조
	svcCallObj.sInputDaset = "ds_Input=ds_Input" //입력 데이터셋
	svcCallObj.sOutDatset = "ds_Cusm=ds_Master10";//출력 데이터셋
	svcCallObj.sOtherArg = "";//서버로 전송할 기타 Argument 정보 문자열, 예) key=value key2=value2
	svcCallObj.sCallBackFnc = "fn_Callback";//서버에서 처리가 완료된 후 Callback 받을 Function 명
	svcCallObj.isSync = true;//동기식으로 설정할지 여부
	//[공통]서비스 호출
	this.gfn_CallComService(this, svcCallObj);
	
	this.ds_Detail10.setColumn(row, "DE"+maNum+"_NM", this.ds_Cusm.getColumn(0, "CUSM_NM"))
	
}]]></Script>
    <Bind>
      <BindItem id="item2" compid="div_MasterInput.form.tab_Master.tpg_01.form.edt_DepmCd" propid="value" datasetid="ds_Master10" columnid="DEPM_CD"/>
      <BindItem id="item3" compid="div_MasterInput.form.tab_Master.tpg_01.form.edt_EmpmCd" propid="value" datasetid="ds_Master10" columnid="EMPM_CD"/>
      <BindItem id="item4" compid="div_MasterInput.form.tab_Master.tpg_01.form.edt_SystId" propid="value" datasetid="ds_Master10" columnid="SYST_ID"/>
      <BindItem id="item5" compid="div_MasterInput.form.tab_Master.tpg_01.form.edt_DepmNm" propid="value" datasetid="ds_Master10" columnid="DEPM_NM"/>
      <BindItem id="item21" compid="div_MasterInput.form.tab_Master.tpg_01.form.edt_EmpmNm" propid="value" datasetid="ds_Master10" columnid="EMPM_NM"/>
      <BindItem id="item8" compid="div_MasterInput.form.tab_Master.tpg_01.form.edt_AcumCd" propid="value" datasetid="ds_Master10" columnid="ACUM_CD"/>
      <BindItem id="item11" compid="div_MasterInput.form.tab_Master.tpg_01.form.edt_PacsCd" propid="value" datasetid="ds_Master10" columnid="PACS_CD"/>
      <BindItem id="item1" compid="div_MasterInput.form.tab_Master.tpg_01.form.txt_AcreNm" propid="value" datasetid="ds_Master10" columnid="ACRE_NM"/>
      <BindItem id="item26" compid="div_DetailInput.form.div_detailRight.form.edt_TemhNo00_00" propid="value" datasetid="ds_Master10" columnid="TEMH_NO"/>
      <BindItem id="item27" compid="div_DetailInput.form.div_detailRight.form.edt_TemhNo00_01" propid="value" datasetid="ds_Master10" columnid="TEMH_NO"/>
      <BindItem id="item28" compid="div_DetailInput.form.div_detailRight.form.edt_TemhNo00_01_00" propid="value" datasetid="ds_Master10" columnid="TEMH_NO"/>
      <BindItem id="item29" compid="div_DetailInput.form.div_detailRight.form.edt_TemhNo00_01_01" propid="value" datasetid="ds_Master10" columnid="TEMH_NO"/>
      <BindItem id="item31" compid="div_DetailInput.form.div_detailRight.form.edt_TemhNo00_01_02" propid="value" datasetid="ds_Master10" columnid="TEMH_NO"/>
      <BindItem id="item32" compid="div_DetailInput.form.div_detailRight.form.edt_TemhNo00_01_03" propid="value" datasetid="ds_Master10" columnid="TEMH_NO"/>
      <BindItem id="item15" compid="div_MasterInput.form.tab_Master.tpg_01.form.edt_AcumNm" propid="value" datasetid="ds_Master10" columnid="ACUM_NM"/>
      <BindItem id="item18" compid="div_MasterInput.form.tab_Master.tpg_01.form.edt_AcchNm" propid="value" datasetid="ds_Master10" columnid="ACCH_NM"/>
      <BindItem id="item19" compid="div_MasterInput.form.tab_Master.tpg_01.form.cal_PareDd" propid="value" datasetid="ds_Master10" columnid="PARE_DD"/>
      <BindItem id="item22" compid="div_MasterInput.form.tab_Master.tpg_01.form.cbo_PacsGu" propid="value" datasetid="ds_Master10" columnid="PACS_GU"/>
      <BindItem id="item7" compid="div_MasterInput.form.tab_Master.tpg_01.form.mae_AcchAm" propid="value" datasetid="ds_Master10" columnid="ACCH_AM"/>
      <BindItem id="item12" compid="div_DetailInput.form.div_detailRight.form.div_Budget.form.edt_BudgetDeptCd" propid="value" datasetid="ds_Detail10" columnid="BUDP_CD"/>
      <BindItem id="item14" compid="div_DetailInput.form.div_detailRight.form.div_Budget.form.edt_BudgetDeptNm" propid="value" datasetid="ds_Detail10" columnid="BUDP_NM"/>
      <BindItem id="item20" compid="div_DetailInput.form.div_detailRight.form.div_Budget.form.edt_BudgetAcomCd" propid="value" datasetid="ds_Detail10" columnid="ACOM_NM"/>
      <BindItem id="item24" compid="div_DetailInput.form.div_detailRight.form.div_Budget.form.mae_RecAm" propid="value" datasetid="ds_Detail11" columnid="BGSU_AM"/>
      <BindItem id="item25" compid="div_DetailInput.form.div_detailRight.form.div_Budget.form.mae_AvailAm" propid="value" datasetid="ds_Master10" columnid=""/>
      <BindItem id="item33" compid="div_DetailInput.form.div_detailRight.form.div_Budget.form.mae_UsedAm" propid="value" datasetid="ds_Master10" columnid=""/>
      <BindItem id="item34" compid="div_DetailInput.form.div_detailRight.form.div_Budget.form.cal_BudgetDd" propid="value" datasetid="ds_Detail10" columnid="BUDG_MM"/>
      <BindItem id="item0" compid="div_MasterInput.form.tab_Master.tpg_01.form.mae_AcchNo" propid="value" datasetid="ds_Master10" columnid="ACCH_NO"/>
      <BindItem id="item6" compid="div_MasterInput.form.tab_Master.tpg_01.form.mae_SlipNo" propid="value" datasetid="ds_Master10" columnid="SLIP_NO"/>
      <BindItem id="item9" compid="div_MasterInput.form.tab_Master.tpg_01.form.cal_AcchDd" propid="value" datasetid="ds_Master10" columnid="ACCH_DD"/>
      <BindItem id="item10" compid="div_MasterInput.form.tab_Master.tpg_01.form.cbo_ActyCd" propid="value" datasetid="ds_Master10" columnid="ACTY_CD"/>
      <BindItem id="item16" compid="div_MasterInput.form.tab_Master.tpg_01.form.cbo_AcchGu" propid="value" datasetid="ds_Master10" columnid="ACCH_GU"/>
      <BindItem id="item30" compid="div_MasterInput.form.tab_Master.tpg_01.form.edt_PacsNm" propid="value" datasetid="ds_Master10" columnid="PACS_NM"/>
      <BindItem id="item13" compid="div_MasterInput.form.tab_Master.tpg_01.form.cbo_PabaCd" propid="value" datasetid="ds_Master10" columnid="PABA_CD"/>
      <BindItem id="item23" compid="div_MasterInput.form.tab_Master.tpg_01.form.cbo_PaacNo" propid="value" datasetid="ds_Master10" columnid="PAAC_NO"/>
      <BindItem id="item17" compid="div_MasterInput.form.tab_Master.tpg_01.form.chk_TranYn" propid="value" datasetid="ds_Master10" columnid="TRAN_YN"/>
    </Bind>
  </Form>
</FDL>
